(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s_={exports:{}},Ec={},i_={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=Symbol.for("react.element"),NS=Symbol.for("react.portal"),DS=Symbol.for("react.fragment"),OS=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),MS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),FS=Symbol.for("react.suspense"),US=Symbol.for("react.memo"),zS=Symbol.for("react.lazy"),Qg=Symbol.iterator;function BS(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var o_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a_=Object.assign,l_={};function fo(t,e,n){this.props=t,this.context=e,this.refs=l_,this.updater=n||o_}fo.prototype.isReactComponent={};fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u_(){}u_.prototype=fo.prototype;function rp(t,e,n){this.props=t,this.context=e,this.refs=l_,this.updater=n||o_}var sp=rp.prototype=new u_;sp.constructor=rp;a_(sp,fo.prototype);sp.isPureReactComponent=!0;var Jg=Array.isArray,c_=Object.prototype.hasOwnProperty,ip={current:null},h_={key:!0,ref:!0,__self:!0,__source:!0};function d_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)c_.call(e,r)&&!h_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ya,type:t,key:i,ref:o,props:s,_owner:ip.current}}function $S(t,e){return{$$typeof:Ya,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function op(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ya}function HS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zg=/\/+/g;function Dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HS(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ya:case NS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dh(o,0):r,Jg(s)?(n="",t!=null&&(n=t.replace(Zg,"$&/")+"/"),ou(s,e,n,"",function(c){return c})):s!=null&&(op(s)&&(s=$S(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jg(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Dh(i,a);o+=ou(i,e,n,u,s)}else if(u=BS(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Dh(i,a++),o+=ou(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pl(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},au={transition:null},qS={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:au,ReactCurrentOwner:ip};function f_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Pl,forEach:function(t,e,n){Pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!op(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=fo;ce.Fragment=DS;ce.Profiler=LS;ce.PureComponent=rp;ce.StrictMode=OS;ce.Suspense=FS;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qS;ce.act=f_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=a_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ip.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)c_.call(e,u)&&!h_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ya,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:MS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VS,_context:t},t.Consumer=t};ce.createElement=d_;ce.createFactory=function(t){var e=d_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:jS,render:t}};ce.isValidElement=op;ce.lazy=function(t){return{$$typeof:zS,_payload:{_status:-1,_result:t},_init:WS}};ce.memo=function(t,e){return{$$typeof:US,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};ce.unstable_act=f_;ce.useCallback=function(t,e){return Ft.current.useCallback(t,e)};ce.useContext=function(t){return Ft.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Ft.current.useEffect(t,e)};ce.useId=function(){return Ft.current.useId()};ce.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Ft.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};ce.useRef=function(t){return Ft.current.useRef(t)};ce.useState=function(t){return Ft.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Ft.current.useTransition()};ce.version="18.3.1";i_.exports=ce;var A=i_.exports;const vn=PS(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS=A,KS=Symbol.for("react.element"),YS=Symbol.for("react.fragment"),XS=Object.prototype.hasOwnProperty,QS=GS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function p_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XS.call(e,r)&&!JS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:KS,type:t,key:i,ref:o,props:s,_owner:QS.current}}Ec.Fragment=YS;Ec.jsx=p_;Ec.jsxs=p_;s_.exports=Ec;var p=s_.exports,Id={},m_={exports:{}},sn={},g_={exports:{}},y_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var Q=W.length;W.push(J);e:for(;0<Q;){var ue=Q-1>>>1,ae=W[ue];if(0<s(ae,J))W[ue]=J,W[Q]=ae,Q=ue;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],Q=W.pop();if(Q!==J){W[0]=Q;e:for(var ue=0,ae=W.length,xt=ae>>>1;ue<xt;){var Te=2*(ue+1)-1,me=W[Te],Pe=Te+1,Ge=W[Pe];if(0>s(me,Q))Pe<ae&&0>s(Ge,me)?(W[ue]=Ge,W[Pe]=Q,ue=Pe):(W[ue]=me,W[Te]=Q,ue=Te);else if(Pe<ae&&0>s(Ge,Q))W[ue]=Ge,W[Pe]=Q,ue=Pe;else break e}}return J}function s(W,J){var Q=W.sortIndex-J.sortIndex;return Q!==0?Q:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,y=!1,S=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=W)r(c),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(c)}}function D(W){if(E=!1,x(W),!S)if(n(u)!==null)S=!0,mt(V);else{var J=n(c);J!==null&&zt(D,J.startTime-W)}}function V(W,J){S=!1,E&&(E=!1,_(w),w=-1),y=!0;var Q=m;try{for(x(J),f=n(u);f!==null&&(!(f.expirationTime>J)||W&&!P());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,m=f.priorityLevel;var ae=ue(f.expirationTime<=J);J=t.unstable_now(),typeof ae=="function"?f.callback=ae:f===n(u)&&r(u),x(J)}else r(u);f=n(u)}if(f!==null)var xt=!0;else{var Te=n(c);Te!==null&&zt(D,Te.startTime-J),xt=!1}return xt}finally{f=null,m=Q,y=!1}}var U=!1,k=null,w=-1,C=5,R=-1;function P(){return!(t.unstable_now()-R<C)}function N(){if(k!==null){var W=t.unstable_now();R=W;var J=!0;try{J=k(!0,W)}finally{J?b():(U=!1,k=null)}}else U=!1}var b;if(typeof v=="function")b=function(){v(N)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,qe=we.port2;we.port1.onmessage=N,b=function(){qe.postMessage(null)}}else b=function(){I(N,0)};function mt(W){k=W,U||(U=!0,b())}function zt(W,J){w=I(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,mt(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var Q=m;m=J;try{return W()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=m;m=W;try{return J()}finally{m=Q}},t.unstable_scheduleCallback=function(W,J,Q){var ue=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ue+Q:ue):Q=ue,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,W={id:h++,callback:J,priorityLevel:W,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ue?(W.sortIndex=Q,e(c,W),n(u)===null&&W===n(c)&&(E?(_(w),w=-1):E=!0,zt(D,Q-ue))):(W.sortIndex=ae,e(u,W),S||y||(S=!0,mt(V))),W},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(W){var J=m;return function(){var Q=m;m=J;try{return W.apply(this,arguments)}finally{m=Q}}}})(y_);g_.exports=y_;var ZS=g_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC=A,rn=ZS;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v_=new Set,Ea={};function di(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(Ea[t]=e,t=0;t<e.length;t++)v_.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kd=Object.prototype.hasOwnProperty,tC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ey={},ty={};function nC(t){return kd.call(ty,t)?!0:kd.call(ey,t)?!1:tC.test(t)?ty[t]=!0:(ey[t]=!0,!1)}function rC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sC(t,e,n,r){if(e===null||typeof e>"u"||rC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var ap=/[\-:]([a-z])/g;function lp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ap,lp);wt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ap,lp);wt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ap,lp);wt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function up(t,e,n,r){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sC(e,n,s,r)&&(n=null),r||s===null?nC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sr=eC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),bi=Symbol.for("react.portal"),Pi=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),w_=Symbol.for("react.context"),hp=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),bd=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),E_=Symbol.for("react.offscreen"),ny=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Oh;function Yo(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Lh=!1;function Vh(t,e){if(!t||Lh)return"";Lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Lh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function iC(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Vh(t.type,!1),t;case 11:return t=Vh(t.type.render,!1),t;case 1:return t=Vh(t.type,!0),t;default:return""}}function Pd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pi:return"Fragment";case bi:return"Portal";case Ad:return"Profiler";case cp:return"StrictMode";case Rd:return"Suspense";case bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w_:return(t.displayName||"Context")+".Consumer";case __:return(t._context.displayName||"Context")+".Provider";case hp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:Pd(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Pd(t(e))}catch{}}return null}function oC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pd(e);case 8:return e===cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aC(t){var e=T_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dl(t){t._valueTracker||(t._valueTracker=aC(t))}function x_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=T_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nd(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ry(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S_(t,e){e=e.checked,e!=null&&up(t,"checked",e,!1)}function Dd(t,e){S_(t,e);var n=ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Od(t,e.type,n):e.hasOwnProperty("defaultValue")&&Od(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Od(t,e,n){(e!=="number"||bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function $i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ds(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Xo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ds(n)}}function C_(t,e){var n=ds(e.value),r=ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ol,k_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ol=Ol||document.createElement("div"),Ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lC=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(t){lC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sa[e]=sa[t]})});function A_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sa.hasOwnProperty(t)&&sa[t]?(""+e).trim():e+"px"}function R_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Md(t,e){if(e){if(uC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function jd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function fp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,Hi=null,Wi=null;function ay(t){if(t=Ja(t)){if(typeof Ud!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ic(e),Ud(t.stateNode,t.type,e))}}function b_(t){Hi?Wi?Wi.push(t):Wi=[t]:Hi=t}function P_(){if(Hi){var t=Hi,e=Wi;if(Wi=Hi=null,ay(t),e)for(t=0;t<e.length;t++)ay(e[t])}}function N_(t,e){return t(e)}function D_(){}var Mh=!1;function O_(t,e,n){if(Mh)return t(e,n);Mh=!0;try{return N_(t,e,n)}finally{Mh=!1,(Hi!==null||Wi!==null)&&(D_(),P_())}}function xa(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var zd=!1;if(fr)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){zd=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{zd=!1}function cC(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ia=!1,Pu=null,Nu=!1,Bd=null,hC={onError:function(t){ia=!0,Pu=t}};function dC(t,e,n,r,s,i,o,a,u){ia=!1,Pu=null,cC.apply(hC,arguments)}function fC(t,e,n,r,s,i,o,a,u){if(dC.apply(this,arguments),ia){if(ia){var c=Pu;ia=!1,Pu=null}else throw Error(z(198));Nu||(Nu=!0,Bd=c)}}function fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ly(t){if(fi(t)!==t)throw Error(z(188))}function pC(t){var e=t.alternate;if(!e){if(e=fi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ly(s),t;if(i===r)return ly(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function V_(t){return t=pC(t),t!==null?M_(t):null}function M_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M_(t);if(e!==null)return e;t=t.sibling}return null}var j_=rn.unstable_scheduleCallback,uy=rn.unstable_cancelCallback,mC=rn.unstable_shouldYield,gC=rn.unstable_requestPaint,Xe=rn.unstable_now,yC=rn.unstable_getCurrentPriorityLevel,pp=rn.unstable_ImmediatePriority,F_=rn.unstable_UserBlockingPriority,Du=rn.unstable_NormalPriority,vC=rn.unstable_LowPriority,U_=rn.unstable_IdlePriority,Tc=null,$n=null;function _C(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Tc,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:TC,wC=Math.log,EC=Math.LN2;function TC(t){return t>>>=0,t===0?32:31-(wC(t)/EC|0)|0}var Ll=64,Vl=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Qo(a):(i&=o,i!==0&&(r=Qo(i)))}else o=n&~s,o!==0?r=Qo(o):i!==0&&(r=Qo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-An(e),s=1<<n,r|=t[n],e&=~s;return r}function xC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-An(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=xC(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function $d(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z_(){var t=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),t}function jh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=n}function CC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-An(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-An(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function B_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $_,gp,H_,W_,q_,Hd=!1,Ml=[],Qr=null,Jr=null,Zr=null,Sa=new Map,Ca=new Map,zr=[],IC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cy(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function Uo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ja(e),e!==null&&gp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kC(t,e,n,r,s){switch(e){case"focusin":return Qr=Uo(Qr,t,e,n,r,s),!0;case"dragenter":return Jr=Uo(Jr,t,e,n,r,s),!0;case"mouseover":return Zr=Uo(Zr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sa.set(i,Uo(Sa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ca.set(i,Uo(Ca.get(i)||null,t,e,n,r,s)),!0}return!1}function G_(t){var e=Ws(t.target);if(e!==null){var n=fi(e);if(n!==null){if(e=n.tag,e===13){if(e=L_(n),e!==null){t.blockedOn=e,q_(t.priority,function(){H_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=Ja(n),e!==null&&gp(e),t.blockedOn=n,!1;e.shift()}return!0}function hy(t,e,n){lu(t)&&n.delete(e)}function AC(){Hd=!1,Qr!==null&&lu(Qr)&&(Qr=null),Jr!==null&&lu(Jr)&&(Jr=null),Zr!==null&&lu(Zr)&&(Zr=null),Sa.forEach(hy),Ca.forEach(hy)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Hd||(Hd=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,AC)))}function Ia(t){function e(s){return zo(s,t)}if(0<Ml.length){zo(Ml[0],t);for(var n=1;n<Ml.length;n++){var r=Ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qr!==null&&zo(Qr,t),Jr!==null&&zo(Jr,t),Zr!==null&&zo(Zr,t),Sa.forEach(e),Ca.forEach(e),n=0;n<zr.length;n++)r=zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)G_(n),n.blockedOn===null&&zr.shift()}var qi=Sr.ReactCurrentBatchConfig,Lu=!0;function RC(t,e,n,r){var s=_e,i=qi.transition;qi.transition=null;try{_e=1,yp(t,e,n,r)}finally{_e=s,qi.transition=i}}function bC(t,e,n,r){var s=_e,i=qi.transition;qi.transition=null;try{_e=4,yp(t,e,n,r)}finally{_e=s,qi.transition=i}}function yp(t,e,n,r){if(Lu){var s=Wd(t,e,n,r);if(s===null)Kh(t,e,r,Vu,n),cy(t,r);else if(kC(s,t,e,n,r))r.stopPropagation();else if(cy(t,r),e&4&&-1<IC.indexOf(t)){for(;s!==null;){var i=Ja(s);if(i!==null&&$_(i),i=Wd(t,e,n,r),i===null&&Kh(t,e,r,Vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kh(t,e,r,null,n)}}var Vu=null;function Wd(t,e,n,r){if(Vu=null,t=fp(r),t=Ws(t),t!==null)if(e=fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vu=t,null}function K_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yC()){case pp:return 1;case F_:return 4;case Du:case vC:return 16;case U_:return 536870912;default:return 16}default:return 16}}var Kr=null,vp=null,uu=null;function Y_(){if(uu)return uu;var t,e=vp,n=e.length,r,s="value"in Kr?Kr.value:Kr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uu=s.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function dy(){return!1}function on(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:dy,this.isPropagationStopped=dy,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_p=on(po),Qa=Fe({},po,{view:0,detail:0}),PC=on(Qa),Fh,Uh,Bo,xc=Fe({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(Fh=t.screenX-Bo.screenX,Uh=t.screenY-Bo.screenY):Uh=Fh=0,Bo=t),Fh)},movementY:function(t){return"movementY"in t?t.movementY:Uh}}),fy=on(xc),NC=Fe({},xc,{dataTransfer:0}),DC=on(NC),OC=Fe({},Qa,{relatedTarget:0}),zh=on(OC),LC=Fe({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),VC=on(LC),MC=Fe({},po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jC=on(MC),FC=Fe({},po,{data:0}),py=on(FC),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $C(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BC[t])?!!e[t]:!1}function wp(){return $C}var HC=Fe({},Qa,{key:function(t){if(t.key){var e=UC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wp,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WC=on(HC),qC=Fe({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),my=on(qC),GC=Fe({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wp}),KC=on(GC),YC=Fe({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),XC=on(YC),QC=Fe({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JC=on(QC),ZC=[9,13,27,32],Ep=fr&&"CompositionEvent"in window,oa=null;fr&&"documentMode"in document&&(oa=document.documentMode);var eI=fr&&"TextEvent"in window&&!oa,X_=fr&&(!Ep||oa&&8<oa&&11>=oa),gy=" ",yy=!1;function Q_(t,e){switch(t){case"keyup":return ZC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function tI(t,e){switch(t){case"compositionend":return J_(e);case"keypress":return e.which!==32?null:(yy=!0,gy);case"textInput":return t=e.data,t===gy&&yy?null:t;default:return null}}function nI(t,e){if(Ni)return t==="compositionend"||!Ep&&Q_(t,e)?(t=Y_(),uu=vp=Kr=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X_&&e.locale!=="ko"?null:e.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rI[t.type]:e==="textarea"}function Z_(t,e,n,r){b_(r),e=Mu(e,"onChange"),0<e.length&&(n=new _p("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var aa=null,ka=null;function sI(t){cw(t,0)}function Sc(t){var e=Li(t);if(x_(e))return t}function iI(t,e){if(t==="change")return e}var ew=!1;if(fr){var Bh;if(fr){var $h="oninput"in document;if(!$h){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),$h=typeof _y.oninput=="function"}Bh=$h}else Bh=!1;ew=Bh&&(!document.documentMode||9<document.documentMode)}function wy(){aa&&(aa.detachEvent("onpropertychange",tw),ka=aa=null)}function tw(t){if(t.propertyName==="value"&&Sc(ka)){var e=[];Z_(e,ka,t,fp(t)),O_(sI,e)}}function oI(t,e,n){t==="focusin"?(wy(),aa=e,ka=n,aa.attachEvent("onpropertychange",tw)):t==="focusout"&&wy()}function aI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(ka)}function lI(t,e){if(t==="click")return Sc(e)}function uI(t,e){if(t==="input"||t==="change")return Sc(e)}function cI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:cI;function Aa(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kd.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function Ey(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ty(t,e){var n=Ey(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ey(n)}}function nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rw(){for(var t=window,e=bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bu(t.document)}return e}function Tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hI(t){var e=rw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nw(n.ownerDocument.documentElement,n)){if(r!==null&&Tp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ty(n,i);var o=Ty(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dI=fr&&"documentMode"in document&&11>=document.documentMode,Di=null,qd=null,la=null,Gd=!1;function xy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gd||Di==null||Di!==bu(r)||(r=Di,"selectionStart"in r&&Tp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),la&&Aa(la,r)||(la=r,r=Mu(qd,"onSelect"),0<r.length&&(e=new _p("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Di)))}function Fl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Fl("Animation","AnimationEnd"),animationiteration:Fl("Animation","AnimationIteration"),animationstart:Fl("Animation","AnimationStart"),transitionend:Fl("Transition","TransitionEnd")},Hh={},sw={};fr&&(sw=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Cc(t){if(Hh[t])return Hh[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sw)return Hh[t]=e[n];return t}var iw=Cc("animationend"),ow=Cc("animationiteration"),aw=Cc("animationstart"),lw=Cc("transitionend"),uw=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,e){uw.set(t,e),di(e,[t])}for(var Wh=0;Wh<Sy.length;Wh++){var qh=Sy[Wh],fI=qh.toLowerCase(),pI=qh[0].toUpperCase()+qh.slice(1);xs(fI,"on"+pI)}xs(iw,"onAnimationEnd");xs(ow,"onAnimationIteration");xs(aw,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(lw,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fC(r,e,void 0,t),t.currentTarget=null}function cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Cy(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Cy(s,a,c),i=u}}}if(Nu)throw t=Bd,Nu=!1,Bd=null,t}function Ae(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var r=t+"__bubble";n.has(r)||(hw(e,t,2,!1),n.add(r))}function Gh(t,e,n){var r=0;e&&(r|=4),hw(n,t,r,e)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Ra(t){if(!t[Ul]){t[Ul]=!0,v_.forEach(function(n){n!=="selectionchange"&&(mI.has(n)||Gh(n,!1,t),Gh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ul]||(e[Ul]=!0,Gh("selectionchange",!1,e))}}function hw(t,e,n,r){switch(K_(e)){case 1:var s=RC;break;case 4:s=bC;break;default:s=yp}n=s.bind(null,e,n,t),s=void 0,!zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ws(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}O_(function(){var c=i,h=fp(n),f=[];e:{var m=uw.get(t);if(m!==void 0){var y=_p,S=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":y=WC;break;case"focusin":S="focus",y=zh;break;case"focusout":S="blur",y=zh;break;case"beforeblur":case"afterblur":y=zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=DC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=KC;break;case iw:case ow:case aw:y=VC;break;case lw:y=XC;break;case"scroll":y=PC;break;case"wheel":y=JC;break;case"copy":case"cut":case"paste":y=jC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=my}var E=(e&4)!==0,I=!E&&t==="scroll",_=E?m!==null?m+"Capture":null:m;E=[];for(var v=c,x;v!==null;){x=v;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,_!==null&&(D=xa(v,_),D!=null&&E.push(ba(v,D,x)))),I)break;v=v.return}0<E.length&&(m=new y(m,S,null,n,h),f.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Fd&&(S=n.relatedTarget||n.fromElement)&&(Ws(S)||S[pr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=c,S=S?Ws(S):null,S!==null&&(I=fi(S),S!==I||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=c),y!==S)){if(E=fy,D="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=my,D="onPointerLeave",_="onPointerEnter",v="pointer"),I=y==null?m:Li(y),x=S==null?m:Li(S),m=new E(D,v+"leave",y,n,h),m.target=I,m.relatedTarget=x,D=null,Ws(h)===c&&(E=new E(_,v+"enter",S,n,h),E.target=x,E.relatedTarget=I,D=E),I=D,y&&S)t:{for(E=y,_=S,v=0,x=E;x;x=Ci(x))v++;for(x=0,D=_;D;D=Ci(D))x++;for(;0<v-x;)E=Ci(E),v--;for(;0<x-v;)_=Ci(_),x--;for(;v--;){if(E===_||_!==null&&E===_.alternate)break t;E=Ci(E),_=Ci(_)}E=null}else E=null;y!==null&&Iy(f,m,y,E,!1),S!==null&&I!==null&&Iy(f,I,S,E,!0)}}e:{if(m=c?Li(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var V=iI;else if(vy(m))if(ew)V=uI;else{V=aI;var U=oI}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=lI);if(V&&(V=V(t,c))){Z_(f,V,n,h);break e}U&&U(t,m,c),t==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&Od(m,"number",m.value)}switch(U=c?Li(c):window,t){case"focusin":(vy(U)||U.contentEditable==="true")&&(Di=U,qd=c,la=null);break;case"focusout":la=qd=Di=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,xy(f,n,h);break;case"selectionchange":if(dI)break;case"keydown":case"keyup":xy(f,n,h)}var k;if(Ep)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ni?Q_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(X_&&n.locale!=="ko"&&(Ni||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ni&&(k=Y_()):(Kr=h,vp="value"in Kr?Kr.value:Kr.textContent,Ni=!0)),U=Mu(c,w),0<U.length&&(w=new py(w,t,null,n,h),f.push({event:w,listeners:U}),k?w.data=k:(k=J_(n),k!==null&&(w.data=k)))),(k=eI?tI(t,n):nI(t,n))&&(c=Mu(c,"onBeforeInput"),0<c.length&&(h=new py("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=k))}cw(f,e)})}function ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xa(t,n),i!=null&&r.unshift(ba(t,i,s)),i=xa(t,e),i!=null&&r.push(ba(t,i,s))),t=t.return}return r}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=xa(n,i),u!=null&&o.unshift(ba(n,u,a))):s||(u=xa(n,i),u!=null&&o.push(ba(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(gI,`
`).replace(yI,"")}function zl(t,e,n){if(e=ky(e),ky(t)!==e&&n)throw Error(z(425))}function ju(){}var Kd=null,Yd=null;function Xd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,Ay=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof Ay<"u"?function(t){return Ay.resolve(null).then(t).catch(wI)}:Qd;function wI(t){setTimeout(function(){throw t})}function Yh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ia(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ry(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mo=Math.random().toString(36).slice(2),zn="__reactFiber$"+mo,Pa="__reactProps$"+mo,pr="__reactContainer$"+mo,Jd="__reactEvents$"+mo,EI="__reactListeners$"+mo,TI="__reactHandles$"+mo;function Ws(t){var e=t[zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ry(t);t!==null;){if(n=t[zn])return n;t=Ry(t)}return e}t=n,n=t.parentNode}return null}function Ja(t){return t=t[zn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ic(t){return t[Pa]||null}var Zd=[],Vi=-1;function Ss(t){return{current:t}}function be(t){0>Vi||(t.current=Zd[Vi],Zd[Vi]=null,Vi--)}function Ce(t,e){Vi++,Zd[Vi]=t.current,t.current=e}var fs={},Dt=Ss(fs),qt=Ss(!1),ti=fs;function eo(t,e){var n=t.type.contextTypes;if(!n)return fs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function Fu(){be(qt),be(Dt)}function by(t,e,n){if(Dt.current!==fs)throw Error(z(168));Ce(Dt,e),Ce(qt,n)}function dw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,oC(t)||"Unknown",s));return Fe({},n,r)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,ti=Dt.current,Ce(Dt,t),Ce(qt,qt.current),!0}function Py(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=dw(t,e,ti),r.__reactInternalMemoizedMergedChildContext=t,be(qt),be(Dt),Ce(Dt,t)):be(qt),Ce(qt,n)}var ir=null,kc=!1,Xh=!1;function fw(t){ir===null?ir=[t]:ir.push(t)}function xI(t){kc=!0,fw(t)}function Cs(){if(!Xh&&ir!==null){Xh=!0;var t=0,e=_e;try{var n=ir;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ir=null,kc=!1}catch(s){throw ir!==null&&(ir=ir.slice(t+1)),j_(pp,Cs),s}finally{_e=e,Xh=!1}}return null}var Mi=[],ji=0,zu=null,Bu=0,cn=[],hn=0,ni=null,or=1,ar="";function Bs(t,e){Mi[ji++]=Bu,Mi[ji++]=zu,zu=t,Bu=e}function pw(t,e,n){cn[hn++]=or,cn[hn++]=ar,cn[hn++]=ni,ni=t;var r=or;t=ar;var s=32-An(r)-1;r&=~(1<<s),n+=1;var i=32-An(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,or=1<<32-An(e)+s|n<<s|r,ar=i+t}else or=1<<i|n<<s|r,ar=t}function xp(t){t.return!==null&&(Bs(t,1),pw(t,1,0))}function Sp(t){for(;t===zu;)zu=Mi[--ji],Mi[ji]=null,Bu=Mi[--ji],Mi[ji]=null;for(;t===ni;)ni=cn[--hn],cn[hn]=null,ar=cn[--hn],cn[hn]=null,or=cn[--hn],cn[hn]=null}var nn=null,Zt=null,Oe=!1,Cn=null;function mw(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ny(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,Zt=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ni!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,Zt=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(Oe){var e=Zt;if(e){var n=e;if(!Ny(t,e)){if(ef(t))throw Error(z(418));e=es(n.nextSibling);var r=nn;e&&Ny(t,e)?mw(r,n):(t.flags=t.flags&-4097|2,Oe=!1,nn=t)}}else{if(ef(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,nn=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Bl(t){if(t!==nn)return!1;if(!Oe)return Dy(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xd(t.type,t.memoizedProps)),e&&(e=Zt)){if(ef(t))throw gw(),Error(z(418));for(;e;)mw(t,e),e=es(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=nn?es(t.stateNode.nextSibling):null;return!0}function gw(){for(var t=Zt;t;)t=es(t.nextSibling)}function to(){Zt=nn=null,Oe=!1}function Cp(t){Cn===null?Cn=[t]:Cn.push(t)}var SI=Sr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function $l(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Oy(t){var e=t._init;return e(t._payload)}function yw(t){function e(_,v){if(t){var x=_.deletions;x===null?(_.deletions=[v],_.flags|=16):x.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function s(_,v){return _=ss(_,v),_.index=0,_.sibling=null,_}function i(_,v,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<v?(_.flags|=2,v):x):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,x,D){return v===null||v.tag!==6?(v=rd(x,_.mode,D),v.return=_,v):(v=s(v,x),v.return=_,v)}function u(_,v,x,D){var V=x.type;return V===Pi?h(_,v,x.props.children,D,x.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Fr&&Oy(V)===v.type)?(D=s(v,x.props),D.ref=$o(_,v,x),D.return=_,D):(D=yu(x.type,x.key,x.props,null,_.mode,D),D.ref=$o(_,v,x),D.return=_,D)}function c(_,v,x,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=sd(x,_.mode,D),v.return=_,v):(v=s(v,x.children||[]),v.return=_,v)}function h(_,v,x,D,V){return v===null||v.tag!==7?(v=Xs(x,_.mode,D,V),v.return=_,v):(v=s(v,x),v.return=_,v)}function f(_,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=rd(""+v,_.mode,x),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nl:return x=yu(v.type,v.key,v.props,null,_.mode,x),x.ref=$o(_,null,v),x.return=_,x;case bi:return v=sd(v,_.mode,x),v.return=_,v;case Fr:var D=v._init;return f(_,D(v._payload),x)}if(Xo(v)||jo(v))return v=Xs(v,_.mode,x,null),v.return=_,v;$l(_,v)}return null}function m(_,v,x,D){var V=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:a(_,v,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:return x.key===V?u(_,v,x,D):null;case bi:return x.key===V?c(_,v,x,D):null;case Fr:return V=x._init,m(_,v,V(x._payload),D)}if(Xo(x)||jo(x))return V!==null?null:h(_,v,x,D,null);$l(_,x)}return null}function y(_,v,x,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(x)||null,a(v,_,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nl:return _=_.get(D.key===null?x:D.key)||null,u(v,_,D,V);case bi:return _=_.get(D.key===null?x:D.key)||null,c(v,_,D,V);case Fr:var U=D._init;return y(_,v,x,U(D._payload),V)}if(Xo(D)||jo(D))return _=_.get(x)||null,h(v,_,D,V,null);$l(v,D)}return null}function S(_,v,x,D){for(var V=null,U=null,k=v,w=v=0,C=null;k!==null&&w<x.length;w++){k.index>w?(C=k,k=null):C=k.sibling;var R=m(_,k,x[w],D);if(R===null){k===null&&(k=C);break}t&&k&&R.alternate===null&&e(_,k),v=i(R,v,w),U===null?V=R:U.sibling=R,U=R,k=C}if(w===x.length)return n(_,k),Oe&&Bs(_,w),V;if(k===null){for(;w<x.length;w++)k=f(_,x[w],D),k!==null&&(v=i(k,v,w),U===null?V=k:U.sibling=k,U=k);return Oe&&Bs(_,w),V}for(k=r(_,k);w<x.length;w++)C=y(k,_,w,x[w],D),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),v=i(C,v,w),U===null?V=C:U.sibling=C,U=C);return t&&k.forEach(function(P){return e(_,P)}),Oe&&Bs(_,w),V}function E(_,v,x,D){var V=jo(x);if(typeof V!="function")throw Error(z(150));if(x=V.call(x),x==null)throw Error(z(151));for(var U=V=null,k=v,w=v=0,C=null,R=x.next();k!==null&&!R.done;w++,R=x.next()){k.index>w?(C=k,k=null):C=k.sibling;var P=m(_,k,R.value,D);if(P===null){k===null&&(k=C);break}t&&k&&P.alternate===null&&e(_,k),v=i(P,v,w),U===null?V=P:U.sibling=P,U=P,k=C}if(R.done)return n(_,k),Oe&&Bs(_,w),V;if(k===null){for(;!R.done;w++,R=x.next())R=f(_,R.value,D),R!==null&&(v=i(R,v,w),U===null?V=R:U.sibling=R,U=R);return Oe&&Bs(_,w),V}for(k=r(_,k);!R.done;w++,R=x.next())R=y(k,_,w,R.value,D),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?w:R.key),v=i(R,v,w),U===null?V=R:U.sibling=R,U=R);return t&&k.forEach(function(N){return e(_,N)}),Oe&&Bs(_,w),V}function I(_,v,x,D){if(typeof x=="object"&&x!==null&&x.type===Pi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:e:{for(var V=x.key,U=v;U!==null;){if(U.key===V){if(V=x.type,V===Pi){if(U.tag===7){n(_,U.sibling),v=s(U,x.props.children),v.return=_,_=v;break e}}else if(U.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Fr&&Oy(V)===U.type){n(_,U.sibling),v=s(U,x.props),v.ref=$o(_,U,x),v.return=_,_=v;break e}n(_,U);break}else e(_,U);U=U.sibling}x.type===Pi?(v=Xs(x.props.children,_.mode,D,x.key),v.return=_,_=v):(D=yu(x.type,x.key,x.props,null,_.mode,D),D.ref=$o(_,v,x),D.return=_,_=D)}return o(_);case bi:e:{for(U=x.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(_,v.sibling),v=s(v,x.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=sd(x,_.mode,D),v.return=_,_=v}return o(_);case Fr:return U=x._init,I(_,v,U(x._payload),D)}if(Xo(x))return S(_,v,x,D);if(jo(x))return E(_,v,x,D);$l(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(_,v.sibling),v=s(v,x),v.return=_,_=v):(n(_,v),v=rd(x,_.mode,D),v.return=_,_=v),o(_)):n(_,v)}return I}var no=yw(!0),vw=yw(!1),$u=Ss(null),Hu=null,Fi=null,Ip=null;function kp(){Ip=Fi=Hu=null}function Ap(t){var e=$u.current;be($u),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){Hu=t,Ip=Fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Ip!==t)if(t={context:t,memoizedValue:e,next:null},Fi===null){if(Hu===null)throw Error(z(308));Fi=t,Hu.dependencies={lanes:0,firstContext:t}}else Fi=Fi.next=t;return e}var qs=null;function Rp(t){qs===null?qs=[t]:qs.push(t)}function _w(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Rp(e)):(n.next=s.next,s.next=n),e.interleaved=n,mr(t,r)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ww(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,mr(t,n)}return s=r.interleaved,s===null?(e.next=e,Rp(r)):(e.next=s.next,s.next=e),r.interleaved=e,mr(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mp(t,n)}}function Ly(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wu(t,e,n,r){var s=t.updateQueue;Ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,h=c=u=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,E=a;switch(m=e,y=n,E.tag){case 1:if(S=E.payload,typeof S=="function"){f=S.call(y,f,m);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=E.payload,m=typeof S=="function"?S.call(y,f,m):S,m==null)break e;f=Fe({},f,m);break e;case 2:Ur=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);si|=o,t.lanes=o,t.memoizedState=f}}function Vy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Za={},Hn=Ss(Za),Na=Ss(Za),Da=Ss(Za);function Gs(t){if(t===Za)throw Error(z(174));return t}function Pp(t,e){switch(Ce(Da,e),Ce(Na,t),Ce(Hn,Za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}be(Hn),Ce(Hn,e)}function ro(){be(Hn),be(Na),be(Da)}function Ew(t){Gs(Da.current);var e=Gs(Hn.current),n=Vd(e,t.type);e!==n&&(Ce(Na,t),Ce(Hn,n))}function Np(t){Na.current===t&&(be(Hn),be(Na))}var Ve=Ss(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qh=[];function Dp(){for(var t=0;t<Qh.length;t++)Qh[t]._workInProgressVersionPrimary=null;Qh.length=0}var du=Sr.ReactCurrentDispatcher,Jh=Sr.ReactCurrentBatchConfig,ri=0,Me=null,it=null,ft=null,Gu=!1,ua=!1,Oa=0,CI=0;function kt(){throw Error(z(321))}function Op(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Lp(t,e,n,r,s,i){if(ri=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?RI:bI,t=n(r,s),ua){i=0;do{if(ua=!1,Oa=0,25<=i)throw Error(z(301));i+=1,ft=it=null,e.updateQueue=null,du.current=PI,t=n(r,s)}while(ua)}if(du.current=Ku,e=it!==null&&it.next!==null,ri=0,ft=it=Me=null,Gu=!1,e)throw Error(z(300));return t}function Vp(){var t=Oa!==0;return Oa=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Me.memoizedState=ft=t:ft=ft.next=t,ft}function wn(){if(it===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ft===null?Me.memoizedState:ft.next;if(e!==null)ft=e,it=t;else{if(t===null)throw Error(z(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ft===null?Me.memoizedState=ft=t:ft=ft.next=t}return ft}function La(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=wn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((ri&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Me.lanes|=h,si|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,bn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,si|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ed(t){var e=wn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);bn(i,e.memoizedState)||(Wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Tw(){}function xw(t,e){var n=Me,r=wn(),s=e(),i=!bn(r.memoizedState,s);if(i&&(r.memoizedState=s,Wt=!0),r=r.queue,Mp(Iw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Va(9,Cw.bind(null,n,r,s,e),void 0,null),pt===null)throw Error(z(349));ri&30||Sw(n,e,s)}return s}function Sw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cw(t,e,n,r){e.value=n,e.getSnapshot=r,kw(e)&&Aw(t)}function Iw(t,e,n){return n(function(){kw(e)&&Aw(t)})}function kw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function Aw(t){var e=mr(t,1);e!==null&&Rn(e,t,1,-1)}function My(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=AI.bind(null,Me,t),[e.memoizedState,t]}function Va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rw(){return wn().memoizedState}function fu(t,e,n,r){var s=Fn();Me.flags|=t,s.memoizedState=Va(1|e,n,void 0,r===void 0?null:r)}function Ac(t,e,n,r){var s=wn();r=r===void 0?null:r;var i=void 0;if(it!==null){var o=it.memoizedState;if(i=o.destroy,r!==null&&Op(r,o.deps)){s.memoizedState=Va(e,n,i,r);return}}Me.flags|=t,s.memoizedState=Va(1|e,n,i,r)}function jy(t,e){return fu(8390656,8,t,e)}function Mp(t,e){return Ac(2048,8,t,e)}function bw(t,e){return Ac(4,2,t,e)}function Pw(t,e){return Ac(4,4,t,e)}function Nw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dw(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4,4,Nw.bind(null,e,t),n)}function jp(){}function Ow(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Op(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lw(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Op(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vw(t,e,n){return ri&21?(bn(n,e)||(n=z_(),Me.lanes|=n,si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function II(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Jh.transition;Jh.transition={};try{t(!1),e()}finally{_e=n,Jh.transition=r}}function Mw(){return wn().memoizedState}function kI(t,e,n){var r=rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jw(t))Fw(e,n);else if(n=_w(t,e,n,r),n!==null){var s=jt();Rn(n,t,r,s),Uw(n,e,r)}}function AI(t,e,n){var r=rs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jw(t))Fw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,bn(a,o)){var u=e.interleaved;u===null?(s.next=s,Rp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=_w(t,e,s,r),n!==null&&(s=jt(),Rn(n,t,r,s),Uw(n,e,r))}}function jw(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Fw(t,e){ua=Gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mp(t,n)}}var Ku={readContext:_n,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},RI={readContext:_n,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,Nw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kI.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:My,useDebugValue:jp,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=My(!1),e=t[0];return t=II.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Fn();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),pt===null)throw Error(z(349));ri&30||Sw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,jy(Iw.bind(null,r,i,t),[t]),r.flags|=2048,Va(9,Cw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fn(),e=pt.identifierPrefix;if(Oe){var n=ar,r=or;n=(r&~(1<<32-An(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bI={readContext:_n,useCallback:Ow,useContext:_n,useEffect:Mp,useImperativeHandle:Dw,useInsertionEffect:bw,useLayoutEffect:Pw,useMemo:Lw,useReducer:Zh,useRef:Rw,useState:function(){return Zh(La)},useDebugValue:jp,useDeferredValue:function(t){var e=wn();return Vw(e,it.memoizedState,t)},useTransition:function(){var t=Zh(La)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:xw,useId:Mw,unstable_isNewReconciler:!1},PI={readContext:_n,useCallback:Ow,useContext:_n,useEffect:Mp,useImperativeHandle:Dw,useInsertionEffect:bw,useLayoutEffect:Pw,useMemo:Lw,useReducer:ed,useRef:Rw,useState:function(){return ed(La)},useDebugValue:jp,useDeferredValue:function(t){var e=wn();return it===null?e.memoizedState=t:Vw(e,it.memoizedState,t)},useTransition:function(){var t=ed(La)[0],e=wn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:xw,useId:Mw,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rc={isMounted:function(t){return(t=t._reactInternals)?fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),s=rs(t),i=cr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ts(t,i,s),e!==null&&(Rn(e,t,s,r),hu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),s=rs(t),i=cr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ts(t,i,s),e!==null&&(Rn(e,t,s,r),hu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=rs(t),s=cr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ts(t,s,r),e!==null&&(Rn(e,t,r,n),hu(e,t,r))}};function Fy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(s,i):!0}function zw(t,e,n){var r=!1,s=fs,i=e.contextType;return typeof i=="object"&&i!==null?i=_n(i):(s=Gt(e)?ti:Dt.current,r=e.contextTypes,i=(r=r!=null)?eo(t,s):fs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Uy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rc.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_n(i):(i=Gt(e)?ti:Dt.current,s.context=eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rc.enqueueReplaceState(s,s.state,null),Wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=iC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NI=typeof WeakMap=="function"?WeakMap:Map;function Bw(t,e,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,gf=r),of(t,e)},n}function $w(t,e,n){n=cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){of(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function By(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $y(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cr(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var DI=Sr.ReactCurrentOwner,Wt=!1;function Mt(t,e,n,r){e.child=t===null?vw(e,null,n,r):no(e,t.child,n,r)}function Hy(t,e,n,r,s){n=n.render;var i=e.ref;return Gi(e,s),r=Lp(t,e,n,r,i,s),n=Vp(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Oe&&n&&xp(e),e.flags|=1,Mt(t,e,r,s),e.child)}function Wy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hw(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return gr(t,e,s)}return e.flags|=1,t=ss(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Aa(i,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,gr(t,e,s)}return af(t,e,n,r,s)}function Ww(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(zi,Jt),Jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(zi,Jt),Jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(zi,Jt),Jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(zi,Jt),Jt|=r;return Mt(t,e,s,n),e.child}function qw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,r,s){var i=Gt(n)?ti:Dt.current;return i=eo(e,i),Gi(e,s),n=Lp(t,e,n,r,i,s),r=Vp(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Oe&&r&&xp(e),e.flags|=1,Mt(t,e,n,s),e.child)}function qy(t,e,n,r,s){if(Gt(n)){var i=!0;Uu(e)}else i=!1;if(Gi(e,s),e.stateNode===null)pu(t,e),zw(e,n,r),sf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Gt(n)?ti:Dt.current,c=eo(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Uy(e,o,r,c),Ur=!1;var m=e.memoizedState;o.state=m,Wu(e,r,o,s),u=e.memoizedState,a!==r||m!==u||qt.current||Ur?(typeof h=="function"&&(rf(e,n,h,r),u=e.memoizedState),(a=Ur||Fy(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ww(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=Gt(n)?ti:Dt.current,u=eo(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Uy(e,o,r,u),Ur=!1,m=e.memoizedState,o.state=m,Wu(e,r,o,s);var S=e.memoizedState;a!==f||m!==S||qt.current||Ur?(typeof y=="function"&&(rf(e,n,y,r),S=e.memoizedState),(c=Ur||Fy(e,n,c,r,m,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return lf(t,e,n,r,i,s)}function lf(t,e,n,r,s,i){qw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Py(e,n,!1),gr(t,e,i);r=e.stateNode,DI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,i),e.child=no(e,null,a,i)):Mt(t,e,a,i),e.memoizedState=r.state,s&&Py(e,n,!0),e.child}function Gw(t){var e=t.stateNode;e.pendingContext?by(t,e.pendingContext,e.pendingContext!==e.context):e.context&&by(t,e.context,!1),Pp(t,e.containerInfo)}function Gy(t,e,n,r,s){return to(),Cp(s),e.flags|=256,Mt(t,e,n,r),e.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kw(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Ve,s&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nc(o,r,0,null),t=Xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cf(n),e.memoizedState=uf,t):Fp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return OI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ss(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ss(a,i):(i=Xs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=uf,r}return i=t.child,t=i.sibling,r=ss(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fp(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hl(t,e,n,r){return r!==null&&Cp(r),no(e,t.child,null,n),t=Fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=td(Error(z(422))),Hl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nc({mode:"visible",children:r.children},s,0,null),i=Xs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=cf(o),e.memoizedState=uf,i);if(!(e.mode&1))return Hl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=td(i,r,void 0),Hl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=pt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mr(t,s),Rn(r,t,s,-1))}return Wp(),r=td(Error(z(421))),Hl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=GI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zt=es(s.nextSibling),nn=e,Oe=!0,Cn=null,t!==null&&(cn[hn++]=or,cn[hn++]=ar,cn[hn++]=ni,or=t.id,ar=t.overflow,ni=e),e=Fp(e,r.children),e.flags|=4096,e)}function Ky(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nf(t.return,e,n)}function nd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ky(t,n,e);else if(t.tag===19)Ky(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nd(e,!0,n,null,i);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LI(t,e,n){switch(e.tag){case 3:Gw(e),to();break;case 5:Ew(e);break;case 1:Gt(e.type)&&Uu(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce($u,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?Kw(t,e,n):(Ce(Ve,Ve.current&1),t=gr(t,e,n),t!==null?t.sibling:null);Ce(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,Ww(t,e,n)}return gr(t,e,n)}var Xw,hf,Qw,Jw;Xw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hf=function(){};Qw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gs(Hn.current);var i=null;switch(n){case"input":s=Nd(t,s),r=Nd(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=Ld(t,s),r=Ld(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ju)}Md(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ea.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ae("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Jw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VI(t,e,n){var r=e.pendingProps;switch(Sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Gt(e.type)&&Fu(),At(e),null;case 3:return r=e.stateNode,ro(),be(qt),be(Dt),Dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cn!==null&&(_f(Cn),Cn=null))),hf(t,e),At(e),null;case 5:Np(e);var s=Gs(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)Qw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return At(e),null}if(t=Gs(Hn.current),Bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zn]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<Jo.length;s++)Ae(Jo[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":ry(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":iy(r,i),Ae("invalid",r)}Md(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&zl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&zl(r.textContent,a,t),s=["children",""+a]):Ea.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Dl(r),sy(r,i,!0);break;case"textarea":Dl(r),oy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ju)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zn]=e,t[Pa]=r,Xw(t,e,!1,!1),e.stateNode=t;e:{switch(o=jd(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jo.length;s++)Ae(Jo[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":ry(t,r),s=Nd(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":iy(t,r),s=Ld(t,r),Ae("invalid",t);break;default:s=r}Md(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?R_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&k_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ta(t,u):typeof u=="number"&&Ta(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ea.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&up(t,i,u,o))}switch(n){case"input":Dl(t),sy(t,r,!1);break;case"textarea":Dl(t),oy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ds(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$i(t,!!r.multiple,i,!1):r.defaultValue!=null&&$i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)Jw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Gs(Da.current),Gs(Hn.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[zn]=e,(i=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:zl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=e,e.stateNode=r}return At(e),null;case 13:if(be(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Zt!==null&&e.mode&1&&!(e.flags&128))gw(),to(),e.flags|=98560,i=!1;else if(i=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[zn]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Cn!==null&&(_f(Cn),Cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?ot===0&&(ot=3):Wp())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return ro(),hf(t,e),t===null&&Ra(e.stateNode.containerInfo),At(e),null;case 10:return Ap(e.type._context),At(e),null;case 17:return Gt(e.type)&&Fu(),At(e),null;case 19:if(be(Ve),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ho(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,Ho(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Xe()>io&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return At(e),null}else 2*Xe()-i.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Xe(),e.sibling=null,n=Ve.current,Ce(Ve,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Hp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function MI(t,e){switch(Sp(e),e.tag){case 1:return Gt(e.type)&&Fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),be(qt),be(Dt),Dp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Np(e),null;case 13:if(be(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ve),null;case 4:return ro(),null;case 10:return Ap(e.type._context),null;case 22:case 23:return Hp(),null;case 24:return null;default:return null}}var Wl=!1,Pt=!1,jI=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function df(t,e,n){try{n()}catch(r){Be(t,e,r)}}var Yy=!1;function FI(t,e){if(Kd=Lu,t=rw(),Tp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:t,selectionRange:n},Lu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var E=S.memoizedProps,I=S.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:xn(e.type,E),I);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Be(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return S=Yy,Yy=!1,S}function ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&df(e,n,i)}s=s.next}while(s!==r)}}function bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zw(t){var e=t.alternate;e!==null&&(t.alternate=null,Zw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zn],delete e[Pa],delete e[Jd],delete e[EI],delete e[TI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eE(t){return t.tag===5||t.tag===3||t.tag===4}function Xy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ju));else if(r!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var gt=null,Sn=!1;function Mr(t,e,n){for(n=n.child;n!==null;)tE(t,e,n),n=n.sibling}function tE(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Tc,n)}catch{}switch(n.tag){case 5:Pt||Ui(n,e);case 6:var r=gt,s=Sn;gt=null,Mr(t,e,n),gt=r,Sn=s,gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?Yh(t.parentNode,n):t.nodeType===1&&Yh(t,n),Ia(t)):Yh(gt,n.stateNode));break;case 4:r=gt,s=Sn,gt=n.stateNode.containerInfo,Sn=!0,Mr(t,e,n),gt=r,Sn=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&df(n,e,o),s=s.next}while(s!==r)}Mr(t,e,n);break;case 1:if(!Pt&&(Ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Mr(t,e,n);break;case 21:Mr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,Mr(t,e,n),Pt=r):Mr(t,e,n);break;default:Mr(t,e,n)}}function Qy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jI),e.forEach(function(r){var s=KI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Sn=!1;break e;case 3:gt=a.stateNode.containerInfo,Sn=!0;break e;case 4:gt=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(gt===null)throw Error(z(160));tE(i,o,s),gt=null,Sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nE(e,t),e=e.sibling}function nE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),jn(t),r&4){try{ca(3,t,t.return),bc(3,t)}catch(E){Be(t,t.return,E)}try{ca(5,t,t.return)}catch(E){Be(t,t.return,E)}}break;case 1:Tn(e,t),jn(t),r&512&&n!==null&&Ui(n,n.return);break;case 5:if(Tn(e,t),jn(t),r&512&&n!==null&&Ui(n,n.return),t.flags&32){var s=t.stateNode;try{Ta(s,"")}catch(E){Be(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&S_(s,i),jd(a,o);var c=jd(a,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?R_(s,f):h==="dangerouslySetInnerHTML"?k_(s,f):h==="children"?Ta(s,f):up(s,h,f,c)}switch(a){case"input":Dd(s,i);break;case"textarea":C_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?$i(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?$i(s,!!i.multiple,i.defaultValue,!0):$i(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(E){Be(t,t.return,E)}}break;case 6:if(Tn(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){Be(t,t.return,E)}}break;case 3:if(Tn(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ia(e.containerInfo)}catch(E){Be(t,t.return,E)}break;case 4:Tn(e,t),jn(t);break;case 13:Tn(e,t),jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bp=Xe())),r&4&&Qy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||h,Tn(e,t),Pt=c):Tn(e,t),jn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:ca(4,m,m.return);break;case 1:Ui(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(E){Be(r,n,E)}}break;case 5:Ui(m,m.return);break;case 22:if(m.memoizedState!==null){Zy(f);continue}}y!==null?(y.return=m,X=y):Zy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=A_("display",o))}catch(E){Be(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){Be(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tn(e,t),jn(t),r&4&&Qy(t);break;case 21:break;default:Tn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ta(s,""),r.flags&=-33);var i=Xy(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xy(t);pf(t,a,o);break;default:throw Error(z(161))}}catch(u){Be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UI(t,e,n){X=t,rE(t)}function rE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Pt;a=Wl;var c=Pt;if(Wl=o,(Pt=u)&&!c)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?ev(s):u!==null?(u.return=o,X=u):ev(s);for(;i!==null;)X=i,rE(i),i=i.sibling;X=s,Wl=a,Pt=c}Jy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Jy(t)}}function Jy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ia(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Pt||e.flags&512&&ff(e)}catch(m){Be(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Zy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function ev(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bc(4,e)}catch(u){Be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Be(e,s,u)}}var i=e.return;try{ff(e)}catch(u){Be(e,i,u)}break;case 5:var o=e.return;try{ff(e)}catch(u){Be(e,o,u)}}}catch(u){Be(e,e.return,u)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var zI=Math.ceil,Yu=Sr.ReactCurrentDispatcher,Up=Sr.ReactCurrentOwner,gn=Sr.ReactCurrentBatchConfig,ye=0,pt=null,tt=null,_t=0,Jt=0,zi=Ss(0),ot=0,Ma=null,si=0,Pc=0,zp=0,ha=null,$t=null,Bp=0,io=1/0,sr=null,Xu=!1,gf=null,ns=null,ql=!1,Yr=null,Qu=0,da=0,yf=null,mu=-1,gu=0;function jt(){return ye&6?Xe():mu!==-1?mu:mu=Xe()}function rs(t){return t.mode&1?ye&2&&_t!==0?_t&-_t:SI.transition!==null?(gu===0&&(gu=z_()),gu):(t=_e,t!==0||(t=window.event,t=t===void 0?16:K_(t.type)),t):1}function Rn(t,e,n,r){if(50<da)throw da=0,yf=null,Error(z(185));Xa(t,n,r),(!(ye&2)||t!==pt)&&(t===pt&&(!(ye&2)&&(Pc|=n),ot===4&&Br(t,_t)),Kt(t,r),n===1&&ye===0&&!(e.mode&1)&&(io=Xe()+500,kc&&Cs()))}function Kt(t,e){var n=t.callbackNode;SC(t,e);var r=Ou(t,t===pt?_t:0);if(r===0)n!==null&&uy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uy(n),e===1)t.tag===0?xI(tv.bind(null,t)):fw(tv.bind(null,t)),_I(function(){!(ye&6)&&Cs()}),n=null;else{switch(B_(r)){case 1:n=pp;break;case 4:n=F_;break;case 16:n=Du;break;case 536870912:n=U_;break;default:n=Du}n=hE(n,sE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sE(t,e){if(mu=-1,gu=0,ye&6)throw Error(z(327));var n=t.callbackNode;if(Ki()&&t.callbackNode!==n)return null;var r=Ou(t,t===pt?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=ye;ye|=2;var i=oE();(pt!==t||_t!==e)&&(sr=null,io=Xe()+500,Ys(t,e));do try{HI();break}catch(a){iE(t,a)}while(!0);kp(),Yu.current=i,ye=s,tt!==null?e=0:(pt=null,_t=0,e=ot)}if(e!==0){if(e===2&&(s=$d(t),s!==0&&(r=s,e=vf(t,s))),e===1)throw n=Ma,Ys(t,0),Br(t,r),Kt(t,Xe()),n;if(e===6)Br(t,r);else{if(s=t.current.alternate,!(r&30)&&!BI(s)&&(e=Ju(t,r),e===2&&(i=$d(t),i!==0&&(r=i,e=vf(t,i))),e===1))throw n=Ma,Ys(t,0),Br(t,r),Kt(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:$s(t,$t,sr);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=Bp+500-Xe(),10<e)){if(Ou(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qd($s.bind(null,t,$t,sr),e);break}$s(t,$t,sr);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-An(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zI(r/1960))-r,10<r){t.timeoutHandle=Qd($s.bind(null,t,$t,sr),r);break}$s(t,$t,sr);break;case 5:$s(t,$t,sr);break;default:throw Error(z(329))}}}return Kt(t,Xe()),t.callbackNode===n?sE.bind(null,t):null}function vf(t,e){var n=ha;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=$t,$t=n,e!==null&&_f(e)),t}function _f(t){$t===null?$t=t:$t.push.apply($t,t)}function BI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!bn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~zp,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-An(e),r=1<<n;t[n]=-1,e&=~r}}function tv(t){if(ye&6)throw Error(z(327));Ki();var e=Ou(t,0);if(!(e&1))return Kt(t,Xe()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=$d(t);r!==0&&(e=r,n=vf(t,r))}if(n===1)throw n=Ma,Ys(t,0),Br(t,e),Kt(t,Xe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,$t,sr),Kt(t,Xe()),null}function $p(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(io=Xe()+500,kc&&Cs())}}function ii(t){Yr!==null&&Yr.tag===0&&!(ye&6)&&Ki();var e=ye;ye|=1;var n=gn.transition,r=_e;try{if(gn.transition=null,_e=1,t)return t()}finally{_e=r,gn.transition=n,ye=e,!(ye&6)&&Cs()}}function Hp(){Jt=zi.current,be(zi)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vI(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fu();break;case 3:ro(),be(qt),be(Dt),Dp();break;case 5:Np(r);break;case 4:ro();break;case 13:be(Ve);break;case 19:be(Ve);break;case 10:Ap(r.type._context);break;case 22:case 23:Hp()}n=n.return}if(pt=t,tt=t=ss(t.current,null),_t=Jt=e,ot=0,Ma=null,zp=Pc=si=0,$t=ha=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qs=null}return t}function iE(t,e){do{var n=tt;try{if(kp(),du.current=Ku,Gu){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gu=!1}if(ri=0,ft=it=Me=null,ua=!1,Oa=0,Up.current=null,n===null||n.return===null){ot=1,Ma=e,tt=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=_t,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=By(o);if(y!==null){y.flags&=-257,$y(y,o,a,i,e),y.mode&1&&zy(i,c,e),e=y,u=c;var S=e.updateQueue;if(S===null){var E=new Set;E.add(u),e.updateQueue=E}else S.add(u);break e}else{if(!(e&1)){zy(i,c,e),Wp();break e}u=Error(z(426))}}else if(Oe&&a.mode&1){var I=By(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),$y(I,o,a,i,e),Cp(so(u,a));break e}}i=u=so(u,a),ot!==4&&(ot=2),ha===null?ha=[i]:ha.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Bw(i,u,e);Ly(i,_);break e;case 1:a=u;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ns===null||!ns.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=$w(i,a,e);Ly(i,D);break e}}i=i.return}while(i!==null)}lE(n)}catch(V){e=V,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function oE(){var t=Yu.current;return Yu.current=Ku,t===null?Ku:t}function Wp(){(ot===0||ot===3||ot===2)&&(ot=4),pt===null||!(si&268435455)&&!(Pc&268435455)||Br(pt,_t)}function Ju(t,e){var n=ye;ye|=2;var r=oE();(pt!==t||_t!==e)&&(sr=null,Ys(t,e));do try{$I();break}catch(s){iE(t,s)}while(!0);if(kp(),ye=n,Yu.current=r,tt!==null)throw Error(z(261));return pt=null,_t=0,ot}function $I(){for(;tt!==null;)aE(tt)}function HI(){for(;tt!==null&&!mC();)aE(tt)}function aE(t){var e=cE(t.alternate,t,Jt);t.memoizedProps=t.pendingProps,e===null?lE(t):tt=e,Up.current=null}function lE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MI(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,tt=null;return}}else if(n=VI(n,e,Jt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ot===0&&(ot=5)}function $s(t,e,n){var r=_e,s=gn.transition;try{gn.transition=null,_e=1,WI(t,e,n,r)}finally{gn.transition=s,_e=r}return null}function WI(t,e,n,r){do Ki();while(Yr!==null);if(ye&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CC(t,i),t===pt&&(tt=pt=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,hE(Du,function(){return Ki(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gn.transition,gn.transition=null;var o=_e;_e=1;var a=ye;ye|=4,Up.current=null,FI(t,n),nE(n,t),hI(Yd),Lu=!!Kd,Yd=Kd=null,t.current=n,UI(n),gC(),ye=a,_e=o,gn.transition=i}else t.current=n;if(ql&&(ql=!1,Yr=t,Qu=s),i=t.pendingLanes,i===0&&(ns=null),_C(n.stateNode),Kt(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=gf,gf=null,t;return Qu&1&&t.tag!==0&&Ki(),i=t.pendingLanes,i&1?t===yf?da++:(da=0,yf=t):da=0,Cs(),null}function Ki(){if(Yr!==null){var t=B_(Qu),e=gn.transition,n=_e;try{if(gn.transition=null,_e=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,Qu=0,ye&6)throw Error(z(331));var s=ye;for(ye|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:ca(8,h,i)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var m=h.sibling,y=h.return;if(Zw(h),h===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var S=i.alternate;if(S!==null){var E=S.child;if(E!==null){S.child=null;do{var I=E.sibling;E.sibling=null,E=I}while(E!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ca(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,X=_;break e}X=i.return}}var v=t.current;for(X=v;X!==null;){o=X;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,X=x;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bc(9,a)}}catch(V){Be(a,a.return,V)}if(a===o){X=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,X=D;break e}X=a.return}}if(ye=s,Cs(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Tc,t)}catch{}r=!0}return r}finally{_e=n,gn.transition=e}}return!1}function nv(t,e,n){e=so(n,e),e=Bw(t,e,1),t=ts(t,e,1),e=jt(),t!==null&&(Xa(t,1,e),Kt(t,e))}function Be(t,e,n){if(t.tag===3)nv(t,t,n);else for(;e!==null;){if(e.tag===3){nv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){t=so(n,t),t=$w(e,t,1),e=ts(e,t,1),t=jt(),e!==null&&(Xa(e,1,t),Kt(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(_t&n)===n&&(ot===4||ot===3&&(_t&130023424)===_t&&500>Xe()-Bp?Ys(t,0):zp|=n),Kt(t,e)}function uE(t,e){e===0&&(t.mode&1?(e=Vl,Vl<<=1,!(Vl&130023424)&&(Vl=4194304)):e=1);var n=jt();t=mr(t,e),t!==null&&(Xa(t,e,n),Kt(t,n))}function GI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uE(t,n)}function KI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),uE(t,n)}var cE;cE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,LI(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Oe&&e.flags&1048576&&pw(e,Bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var s=eo(e,Dt.current);Gi(e,n),s=Lp(null,e,r,t,s,n);var i=Vp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,Uu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bp(e),s.updater=Rc,e.stateNode=s,s._reactInternals=e,sf(e,r,t,n),e=lf(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&xp(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=XI(r),t=xn(r,t),s){case 0:e=af(null,e,r,t,n);break e;case 1:e=qy(null,e,r,t,n);break e;case 11:e=Hy(null,e,r,t,n);break e;case 14:e=Wy(null,e,r,xn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),af(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),qy(t,e,r,s,n);case 3:e:{if(Gw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ww(t,e),Wu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=so(Error(z(423)),e),e=Gy(t,e,r,n,s);break e}else if(r!==s){s=so(Error(z(424)),e),e=Gy(t,e,r,n,s);break e}else for(Zt=es(e.stateNode.containerInfo.firstChild),nn=e,Oe=!0,Cn=null,n=vw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===s){e=gr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return Ew(e),t===null&&tf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xd(r,s)?o=null:i!==null&&Xd(r,i)&&(e.flags|=32),qw(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&tf(e),null;case 13:return Kw(t,e,n);case 4:return Pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Hy(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce($u,r._currentValue),r._currentValue=o,i!==null)if(bn(i.value,o)){if(i.children===s.children&&!qt.current){e=gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=cr(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gi(e,n),s=_n(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=xn(r,e.pendingProps),s=xn(r.type,s),Wy(t,e,r,s,n);case 15:return Hw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),pu(t,e),e.tag=1,Gt(r)?(t=!0,Uu(e)):t=!1,Gi(e,n),zw(e,r,s),sf(e,r,s,n),lf(null,e,r,!0,t,n);case 19:return Yw(t,e,n);case 22:return Ww(t,e,n)}throw Error(z(156,e.tag))};function hE(t,e){return j_(t,e)}function YI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new YI(t,e,n,r)}function qp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XI(t){if(typeof t=="function")return qp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hp)return 11;if(t===dp)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")qp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pi:return Xs(n.children,s,i,e);case cp:o=8,s|=8;break;case Ad:return t=pn(12,n,e,s|2),t.elementType=Ad,t.lanes=i,t;case Rd:return t=pn(13,n,e,s),t.elementType=Rd,t.lanes=i,t;case bd:return t=pn(19,n,e,s),t.elementType=bd,t.lanes=i,t;case E_:return Nc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case __:o=10;break e;case w_:o=9;break e;case hp:o=11;break e;case dp:o=14;break e;case Fr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xs(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function Nc(t,e,n,r){return t=pn(22,t,r,e),t.elementType=E_,t.lanes=n,t.stateNode={isHidden:!1},t}function rd(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function sd(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gp(t,e,n,r,s,i,o,a,u){return t=new QI(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(i),t}function JI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dE(t){if(!t)return fs;t=t._reactInternals;e:{if(fi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Gt(n))return dw(t,n,e)}return e}function fE(t,e,n,r,s,i,o,a,u){return t=Gp(n,r,!0,t,s,i,o,a,u),t.context=dE(null),n=t.current,r=jt(),s=rs(n),i=cr(r,s),i.callback=e??null,ts(n,i,s),t.current.lanes=s,Xa(t,s,r),Kt(t,r),t}function Dc(t,e,n,r){var s=e.current,i=jt(),o=rs(s);return n=dE(n),e.context===null?e.context=n:e.pendingContext=n,e=cr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ts(s,e,o),t!==null&&(Rn(t,s,o,i),hu(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kp(t,e){rv(t,e),(t=t.alternate)&&rv(t,e)}function ZI(){return null}var pE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yp(t){this._internalRoot=t}Oc.prototype.render=Yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Dc(t,e,null,null)};Oc.prototype.unmount=Yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ii(function(){Dc(null,t,null,null)}),e[pr]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var e=W_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&G_(t)}};function Xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function ek(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zu(o);i.call(c)}}var o=fE(e,r,t,0,null,!1,!1,"",sv);return t._reactRootContainer=o,t[pr]=o.current,Ra(t.nodeType===8?t.parentNode:t),ii(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zu(u);a.call(c)}}var u=Gp(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=u,t[pr]=u.current,Ra(t.nodeType===8?t.parentNode:t),ii(function(){Dc(e,u,n,r)}),u}function Vc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Zu(o);a.call(u)}}Dc(e,o,t,s)}else o=ek(n,e,t,s,r);return Zu(o)}$_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(mp(e,n|1),Kt(e,Xe()),!(ye&6)&&(io=Xe()+500,Cs()))}break;case 13:ii(function(){var r=mr(t,1);if(r!==null){var s=jt();Rn(r,t,1,s)}}),Kp(t,1)}};gp=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=jt();Rn(e,t,134217728,n)}Kp(t,134217728)}};H_=function(t){if(t.tag===13){var e=rs(t),n=mr(t,e);if(n!==null){var r=jt();Rn(n,t,e,r)}Kp(t,e)}};W_=function(){return _e};q_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Ud=function(t,e,n){switch(e){case"input":if(Dd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ic(r);if(!s)throw Error(z(90));x_(r),Dd(r,s)}}}break;case"textarea":C_(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};N_=$p;D_=ii;var tk={usingClientEntryPoint:!1,Events:[Ja,Li,Ic,b_,P_,$p]},Wo={findFiberByHostInstance:Ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nk={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V_(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{Tc=Gl.inject(nk),$n=Gl}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xp(e))throw Error(z(200));return JI(t,e,null,n)};sn.createRoot=function(t,e){if(!Xp(t))throw Error(z(299));var n=!1,r="",s=pE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gp(t,1,!1,null,null,n,!1,r,s),t[pr]=e.current,Ra(t.nodeType===8?t.parentNode:t),new Yp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=V_(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return ii(t)};sn.hydrate=function(t,e,n){if(!Lc(e))throw Error(z(200));return Vc(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!Xp(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fE(e,null,t,1,n??null,s,!1,i,o),t[pr]=e.current,Ra(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Oc(e)};sn.render=function(t,e,n){if(!Lc(e))throw Error(z(200));return Vc(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!Lc(t))throw Error(z(40));return t._reactRootContainer?(ii(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};sn.unstable_batchedUpdates=$p;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Vc(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function mE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mE)}catch(t){console.error(t)}}mE(),m_.exports=sn;var rk=m_.exports,iv=rk;Id.createRoot=iv.createRoot,Id.hydrateRoot=iv.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ov="popstate";function sk(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return wf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ja(s)}return ok(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ik(){return Math.random().toString(36).substring(2,10)}function av(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?go(e):e,state:n,key:e&&e.key||r||ik()}}function ja({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ok(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let I=h(),_=I==null?null:I-c;c=I,u&&u({action:a,location:E.location,delta:_})}function m(I,_){a="PUSH";let v=wf(E.location,I,_);c=h()+1;let x=av(v,c),D=E.createHref(v);try{o.pushState(x,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(D)}i&&u&&u({action:a,location:E.location,delta:1})}function y(I,_){a="REPLACE";let v=wf(E.location,I,_);c=h();let x=av(v,c),D=E.createHref(v);o.replaceState(x,"",D),i&&u&&u({action:a,location:E.location,delta:0})}function S(I){return ak(I)}let E={get action(){return a},get location(){return t(s,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ov,f),u=I,()=>{s.removeEventListener(ov,f),u=null}},createHref(I){return e(s,I)},createURL:S,encodeLocation(I){let _=S(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(I){return o.go(I)}};return E}function ak(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),je(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ja(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function gE(t,e,n="/"){return lk(t,e,n,!1)}function lk(t,e,n,r){let s=typeof e=="string"?go(e):e,i=yr(s.pathname||"/",n);if(i==null)return null;let o=yE(t);uk(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=wk(i);a=vk(o[u],c,r)}return a}function yE(t,e=[],n=[],r="",s=!1){let i=(o,a,u=s,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;je(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=hr([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(je(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),yE(o.children,e,m,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:gk(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let c of vE(o.path))i(o,a,!0,c)}),e}function vE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=vE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function uk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ck=/^:[\w-]+$/,hk=3,dk=2,fk=1,pk=10,mk=-2,lv=t=>t==="*";function gk(t,e){let n=t.split("/"),r=n.length;return n.some(lv)&&(r+=mk),e&&(r+=dk),n.filter(s=>!lv(s)).reduce((s,i)=>s+(ck.test(i)?hk:i===""?fk:pk),r)}function yk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vk(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:hr([i,f.pathname]),pathnameBase:Ck(hr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=hr([i,f.pathnameBase]))}return o}function ec(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_k(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},m)=>{if(h==="*"){let S=a[m]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[m];return f&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function _k(t,e=!1,n=!0){Pn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Ek=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tk=t=>Ek.test(t);function xk(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?go(t):t,i;if(n)if(Tk(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Pn(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=uv(n.substring(1),"/"):i=uv(n,e)}else i=e;return{pathname:i,search:Ik(r),hash:kk(s)}}function uv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function id(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _E(t){let e=Sk(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function wE(t,e,n,r=!1){let s;typeof t=="string"?s=go(t):(s={...t},je(!s.pathname||!s.pathname.includes("?"),id("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),id("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),id("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=xk(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var hr=t=>t.join("/").replace(/\/\/+/g,"/"),Ck=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ik=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ak(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var EE=["POST","PUT","PATCH","DELETE"];new Set(EE);var Rk=["GET",...EE];new Set(Rk);var yo=A.createContext(null);yo.displayName="DataRouter";var Mc=A.createContext(null);Mc.displayName="DataRouterState";A.createContext(!1);var TE=A.createContext({isTransitioning:!1});TE.displayName="ViewTransition";var bk=A.createContext(new Map);bk.displayName="Fetchers";var Pk=A.createContext(null);Pk.displayName="Await";var Zn=A.createContext(null);Zn.displayName="Navigation";var el=A.createContext(null);el.displayName="Location";var er=A.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var Qp=A.createContext(null);Qp.displayName="RouteError";function Nk(t,{relative:e}={}){je(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Zn),{hash:s,pathname:i,search:o}=nl(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:hr([n,i])),r.createHref({pathname:a,search:o,hash:s})}function tl(){return A.useContext(el)!=null}function pi(){return je(tl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(el).location}var xE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SE(t){A.useContext(Zn).static||A.useLayoutEffect(t)}function CE(){let{isDataRoute:t}=A.useContext(er);return t?qk():Dk()}function Dk(){je(tl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(yo),{basename:e,navigator:n}=A.useContext(Zn),{matches:r}=A.useContext(er),{pathname:s}=pi(),i=JSON.stringify(_E(r)),o=A.useRef(!1);return SE(()=>{o.current=!0}),A.useCallback((u,c={})=>{if(Pn(o.current,xE),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=wE(u,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,i,s,t])}A.createContext(null);function Ok(){let{matches:t}=A.useContext(er),e=t[t.length-1];return e?e.params:{}}function nl(t,{relative:e}={}){let{matches:n}=A.useContext(er),{pathname:r}=pi(),s=JSON.stringify(_E(n));return A.useMemo(()=>wE(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Lk(t,e){return IE(t,e)}function IE(t,e,n,r,s){var v;je(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(Zn),{matches:o}=A.useContext(er),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let x=f&&f.path||"";kE(c,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=pi(),y;if(e){let x=typeof e=="string"?go(e):e;je(h==="/"||((v=x.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),y=x}else y=m;let S=y.pathname||"/",E=S;if(h!=="/"){let x=h.replace(/^\//,"").split("/");E="/"+S.replace(/^\//,"").split("/").slice(x.length).join("/")}let I=gE(t,{pathname:E});Pn(f||I!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Pn(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Uk(I&&I.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:hr([h,i.encodeLocation?i.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:hr([h,i.encodeLocation?i.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,s);return e&&_?A.createElement(el.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function Vk(){let t=Wk(),e=Ak(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,o)}var Mk=A.createElement(Vk,null),jk=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(er.Provider,{value:this.props.routeContext},A.createElement(Qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fk({routeContext:t,match:e,children:n}){let r=A.useContext(yo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(er.Provider,{value:t},n)}function Uk(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let h=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);je(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,u=-1;if(n)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:y}=n,S=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||S){a=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let c=n&&r?(h,f)=>{var m,y;r(h,{location:n.location,params:((y=(m=n.matches)==null?void 0:m[0])==null?void 0:y.params)??{},errorInfo:f})}:void 0;return i.reduceRight((h,f,m)=>{let y,S=!1,E=null,I=null;n&&(y=o&&f.route.id?o[f.route.id]:void 0,E=f.route.errorElement||Mk,a&&(u<0&&m===0?(kE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,I=null):u===m&&(S=!0,I=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,m+1)),v=()=>{let x;return y?x=E:S?x=I:f.route.Component?x=A.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,A.createElement(Fk,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?A.createElement(jk,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:c}):v()},null)}function Jp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zk(t){let e=A.useContext(yo);return je(e,Jp(t)),e}function Bk(t){let e=A.useContext(Mc);return je(e,Jp(t)),e}function $k(t){let e=A.useContext(er);return je(e,Jp(t)),e}function Zp(t){let e=$k(t),n=e.matches[e.matches.length-1];return je(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Hk(){return Zp("useRouteId")}function Wk(){var r;let t=A.useContext(Qp),e=Bk("useRouteError"),n=Zp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function qk(){let{router:t}=zk("useNavigate"),e=Zp("useNavigate"),n=A.useRef(!1);return SE(()=>{n.current=!0}),A.useCallback(async(s,i={})=>{Pn(n.current,xE),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var cv={};function kE(t,e,n){!e&&!cv[t]&&(cv[t]=!0,Pn(!1,n))}A.memo(Gk);function Gk({routes:t,future:e,state:n,unstable_onError:r}){return IE(t,void 0,n,r,e)}function Zo(t){je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){je(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=A.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=go(n));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:m="default"}=n,y=A.useMemo(()=>{let S=yr(u,o);return S==null?null:{location:{pathname:S,search:c,hash:h,state:f,key:m},navigationType:r}},[o,u,c,h,f,m,r]);return Pn(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:A.createElement(Zn.Provider,{value:a},A.createElement(el.Provider,{children:e,value:y}))}function Yk({children:t,location:e}){return Lk(Ef(t),e)}function Ef(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Ef(r.props.children,i));return}je(r.type===Zo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),je(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ef(r.props.children,i)),n.push(o)}),n}var vu="get",_u="application/x-www-form-urlencoded";function jc(t){return t!=null&&typeof t.tagName=="string"}function Xk(t){return jc(t)&&t.tagName.toLowerCase()==="button"}function Qk(t){return jc(t)&&t.tagName.toLowerCase()==="form"}function Jk(t){return jc(t)&&t.tagName.toLowerCase()==="input"}function Zk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eA(t,e){return t.button===0&&(!e||e==="_self")&&!Zk(t)}var Kl=null;function tA(){if(Kl===null)try{new FormData(document.createElement("form"),0),Kl=!1}catch{Kl=!0}return Kl}var nA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function od(t){return t!=null&&!nA.has(t)?(Pn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_u}"`),null):t}function rA(t,e){let n,r,s,i,o;if(Qk(t)){let a=t.getAttribute("action");r=a?yr(a,e):null,n=t.getAttribute("method")||vu,s=od(t.getAttribute("enctype"))||_u,i=new FormData(t)}else if(Xk(t)||Jk(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?yr(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||vu,s=od(t.getAttribute("formenctype"))||od(a.getAttribute("enctype"))||_u,i=new FormData(a,t),!tA()){let{name:c,type:h,value:f}=t;if(h==="image"){let m=c?`${c}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else c&&i.append(c,f)}}else{if(jc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vu,r=null,s=_u,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function em(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sA(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&yr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function iA(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aA(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await iA(i,n);return o.links?o.links():[]}return[]}));return hA(r.flat(1).filter(oA).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hv(t,e,n,r,s,i){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var h;return n[c].pathname!==u.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):i==="data"?e.filter((u,c)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function lA(t,e,{includeHydrateFallback:n}={}){return uA(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function uA(t){return[...new Set(t)]}function cA(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function hA(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(cA(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function AE(){let t=A.useContext(yo);return em(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dA(){let t=A.useContext(Mc);return em(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tm=A.createContext(void 0);tm.displayName="FrameworkContext";function RE(){let t=A.useContext(tm);return em(t,"You must render this element inside a <HydratedRouter> element"),t}function fA(t,e){let n=A.useContext(tm),[r,s]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,m=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=_=>{_.forEach(v=>{o(v.isIntersecting)})},I=new IntersectionObserver(E,{threshold:.5});return m.current&&I.observe(m.current),()=>{I.disconnect()}}},[t]),A.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let y=()=>{s(!0)},S=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:qo(a,y),onBlur:qo(u,S),onMouseEnter:qo(c,y),onMouseLeave:qo(h,S),onTouchStart:qo(f,y)}]:[!1,m,{}]}function qo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function pA({page:t,...e}){let{router:n}=AE(),r=A.useMemo(()=>gE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(gA,{page:t,matches:r,...e}):null}function mA(t){let{manifest:e,routeModules:n}=RE(),[r,s]=A.useState([]);return A.useEffect(()=>{let i=!1;return aA(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function gA({page:t,matches:e,...n}){let r=pi(),{manifest:s,routeModules:i}=RE(),{basename:o}=AE(),{loaderData:a,matches:u}=dA(),c=A.useMemo(()=>hv(t,e,u,s,r,"data"),[t,e,u,s,r]),h=A.useMemo(()=>hv(t,e,u,s,r,"assets"),[t,e,u,s,r]),f=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,E=!1;if(e.forEach(_=>{var x;let v=s.routes[_.route.id];!v||!v.hasLoader||(!c.some(D=>D.route.id===_.route.id)&&_.route.id in a&&((x=i[_.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?E=!0:S.add(_.route.id))}),S.size===0)return[];let I=sA(t,o,"data");return E&&S.size>0&&I.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[I.pathname+I.search]},[o,a,r,s,c,e,t,i]),m=A.useMemo(()=>lA(h,s),[h,s]),y=mA(h);return A.createElement(A.Fragment,null,f.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),m.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),y.map(({key:S,link:E})=>A.createElement("link",{key:S,nonce:n.nonce,...E})))}function yA(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bE&&(window.__reactRouterVersion="7.9.6")}catch{}function vA({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=sk({window:n,v5Compat:!0}));let s=r.current,[i,o]=A.useState({action:s.action,location:s.location}),a=A.useCallback(u=>{A.startTransition(()=>o(u))},[o]);return A.useLayoutEffect(()=>s.listen(a),[s,a]),A.createElement(Kk,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var PE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fa=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f,...m},y){let{basename:S}=A.useContext(Zn),E=typeof c=="string"&&PE.test(c),I,_=!1;if(typeof c=="string"&&E&&(I=c,bE))try{let C=new URL(window.location.href),R=c.startsWith("//")?new URL(C.protocol+c):new URL(c),P=yr(R.pathname,S);R.origin===C.origin&&P!=null?c=P+R.search+R.hash:_=!0}catch{Pn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=Nk(c,{relative:s}),[x,D,V]=fA(r,m),U=TA(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:f});function k(C){e&&e(C),C.defaultPrevented||U(C)}let w=A.createElement("a",{...m,...V,href:I||v,onClick:_||i?e:k,ref:yA(y,D),target:u,"data-discover":!E&&n==="render"?"true":void 0});return x&&!E?A.createElement(A.Fragment,null,w,A.createElement(pA,{page:v})):w});fa.displayName="Link";var _A=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:u,...c},h){let f=nl(o,{relative:c.relative}),m=pi(),y=A.useContext(Mc),{navigator:S,basename:E}=A.useContext(Zn),I=y!=null&&kA(f)&&a===!0,_=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,v=m.pathname,x=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,_=_.toLowerCase()),x&&E&&(x=yr(x,E)||x);const D=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let V=v===_||!s&&v.startsWith(_)&&v.charAt(D)==="/",U=x!=null&&(x===_||!s&&x.startsWith(_)&&x.charAt(_.length)==="/"),k={isActive:V,isPending:U,isTransitioning:I},w=V?e:void 0,C;typeof r=="function"?C=r(k):C=[r,V?"active":null,U?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(k):i;return A.createElement(fa,{...c,"aria-current":w,className:C,ref:h,style:R,to:o,viewTransition:a},typeof u=="function"?u(k):u)});_A.displayName="NavLink";var wA=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=vu,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...m},y)=>{let S=CA(),E=IA(a,{relative:c}),I=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&PE.test(a),v=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let D=x.nativeEvent.submitter,V=(D==null?void 0:D.getAttribute("formmethod"))||o;S(D||x.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:s,state:i,relative:c,preventScrollReset:h,viewTransition:f})};return A.createElement("form",{ref:y,method:I,action:E,onSubmit:r?u:v,...m,"data-discover":!_&&t==="render"?"true":void 0})});wA.displayName="Form";function EA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NE(t){let e=A.useContext(yo);return je(e,EA(t)),e}function TA(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=CE(),u=pi(),c=nl(t,{relative:i});return A.useCallback(h=>{if(eA(h,e)){h.preventDefault();let f=n!==void 0?n:ja(u)===ja(c);a(t,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,a,c,n,r,e,t,s,i,o])}var xA=0,SA=()=>`__${String(++xA)}__`;function CA(){let{router:t}=NE("useSubmit"),{basename:e}=A.useContext(Zn),n=Hk();return A.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:u,body:c}=rA(r,e);if(s.navigate===!1){let h=s.fetcherKey||SA();await t.fetch(h,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function IA(t,{relative:e}={}){let{basename:n}=A.useContext(Zn),r=A.useContext(er);je(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...nl(t||".",{relative:e})},o=pi();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:hr([n,i.pathname])),ja(i)}function kA(t,{relative:e}={}){let n=A.useContext(TE);je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=NE("useViewTransitionState"),s=nl(t,{relative:e});if(!n.isTransitioning)return!1;let i=yr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=yr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ec(s.pathname,o)!=null||ec(s.pathname,i)!=null}const AA="modulepreload",RA=function(t){return"/econotas/"+t},dv={},Tf=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=RA(u),u in dv)return;dv[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":AA,c||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),fv=t=>{const e=PA(t);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),NA=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},u)=>A.createElement("svg",{ref:u,...DA,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DE("lucide",s),...!i&&!NA(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>A.createElement(c,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(OA,{ref:i,iconNode:e,className:DE(`lucide-${bA(fv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=fv(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],VA=se("arrow-left",LA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jA=se("calendar",MA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nm=se("check",FA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],OE=se("chevron-down",UA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],BA=se("chevron-left",zA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],LE=se("chevron-right",$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],WA=se("circle-alert",HA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],GA=se("circle-check-big",qA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VE=se("clock",KA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rm=se("download",YA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],QA=se("ellipsis-vertical",XA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],ZA=se("eraser",JA);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tR=se("eye",eR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xf=se("file-text",nR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],tc=se("folder",rR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],iR=se("funnel",sR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],aR=se("inbox",oR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uR=se("info",lR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],hR=se("layout-grid",cR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],fR=se("list",dR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],mR=se("maximize-2",pR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Sf=se("message-square",gR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],pv=se("mic",yR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mv=se("moon",vR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],wR=se("palette",_R);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],TR=se("pause",ER);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],SR=se("pen-tool",xR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],sm=se("pen",CR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Cf=se("play",IR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],im=se("plus",kR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RR=se("rotate-ccw",AR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],PR=se("save",bR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ME=se("search",NR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],OR=se("share-2",DR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],VR=se("sliders-horizontal",LR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jR=se("square",MR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fc=se("star",FR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gv=se("sun",UR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],om=se("tag",zR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Uc=se("trash-2",BR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jE=se("triangle-alert",$R);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tr=se("x",HR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],qR=se("zoom-in",WR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],KR=se("zoom-out",GR),YR=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},UE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new QR;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JR=function(t){const e=FE(t);return UE.encodeByteArray(e,!0)},nc=function(t){return JR(t).replace(/\./g,"")},zE=function(t){try{return UE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=()=>ZR().__FIREBASE_DEFAULTS__,tb=()=>{if(typeof process>"u"||typeof yv>"u")return;const t=yv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zE(t[1]);return e&&JSON.parse(e)},zc=()=>{try{return YR()||eb()||tb()||nb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BE=t=>{var e,n;return(n=(e=zc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$E=t=>{const e=BE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},HE=()=>{var t;return(t=zc())==null?void 0:t.config},WE=t=>{var e;return(e=zc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function am(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nc(JSON.stringify(n)),nc(JSON.stringify(o)),""].join(".")}const pa={};function sb(){const t={prod:[],emulator:[]};for(const e of Object.keys(pa))pa[e]?t.emulator.push(e):t.prod.push(e);return t}function ib(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let vv=!1;function lm(t,e){if(typeof window>"u"||typeof document>"u"||!Is(window.location.host)||pa[t]===e||pa[t]||vv)return;pa[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=sb().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{vv=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=ib(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),I=document.getElementById(E)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;a(x),h(I,E);const D=c();u(v,_),x.append(v,S,I,D),document.body.appendChild(x)}i?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function ab(){var e;const t=(e=zc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ub(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hb(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function db(){return!ab()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fb(){try{return typeof indexedDB=="object"}catch{return!1}}function pb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mb,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gb(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nr(s,a,r)}}function gb(t,e){return t.replace(yb,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yb=/\{\$([^}]+)}/g;function vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_v(i)&&_v(o)){if(!oi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _b(t,e){const n=new wb(t,e);return n.subscribe.bind(n)}class wb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Eb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ad),s.error===void 0&&(s.error=ad),s.complete===void 0&&(s.complete=ad);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Eb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sb(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xb(t){return t===Hs?void 0:t}function Sb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const Ib={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},kb=he.INFO,Ab={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Rb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ab[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class um{constructor(e){this.name=e,this._logLevel=kb,this._logHandler=Rb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ib[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const bb=(t,e)=>e.some(n=>t instanceof n);let wv,Ev;function Pb(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nb(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GE=new WeakMap,If=new WeakMap,KE=new WeakMap,ld=new WeakMap,cm=new WeakMap;function Db(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(is(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GE.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function Ob(t){if(If.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});If.set(t,e)}let kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return If.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Lb(t){kf=t(kf)}function Vb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ud(this),e,...n);return KE.set(r,e.sort?e.sort():[e]),is(r)}:Nb().includes(t)?function(...e){return t.apply(ud(this),e),is(GE.get(this))}:function(...e){return is(t.apply(ud(this),e))}}function Mb(t){return typeof t=="function"?Vb(t):(t instanceof IDBTransaction&&Ob(t),bb(t,Pb())?new Proxy(t,kf):t)}function is(t){if(t instanceof IDBRequest)return Db(t);if(ld.has(t))return ld.get(t);const e=Mb(t);return e!==t&&(ld.set(t,e),cm.set(e,t)),e}const ud=t=>cm.get(t);function jb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=is(o);return r&&o.addEventListener("upgradeneeded",u=>{r(is(o.result),u.oldVersion,u.newVersion,is(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Fb=["get","getKey","getAll","getAllKeys","count"],Ub=["put","add","delete","clear"],cd=new Map;function Tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cd.get(e))return cd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Ub.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Fb.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return cd.set(e,i),i}Lb(t=>({...t,get:(e,n,r)=>Tv(e,n)||t.get(e,n,r),has:(e,n)=>!!Tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Af="@firebase/app",xv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new um("@firebase/app"),$b="@firebase/app-compat",Hb="@firebase/analytics-compat",Wb="@firebase/analytics",qb="@firebase/app-check-compat",Gb="@firebase/app-check",Kb="@firebase/auth",Yb="@firebase/auth-compat",Xb="@firebase/database",Qb="@firebase/data-connect",Jb="@firebase/database-compat",Zb="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",r2="@firebase/messaging",s2="@firebase/messaging-compat",i2="@firebase/performance",o2="@firebase/performance-compat",a2="@firebase/remote-config",l2="@firebase/remote-config-compat",u2="@firebase/storage",c2="@firebase/storage-compat",h2="@firebase/firestore",d2="@firebase/ai",f2="@firebase/firestore-compat",p2="firebase",m2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="[DEFAULT]",g2={[Af]:"fire-core",[$b]:"fire-core-compat",[Wb]:"fire-analytics",[Hb]:"fire-analytics-compat",[Gb]:"fire-app-check",[qb]:"fire-app-check-compat",[Kb]:"fire-auth",[Yb]:"fire-auth-compat",[Xb]:"fire-rtdb",[Qb]:"fire-data-connect",[Jb]:"fire-rtdb-compat",[Zb]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[r2]:"fire-fcm",[s2]:"fire-fcm-compat",[i2]:"fire-perf",[o2]:"fire-perf-compat",[a2]:"fire-rc",[l2]:"fire-rc-compat",[u2]:"fire-gcs",[c2]:"fire-gcs-compat",[h2]:"fire-fst",[f2]:"fire-fst-compat",[d2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,y2=new Map,bf=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ai(t){const e=t.name;if(bf.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;bf.set(e,t);for(const n of rc.values())Sv(n,t);for(const n of y2.values())Sv(n,t);return!0}function Bc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new rl("app","Firebase",v2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=m2;function YE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Rf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(n||(n=HE()),!n)throw os.create("no-options");const i=rc.get(s);if(i){if(oi(n,i.options)&&oi(r,i.config))return i;throw os.create("duplicate-app",{appName:s})}const o=new Cb(s);for(const u of bf.values())o.addComponent(u);const a=new _2(n,r,o);return rc.set(s,a),a}function hm(t=Rf){const e=rc.get(t);if(!e&&t===Rf&&HE())return YE();if(!e)throw os.create("no-app",{appName:t});return e}function Wn(t,e,n){let r=g2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(o.join(" "));return}ai(new ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="firebase-heartbeat-database",E2=1,Fa="firebase-heartbeat-store";let hd=null;function XE(){return hd||(hd=jb(w2,E2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),hd}async function T2(t){try{const n=(await XE()).transaction(Fa),r=await n.objectStore(Fa).get(QE(t));return await n.done,r}catch(e){if(e instanceof nr)vr.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vr.warn(n.message)}}}async function Cv(t,e){try{const r=(await XE()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,QE(t)),await r.done}catch(n){if(n instanceof nr)vr.warn(n.message);else{const r=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vr.warn(r.message)}}}function QE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=1024,S2=30;class C2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S2){const o=A2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iv(),{heartbeatsToSend:r,unsentEntries:s}=I2(this._heartbeatsCache.heartbeats),i=nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return vr.warn(n),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function I2(t,e=x2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),kv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),kv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class k2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fb()?pb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kv(t){return nc(JSON.stringify({version:2,heartbeats:t})).length}function A2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){ai(new ps("platform-logger",e=>new zb(e),"PRIVATE")),ai(new ps("heartbeat",e=>new C2(e),"PRIVATE")),Wn(Af,xv,t),Wn(Af,xv,"esm2020"),Wn("fire-js","")}R2("");var b2="firebase",P2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(b2,P2,"app");function JE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N2=JE,ZE=new rl("auth","Firebase",JE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new um("@firebase/auth");function D2(t,...e){sc.logLevel<=he.WARN&&sc.warn(`Auth (${mi}): ${t}`,...e)}function wu(t,...e){sc.logLevel<=he.ERROR&&sc.error(`Auth (${mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,...e){throw dm(t,...e)}function qn(t,...e){return dm(t,...e)}function e1(t,e,n){const r={...N2(),[e]:n};return new rl("auth","Firebase",r).create(e,{appName:t.name})}function as(t){return e1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZE.create(t,...e)}function te(t,e,...n){if(!t)throw dm(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function wr(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function O2(){return Av()==="http:"||Av()==="https:"}function Av(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O2()||ub()||"connection"in navigator)?navigator.onLine:!0}function V2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,wr(n>e,"Short delay should be less than long delay!"),this.isMobile=ob()||cb()}get(){return L2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F2=new il(3e4,6e4);function $c(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vo(t,e,n,r,s={}){return n1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=sl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return lb()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Is(t.emulatorConfig.host)&&(c.credentials="include"),t1.fetch()(await s1(t,t.config.apiHost,n,a),c)})}async function n1(t,e,n){t._canInitEmulator=!1;const r={...M2,...e};try{const s=new U2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Yl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Yl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw e1(t,h,c);_r(t,h)}}catch(s){if(s instanceof nr)throw s;_r(t,"network-request-failed",{message:String(s)})}}async function r1(t,e,n,r,s={}){const i=await vo(t,e,n,r,s);return"mfaPendingCredential"in i&&_r(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function s1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?fm(t.config,s):`${t.config.apiScheme}://${s}`;return j2.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class U2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),F2.get())})}}function Yl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t,e){return vo(t,"POST","/v1/accounts:delete",e)}async function ic(t,e){return vo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B2(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=pm(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ma(dd(s.auth_time)),issuedAtTime:ma(dd(s.iat)),expirationTime:ma(dd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dd(t){return Number(t)*1e3}function pm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const s=zE(n);return s?JSON.parse(s):(wu("Failed to decode base64 JWT payload"),null)}catch(s){return wu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rv(t){const e=pm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&$2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ma(this.lastLoginAt),this.creationTime=ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Ua(t,ic(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?i1(s.providerUserInfo):[],o=q2(t.providerData,i),a=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function W2(t){const e=Qe(t);await oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function i1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(t,e){const n=await n1(t,{},async()=>{const r=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await s1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Is(t.emulatorConfig.host)&&(u.credentials="include"),t1.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function K2(t,e){return vo(t,"POST","/v2/accounts:revokeToken",$c(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await G2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Yi;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new H2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B2(this,e)}reload(){return W2(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await Ua(this,z2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:E}=n;te(f&&E,e,"internal-error");const I=Yi.fromJSON(this.name,E);te(typeof f=="string",e,"internal-error"),jr(r,e.name),jr(s,e.name),te(typeof m=="boolean",e,"internal-error"),te(typeof y=="boolean",e,"internal-error"),jr(i,e.name),jr(o,e.name),jr(a,e.name),jr(u,e.name),jr(c,e.name),jr(h,e.name);const _=new kn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:I,createdAt:c,lastLoginAt:h});return S&&Array.isArray(S)&&(_.providerData=S.map(v=>({...v}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Yi;s.updateFromServerResponse(n);const i=new kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await oc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?i1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Yi;a.updateFromIdToken(r);const u=new kn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map;function ur(t){wr(t instanceof Function,"Expected a class definition");let e=bv.get(t);return e?(wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const Pv=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Eu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Eu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ic(this.auth,{idToken:e}).catch(()=>{});return n?kn._fromGetAccountInfoResponse(this.auth,n,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xi(ur(Pv),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ur(Pv);const o=Eu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const m=await ic(e,{idToken:h}).catch(()=>{});if(!m)break;f=await kn._fromGetAccountInfoResponse(e,m,h)}else f=kn._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Xi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d1(e))return"Blackberry";if(f1(e))return"Webos";if(l1(e))return"Safari";if((e.includes("chrome/")||u1(e))&&!e.includes("edge/"))return"Chrome";if(h1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a1(t=Ot()){return/firefox\//i.test(t)}function l1(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u1(t=Ot()){return/crios\//i.test(t)}function c1(t=Ot()){return/iemobile/i.test(t)}function h1(t=Ot()){return/android/i.test(t)}function d1(t=Ot()){return/blackberry/i.test(t)}function f1(t=Ot()){return/webos/i.test(t)}function mm(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Y2(t=Ot()){var e;return mm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function X2(){return hb()&&document.documentMode===10}function p1(t=Ot()){return mm(t)||h1(t)||f1(t)||d1(t)||/windows phone/i.test(t)||c1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e=[]){let n;switch(t){case"Browser":n=Nv(Ot());break;case"Worker":n=`${Nv(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e={}){return vo(t,"GET","/v2/passwordPolicy",$c(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=6;class eP{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Z2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new Q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ur(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ic(this,{idToken:e}),r=await kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(as(this));const n=e?Qe(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await J2(this),n=new eP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await K2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ur(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&D2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hc(t){return Qe(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_b(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nP(t){gm=t}function rP(t){return gm.loadJS(t)}function sP(){return gm.gapiScript}function iP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t,e){const n=Bc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oi(i,e??{}))return s;_r(s,"already-initialized")}return n.initialize({options:e})}function aP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lP(t,e,n){const r=Hc(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=g1(e),{host:o,port:a}=uP(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(oi(c,r.config.emulator)&&oi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Is(o)?(am(`${i}//${o}${u}`),lm("Auth",!0)):cP()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uP(t){const e=g1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ov(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ov(o)}}}function Ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t,e){return r1(t,"POST","/v1/accounts:signInWithIdp",$c(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="http://localhost";class li extends y1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new li(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qi(e,n)}buildRequest(){const e={requestUri:hP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends ol{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return li._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ol{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends ol{constructor(){super("twitter.com")}static credential(e,n){return li._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e){return r1(t,"POST","/v1/accounts:signUp",$c(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kn._fromIdTokenResponse(e,r,s),o=Lv(r);return new ms({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Lv(r);return new ms({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t){var s;if(dn(t.app))return Promise.reject(as(t));const e=Hc(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new ms({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await dP(e,{returnSecureToken:!0}),r=await ms._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends nr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ac(e,n,r,s)}}function _1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(t,i,e,r):i})}async function pP(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(as(r));const s="reauthenticate";try{const i=await Ua(t,_1(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=pm(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),ms._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&_r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(t,e,n=!1){if(dn(t.app))return Promise.reject(as(t));const r="signIn",s=await _1(t,r,e),i=await ms._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function yP(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function vP(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function _P(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}const lc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=1e3,EP=10;class E1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);X2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E1.type="LOCAL";const TP=E1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T1.type="SESSION";const x1=T1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await xP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=ym("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function CP(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function IP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function AP(){return S1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebaseLocalStorageDb",RP=1,uc="firebaseLocalStorage",I1="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qc(t,e){return t.transaction([uc],e?"readwrite":"readonly").objectStore(uc)}function bP(){const t=indexedDB.deleteDatabase(C1);return new al(t).toPromise()}function Df(){const t=indexedDB.open(C1,RP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uc,{keyPath:I1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uc)?e(r):(r.close(),await bP(),e(await Df()))})})}async function Vv(t,e,n){const r=qc(t,!0).put({[I1]:e,value:n});return new al(r).toPromise()}async function PP(t,e){const n=qc(t,!1).get(e),r=await new al(n).toPromise();return r===void 0?null:r.value}function Mv(t,e){const n=qc(t,!0).delete(e);return new al(n).toPromise()}const NP=800,DP=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Df(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(AP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await IP(),!this.activeServiceWorker)return;this.sender=new SP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Df();return await Vv(e,lc,"1"),await Mv(e,lc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qc(s,!1).getAll();return new al(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const OP=k1;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){return e?ur(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends y1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VP(t){return gP(t.auth,new vm(t),t.bypassAuthState)}function MP(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),mP(n,new vm(t),t.bypassAuthState)}async function jP(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),pP(n,new vm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VP;case"linkViaPopup":case"linkViaRedirect":return jP;case"reauthViaPopup":case"reauthViaRedirect":return MP;default:_r(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new il(2e3,1e4);class Bi extends A1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Bi.currentPopupAction&&Bi.currentPopupAction.cancel(),Bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FP.get())};e()}}Bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="pendingRedirect",Tu=new Map;class zP extends A1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await BP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BP(t,e){const n=WP(e),r=HP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $P(t,e){Tu.set(t._key(),e)}function HP(t){return ur(t._redirectPersistence)}function WP(t){return Eu(UP,t.config.apiKey,t.name)}async function qP(t,e,n=!1){if(dn(t.app))return Promise.reject(as(t));const r=Hc(t),s=LP(r,e),o=await new zP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=10*60*1e3;class KP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GP&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e={}){return vo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JP=/^https?/;async function ZP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XP(t);for(const n of e)try{if(eN(n))return}catch{}_r(t,"unauthorized-domain")}function eN(t){const e=Pf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JP.test(n))return!1;if(QP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new il(3e4,6e4);function Fv(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nN(t){return new Promise((e,n)=>{var s,i,o;function r(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),n(qn(t,"network-request-failed"))},timeout:tN.get()})}if((i=(s=Gn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Gn().gapi)!=null&&o.load)r();else{const a=iP("iframefcb");return Gn()[a]=()=>{gapi.load?r():n(qn(t,"network-request-failed"))},rP(`${sP()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw xu=null,e})}let xu=null;function rN(t){return xu=xu||nN(t),xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new il(5e3,15e3),iN="__/auth/iframe",oN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uN(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fm(e,oN):`https://${t.config.authDomain}/${iN}`,r={apiKey:e.apiKey,appName:t.name,v:mi},s=lN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${sl(r).slice(1)}`}async function cN(t){const e=await rN(t),n=Gn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:uN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=Gn().setTimeout(()=>{i(o)},sN.get());function u(){Gn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dN=500,fN=600,pN="_blank",mN="http://localhost";class Uv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gN(t,e,n,r=dN,s=fN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...hN,width:r.toString(),height:s.toString(),top:i,left:o},c=Ot().toLowerCase();n&&(a=u1(c)?pN:n),a1(c)&&(e=e||mN,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(Y2(c)&&a!=="_self")return yN(e||"",a),new Uv(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new Uv(f)}function yN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__/auth/handler",_N="emulator/auth/handler",wN=encodeURIComponent("fac");async function zv(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mi,eventId:s};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ol){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${wN}=${encodeURIComponent(u)}`:"";return`${EN(t)}?${sl(a).slice(1)}${c}`}function EN({config:t}){return t.emulator?fm(t,_N):`https://${t.authDomain}/${vN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="webStorageSupport";class TN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x1,this._completeRedirectFn=qP,this._overrideRedirectResult=$P}async _openPopup(e,n,r,s){var o;wr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await zv(e,n,r,Pf(),s);return gN(e,i,ym())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zv(e,n,r,Pf(),s);return CP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cN(e),r=new KP(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fd,{type:fd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[fd];i!==void 0&&n(!!i),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p1()||l1()||mm()}}const xN=TN;var Bv="@firebase/auth",$v="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IN(t){ai(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m1(t)},c=new tP(r,s,i,u);return aP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ai(new ps("auth-internal",e=>{const n=Hc(e.getProvider("auth").getImmediate());return(r=>new SN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(Bv,$v,CN(t)),Wn(Bv,$v,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=5*60,AN=WE("authIdTokenMaxAge")||kN;let Hv=null;const RN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AN)return;const s=n==null?void 0:n.token;Hv!==s&&(Hv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bN(t=hm()){const e=Bc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oP(t,{popupRedirectResolver:xN,persistence:[OP,TP,x1]}),r=WE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=RN(i.toString());vP(n,o,()=>o(n.currentUser)),yP(n,a=>o(a))}}const s=BE("auth");return s&&lP(n,`http://${s}`),n}function PN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}nP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",PN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IN("Browser");var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,b1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function C(){}C.prototype=w.prototype,k.F=w.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(R,P,N){for(var b=Array(arguments.length-2),we=2;we<arguments.length;we++)b[we-2]=arguments[we];return w.prototype[P].apply(R,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,C){C||(C=0);const R=Array(16);if(typeof w=="string")for(var P=0;P<16;++P)R[P]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(P=0;P<16;++P)R[P]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=k.g[0],C=k.g[1],P=k.g[2];let N=k.g[3],b;b=w+(N^C&(P^N))+R[0]+3614090360&4294967295,w=C+(b<<7&4294967295|b>>>25),b=N+(P^w&(C^P))+R[1]+3905402710&4294967295,N=w+(b<<12&4294967295|b>>>20),b=P+(C^N&(w^C))+R[2]+606105819&4294967295,P=N+(b<<17&4294967295|b>>>15),b=C+(w^P&(N^w))+R[3]+3250441966&4294967295,C=P+(b<<22&4294967295|b>>>10),b=w+(N^C&(P^N))+R[4]+4118548399&4294967295,w=C+(b<<7&4294967295|b>>>25),b=N+(P^w&(C^P))+R[5]+1200080426&4294967295,N=w+(b<<12&4294967295|b>>>20),b=P+(C^N&(w^C))+R[6]+2821735955&4294967295,P=N+(b<<17&4294967295|b>>>15),b=C+(w^P&(N^w))+R[7]+4249261313&4294967295,C=P+(b<<22&4294967295|b>>>10),b=w+(N^C&(P^N))+R[8]+1770035416&4294967295,w=C+(b<<7&4294967295|b>>>25),b=N+(P^w&(C^P))+R[9]+2336552879&4294967295,N=w+(b<<12&4294967295|b>>>20),b=P+(C^N&(w^C))+R[10]+4294925233&4294967295,P=N+(b<<17&4294967295|b>>>15),b=C+(w^P&(N^w))+R[11]+2304563134&4294967295,C=P+(b<<22&4294967295|b>>>10),b=w+(N^C&(P^N))+R[12]+1804603682&4294967295,w=C+(b<<7&4294967295|b>>>25),b=N+(P^w&(C^P))+R[13]+4254626195&4294967295,N=w+(b<<12&4294967295|b>>>20),b=P+(C^N&(w^C))+R[14]+2792965006&4294967295,P=N+(b<<17&4294967295|b>>>15),b=C+(w^P&(N^w))+R[15]+1236535329&4294967295,C=P+(b<<22&4294967295|b>>>10),b=w+(P^N&(C^P))+R[1]+4129170786&4294967295,w=C+(b<<5&4294967295|b>>>27),b=N+(C^P&(w^C))+R[6]+3225465664&4294967295,N=w+(b<<9&4294967295|b>>>23),b=P+(w^C&(N^w))+R[11]+643717713&4294967295,P=N+(b<<14&4294967295|b>>>18),b=C+(N^w&(P^N))+R[0]+3921069994&4294967295,C=P+(b<<20&4294967295|b>>>12),b=w+(P^N&(C^P))+R[5]+3593408605&4294967295,w=C+(b<<5&4294967295|b>>>27),b=N+(C^P&(w^C))+R[10]+38016083&4294967295,N=w+(b<<9&4294967295|b>>>23),b=P+(w^C&(N^w))+R[15]+3634488961&4294967295,P=N+(b<<14&4294967295|b>>>18),b=C+(N^w&(P^N))+R[4]+3889429448&4294967295,C=P+(b<<20&4294967295|b>>>12),b=w+(P^N&(C^P))+R[9]+568446438&4294967295,w=C+(b<<5&4294967295|b>>>27),b=N+(C^P&(w^C))+R[14]+3275163606&4294967295,N=w+(b<<9&4294967295|b>>>23),b=P+(w^C&(N^w))+R[3]+4107603335&4294967295,P=N+(b<<14&4294967295|b>>>18),b=C+(N^w&(P^N))+R[8]+1163531501&4294967295,C=P+(b<<20&4294967295|b>>>12),b=w+(P^N&(C^P))+R[13]+2850285829&4294967295,w=C+(b<<5&4294967295|b>>>27),b=N+(C^P&(w^C))+R[2]+4243563512&4294967295,N=w+(b<<9&4294967295|b>>>23),b=P+(w^C&(N^w))+R[7]+1735328473&4294967295,P=N+(b<<14&4294967295|b>>>18),b=C+(N^w&(P^N))+R[12]+2368359562&4294967295,C=P+(b<<20&4294967295|b>>>12),b=w+(C^P^N)+R[5]+4294588738&4294967295,w=C+(b<<4&4294967295|b>>>28),b=N+(w^C^P)+R[8]+2272392833&4294967295,N=w+(b<<11&4294967295|b>>>21),b=P+(N^w^C)+R[11]+1839030562&4294967295,P=N+(b<<16&4294967295|b>>>16),b=C+(P^N^w)+R[14]+4259657740&4294967295,C=P+(b<<23&4294967295|b>>>9),b=w+(C^P^N)+R[1]+2763975236&4294967295,w=C+(b<<4&4294967295|b>>>28),b=N+(w^C^P)+R[4]+1272893353&4294967295,N=w+(b<<11&4294967295|b>>>21),b=P+(N^w^C)+R[7]+4139469664&4294967295,P=N+(b<<16&4294967295|b>>>16),b=C+(P^N^w)+R[10]+3200236656&4294967295,C=P+(b<<23&4294967295|b>>>9),b=w+(C^P^N)+R[13]+681279174&4294967295,w=C+(b<<4&4294967295|b>>>28),b=N+(w^C^P)+R[0]+3936430074&4294967295,N=w+(b<<11&4294967295|b>>>21),b=P+(N^w^C)+R[3]+3572445317&4294967295,P=N+(b<<16&4294967295|b>>>16),b=C+(P^N^w)+R[6]+76029189&4294967295,C=P+(b<<23&4294967295|b>>>9),b=w+(C^P^N)+R[9]+3654602809&4294967295,w=C+(b<<4&4294967295|b>>>28),b=N+(w^C^P)+R[12]+3873151461&4294967295,N=w+(b<<11&4294967295|b>>>21),b=P+(N^w^C)+R[15]+530742520&4294967295,P=N+(b<<16&4294967295|b>>>16),b=C+(P^N^w)+R[2]+3299628645&4294967295,C=P+(b<<23&4294967295|b>>>9),b=w+(P^(C|~N))+R[0]+4096336452&4294967295,w=C+(b<<6&4294967295|b>>>26),b=N+(C^(w|~P))+R[7]+1126891415&4294967295,N=w+(b<<10&4294967295|b>>>22),b=P+(w^(N|~C))+R[14]+2878612391&4294967295,P=N+(b<<15&4294967295|b>>>17),b=C+(N^(P|~w))+R[5]+4237533241&4294967295,C=P+(b<<21&4294967295|b>>>11),b=w+(P^(C|~N))+R[12]+1700485571&4294967295,w=C+(b<<6&4294967295|b>>>26),b=N+(C^(w|~P))+R[3]+2399980690&4294967295,N=w+(b<<10&4294967295|b>>>22),b=P+(w^(N|~C))+R[10]+4293915773&4294967295,P=N+(b<<15&4294967295|b>>>17),b=C+(N^(P|~w))+R[1]+2240044497&4294967295,C=P+(b<<21&4294967295|b>>>11),b=w+(P^(C|~N))+R[8]+1873313359&4294967295,w=C+(b<<6&4294967295|b>>>26),b=N+(C^(w|~P))+R[15]+4264355552&4294967295,N=w+(b<<10&4294967295|b>>>22),b=P+(w^(N|~C))+R[6]+2734768916&4294967295,P=N+(b<<15&4294967295|b>>>17),b=C+(N^(P|~w))+R[13]+1309151649&4294967295,C=P+(b<<21&4294967295|b>>>11),b=w+(P^(C|~N))+R[4]+4149444226&4294967295,w=C+(b<<6&4294967295|b>>>26),b=N+(C^(w|~P))+R[11]+3174756917&4294967295,N=w+(b<<10&4294967295|b>>>22),b=P+(w^(N|~C))+R[2]+718787259&4294967295,P=N+(b<<15&4294967295|b>>>17),b=C+(N^(P|~w))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+N&4294967295}r.prototype.v=function(k,w){w===void 0&&(w=k.length);const C=w-this.blockSize,R=this.C;let P=this.h,N=0;for(;N<w;){if(P==0)for(;N<=C;)s(this,k,N),N+=this.blockSize;if(typeof k=="string"){for(;N<w;)if(R[P++]=k.charCodeAt(N++),P==this.blockSize){s(this,R),P=0;break}}else for(;N<w;)if(R[P++]=k[N++],P==this.blockSize){s(this,R),P=0;break}}this.h=P,this.o+=w},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;w=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=w&255,w/=256;for(this.v(k),k=Array(16),w=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)k[w++]=this.g[C]>>>R&255;return k};function i(k,w){var C=a;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=w(k)}function o(k,w){this.h=w;const C=[];let R=!0;for(let P=k.length-1;P>=0;P--){const N=k[P]|0;R&&N==w||(C[P]=N,R=!1)}this.g=C}var a={};function u(k){return-128<=k&&k<128?i(k,function(w){return new o([w|0],w<0?-1:0)}):new o([k|0],k<0?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(k<0)return I(c(-k));const w=[];let C=1;for(let R=0;k>=C;R++)w[R]=k/C|0,C*=4294967296;return new o(w,0)}function h(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return I(h(k.substring(1),w));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=c(Math.pow(w,8));let R=f;for(let N=0;N<k.length;N+=8){var P=Math.min(8,k.length-N);const b=parseInt(k.substring(N,N+P),w);P<8?(P=c(Math.pow(w,P)),R=R.j(P).add(c(b))):(R=R.j(C),R=R.add(c(b)))}return R}var f=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-I(this).m();let k=0,w=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);k+=(R>=0?R:4294967296+R)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(E(this))return"-"+I(this).toString(k);const w=c(Math.pow(k,6));var C=this;let R="";for(;;){const P=D(C,w).g;C=_(C,P.j(w));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=P,S(C))return N+R;for(;N.length<6;)N="0"+N;R=N+R}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(let w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=_(this,k),E(k)?-1:S(k)?0:1};function I(k){const w=k.g.length,C=[];for(let R=0;R<w;R++)C[R]=~k.g[R];return new o(C,~k.h).add(m)}t.abs=function(){return E(this)?I(this):this},t.add=function(k){const w=Math.max(this.g.length,k.g.length),C=[];let R=0;for(let P=0;P<=w;P++){let N=R+(this.i(P)&65535)+(k.i(P)&65535),b=(N>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);R=b>>>16,N&=65535,b&=65535,C[P]=b<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(k,w){return k.add(I(w))}t.j=function(k){if(S(this)||S(k))return f;if(E(this))return E(k)?I(this).j(I(k)):I(I(this).j(k));if(E(k))return I(this.j(I(k)));if(this.l(y)<0&&k.l(y)<0)return c(this.m()*k.m());const w=this.g.length+k.g.length,C=[];for(var R=0;R<2*w;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let P=0;P<k.g.length;P++){const N=this.i(R)>>>16,b=this.i(R)&65535,we=k.i(P)>>>16,qe=k.i(P)&65535;C[2*R+2*P]+=b*qe,v(C,2*R+2*P),C[2*R+2*P+1]+=N*qe,v(C,2*R+2*P+1),C[2*R+2*P+1]+=b*we,v(C,2*R+2*P+1),C[2*R+2*P+2]+=N*we,v(C,2*R+2*P+2)}for(k=0;k<w;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=w;k<2*w;k++)C[k]=0;return new o(C,0)};function v(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function x(k,w){this.g=k,this.h=w}function D(k,w){if(S(w))throw Error("division by zero");if(S(k))return new x(f,f);if(E(k))return w=D(I(k),w),new x(I(w.g),I(w.h));if(E(w))return w=D(k,I(w)),new x(I(w.g),w.h);if(k.g.length>30){if(E(k)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var C=m,R=w;R.l(k)<=0;)C=V(C),R=V(R);var P=U(C,1),N=U(R,1);for(R=U(R,2),C=U(C,2);!S(R);){var b=N.add(R);b.l(k)<=0&&(P=P.add(C),N=b),R=U(R,1),C=U(C,1)}return w=_(k,P.j(w)),new x(P,w)}for(P=f;k.l(w)>=0;){for(C=Math.max(1,Math.floor(k.m()/w.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),N=c(C),b=N.j(w);E(b)||b.l(k)>0;)C-=R,N=c(C),b=N.j(w);S(N)&&(N=m),P=P.add(N),k=_(k,b)}return new x(P,k)}t.B=function(k){return D(this,k).h},t.and=function(k){const w=Math.max(this.g.length,k.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)&k.i(R);return new o(C,this.h&k.h)},t.or=function(k){const w=Math.max(this.g.length,k.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)|k.i(R);return new o(C,this.h|k.h)},t.xor=function(k){const w=Math.max(this.g.length,k.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)^k.i(R);return new o(C,this.h^k.h)};function V(k){const w=k.g.length+1,C=[];for(let R=0;R<w;R++)C[R]=k.i(R)<<1|k.i(R-1)>>>31;return new o(C,k.h)}function U(k,w){const C=w>>5;w%=32;const R=k.g.length-C,P=[];for(let N=0;N<R;N++)P[N]=w>0?k.i(N+C)>>>w|k.i(N+C+1)<<32-w:k.i(N+C);return new o(P,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,b1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ls=o}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var Xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P1,ea,N1,Su,Of,D1,O1,L1;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xl=="object"&&Xl];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var g=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var O=l[T];if(!(O in g))break e;g=g[O]}l=l[l.length-1],T=g[l],d=d(T),d!=T&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(d){var g=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&g.push([T,d[T]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,g){return l.call.apply(l.bind,arguments)}function c(l,d,g){return c=u,c.apply(null,arguments)}function h(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function f(l,d){function g(){}g.prototype=d.prototype,l.Z=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(T,O,L){for(var H=Array(arguments.length-2),le=2;le<arguments.length;le++)H[le-2]=arguments[le];return d.prototype[O].apply(T,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function y(l){const d=l.length;if(d>0){const g=Array(d);for(let T=0;T<d;T++)g[T]=l[T];return g}return[]}function S(l,d){for(let T=1;T<arguments.length;T++){const O=arguments[T];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=l.length||0;const L=O.length||0;l.length=g+L;for(let H=0;H<L;H++)l[g+H]=O[H]}else l.push(O)}}class E{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function I(l){o.setTimeout(()=>{throw l},0)}function _(){var l=k;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class v{constructor(){this.h=this.g=null}add(d,g){const T=x.get();T.set(d,g),this.h?this.h.next=T:this.g=T,this.h=T}}var x=new E(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,U=!1,k=new v,w=()=>{const l=Promise.resolve(void 0);V=()=>{l.then(C)}};function C(){for(var l;l=_();){try{l.h.call(l.g)}catch(g){I(g)}var d=x;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,d),o.removeEventListener("test",g,d)}catch{}return l}();function b(l){return/^[\s\xa0]*$/.test(l)}function we(l,d){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}f(we,P),we.prototype.init=function(l,d){const g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),mt=0;function zt(l,d,g,T,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!T,this.ha=O,this.key=++mt,this.da=this.fa=!1}function W(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function J(l,d,g){for(const T in l)d.call(g,l[T],T,l)}function Q(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function ue(l){const d={};for(const g in l)d[g]=l[g];return d}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xt(l,d){let g,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(g in T)l[g]=T[g];for(let L=0;L<ae.length;L++)g=ae[L],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function Te(l){this.src=l,this.g={},this.h=0}Te.prototype.add=function(l,d,g,T,O){const L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);const H=Pe(l,d,T,O);return H>-1?(d=l[H],g||(d.fa=!1)):(d=new zt(d,this.src,L,!!T,O),d.fa=g,l.push(d)),d};function me(l,d){const g=d.type;if(g in l.g){var T=l.g[g],O=Array.prototype.indexOf.call(T,d,void 0),L;(L=O>=0)&&Array.prototype.splice.call(T,O,1),L&&(W(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Pe(l,d,g,T){for(let O=0;O<l.length;++O){const L=l[O];if(!L.da&&L.listener==d&&L.capture==!!g&&L.ha==T)return O}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),an={};function St(l,d,g,T,O){if(Array.isArray(d)){for(let L=0;L<d.length;L++)St(l,d[L],g,T,O);return null}return g=Ds(g),l&&l[qe]?l.J(d,g,a(T)?!!T.capture:!1,O):kr(l,d,g,!1,T,O)}function kr(l,d,g,T,O,L){if(!d)throw Error("Invalid event type");const H=a(O)?!!O.capture:!!O;let le=Ps(l);if(le||(l[Ge]=le=new Te(l)),g=le.add(d,g,T,H,L),g.proxy)return g;if(T=Dn(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)N||(O=H),O===void 0&&(O=!1),l.addEventListener(d.toString(),T,O);else if(l.attachEvent)l.attachEvent(vi(d.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Dn(){function l(g){return d.call(l.src,l.listener,g)}const d=Io;return l}function Ar(l,d,g,T,O){if(Array.isArray(d))for(var L=0;L<d.length;L++)Ar(l,d[L],g,T,O);else T=a(T)?!!T.capture:!!T,g=Ds(g),l&&l[qe]?(l=l.i,L=String(d).toString(),L in l.g&&(d=l.g[L],g=Pe(d,g,T,O),g>-1&&(W(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete l.g[L],l.h--)))):l&&(l=Ps(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Pe(d,g,T,O)),(g=l>-1?d[l]:null)&&Lt(g))}function Lt(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[qe])me(d.i,l);else{var g=l.type,T=l.proxy;d.removeEventListener?d.removeEventListener(g,T,l.capture):d.detachEvent?d.detachEvent(vi(g),T):d.addListener&&d.removeListener&&d.removeListener(T),(g=Ps(d))?(me(g,l),g.h==0&&(g.src=null,d[Ge]=null)):W(l)}}}function vi(l){return l in an?an[l]:an[l]="on"+l}function Io(l,d){if(l.da)l=!0;else{d=new we(d,this);const g=l.listener,T=l.ha||l.src;l.fa&&Lt(l),l=g.call(T,d)}return l}function Ps(l){return l=l[Ge],l instanceof Te?l:null}var Ns="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ds(l){return typeof l=="function"?l:(l[Ns]||(l[Ns]=function(d){return l.handleEvent(d)}),l[Ns])}function Je(){R.call(this),this.i=new Te(this),this.M=this,this.G=null}f(Je,R),Je.prototype[qe]=!0,Je.prototype.removeEventListener=function(l,d,g,T){Ar(this,l,d,g,T)};function Ze(l,d){var g,T=l.G;if(T)for(g=[];T;T=T.G)g.push(T);if(l=l.M,T=d.type||d,typeof d=="string")d=new P(d,l);else if(d instanceof P)d.target=d.target||l;else{var O=d;d=new P(T,l),xt(d,O)}O=!0;let L,H;if(g)for(H=g.length-1;H>=0;H--)L=d.g=g[H],O=Rr(L,T,!0,d)&&O;if(L=d.g=l,O=Rr(L,T,!0,d)&&O,O=Rr(L,T,!1,d)&&O,g)for(H=0;H<g.length;H++)L=d.g=g[H],O=Rr(L,T,!1,d)&&O}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const g=l.g[d];for(let T=0;T<g.length;T++)W(g[T]);delete l.g[d],l.h--}}this.G=null},Je.prototype.J=function(l,d,g,T){return this.i.add(String(l),d,!1,g,T)},Je.prototype.K=function(l,d,g,T){return this.i.add(String(l),d,!0,g,T)};function Rr(l,d,g,T){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let O=!0;for(let L=0;L<d.length;++L){const H=d[L];if(H&&!H.da&&H.capture==g){const le=H.listener,st=H.ha||H.src;H.fa&&me(l.i,H),O=le.call(st,T)!==!1&&O}}return O&&!T.defaultPrevented}function ko(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function br(l){l.g=ko(()=>{l.g=null,l.i&&(l.i=!1,br(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Ct extends R{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function En(l){R.call(this),this.h=l,this.g={}}f(En,R);var Os=[];function _i(l){J(l.g,function(d,g){this.g.hasOwnProperty(g)&&Lt(d)},l),l.g={}}En.prototype.N=function(){En.Z.N.call(this),_i(this)},En.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var M=o.JSON.stringify,$=o.JSON.parse,G=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function ie(){}function Ke(){}var lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ut(){P.call(this,"d")}f(ut,P);function It(){P.call(this,"c")}f(It,P);var ln={},On=null;function Ln(){return On=On||new Je}ln.Ia="serverreachability";function yl(l){P.call(this,ln.Ia,l)}f(yl,P);function Ls(l){const d=Ln();Ze(d,new yl(d))}ln.STAT_EVENT="statevent";function vl(l,d){P.call(this,ln.STAT_EVENT,l),this.stat=d}f(vl,P);function ct(l){const d=Ln();Ze(d,new vl(d,l))}ln.Ja="timingevent";function wi(l,d){P.call(this,ln.Ja,l),this.size=d}f(wi,P);function un(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function Vs(){this.g=!0}Vs.prototype.ua=function(){this.g=!1};function vh(l,d,g,T,O,L){l.info(function(){if(l.g)if(L){var H="",le=L.split("&");for(let Ee=0;Ee<le.length;Ee++){var st=le[Ee].split("=");if(st.length>1){const ht=st[0];st=st[1];const Mn=ht.split("_");H=Mn.length>=2&&Mn[1]=="type"?H+(ht+"="+st+"&"):H+(ht+"=redacted&")}}}else H=null;else H=L;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+d+`
`+g+`
`+H})}function _h(l,d,g,T,O,L,H){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+d+`
`+g+`
`+L+" "+H})}function Pr(l,d,g,T){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+_l(l,g)+(T?" "+T:"")})}function wh(l,d){l.info(function(){return"TIMEOUT: "+d})}Vs.prototype.info=function(){};function _l(l,d){if(!l.g)return d;if(!d)return null;try{const L=JSON.parse(d);if(L){for(l=0;l<L.length;l++)if(Array.isArray(L[l])){var g=L[l];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var O=T[0];if(O!="noop"&&O!="stop"&&O!="close")for(let H=1;H<T.length;H++)T[H]=""}}}}return M(L)}catch{return d}}var Ei={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},El;function Ti(){}f(Ti,ie),Ti.prototype.g=function(){return new XMLHttpRequest},El=new Ti;function B(l){return encodeURIComponent(String(l))}function K(l){var d=1;l=l.split(":");const g=[];for(;d>0&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function oe(l,d,g,T){this.j=l,this.i=d,this.l=g,this.S=T||1,this.V=new En(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var Ne={},Le={};function Ms(l,d,g){l.M=1,l.A=xl(Vn(d)),l.u=g,l.R=!0,rr(l,null)}function rr(l,d){l.F=Date.now(),Tl(l),l.B=Vn(l.A);var g=l.B,T=l.S;Array.isArray(T)||(T=[String(T)]),Rg(g.i,"t",T),l.C=0,g=l.j.L,l.h=new pe,l.g=Gg(l.j,g?d:null,!l.u),l.P>0&&(l.O=new Ct(c(l.Y,l,l.g),l.P)),d=l.V,g=l.g,T=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(Os[0]=O.toString()),O=Os);for(let L=0;L<O.length;L++){const H=St(g,O[L],T||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=l.J?ue(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Ls(),vh(l.i,l.v,l.B,l.l,l.S,l.u)}oe.prototype.ba=function(l){l=l.target;const d=this.O;d&&Or(l)==3?d.j():this.Y(l)},oe.prototype.Y=function(l){try{if(l==this.g)e:{const le=Or(this.g),st=this.g.ya(),Ee=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||Vg(this.g)))){this.K||le!=4||st==7||(st==8||Ee<=0?Ls(3):Ls(2)),Th(this);var d=this.g.ca();this.X=d;var g=Eh(this);if(this.o=d==200,_h(this.i,this.v,this.B,this.l,this.S,le,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,O=this.g;if((T=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(T)){var L=T;break t}}L=null}if(l=L)Pr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xh(this,l);else{this.o=!1,this.m=3,ct(12),js(this),Ao(this);break e}}if(this.R){l=!0;let ht;for(;!this.K&&this.C<g.length;)if(ht=mS(this,g),ht==Le){le==4&&(this.m=4,ct(14),l=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ne){this.m=4,ct(15),Pr(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else Pr(this.i,this.l,ht,null),xh(this,ht);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||g.length!=0||this.h.h||(this.m=1,ct(16),l=!1),this.o=this.o&&l,!l)Pr(this.i,this.l,g,"[Invalid Chunked Response]"),js(this),Ao(this);else if(g.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Ph(H),H.P=!0,ct(11))}}else Pr(this.i,this.l,g,null),xh(this,g);le==4&&js(this),this.o&&!this.K&&(le==4?$g(this.j,this):(this.o=!1,Tl(this)))}else RS(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),js(this),Ao(this)}}}catch{}finally{}};function Eh(l){if(!yg(l))return l.g.la();const d=Vg(l.g);if(d==="")return"";let g="";const T=d.length,O=Or(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return js(l),Ao(l),"";l.h.i=new o.TextDecoder}for(let L=0;L<T;L++)l.h.h=!0,g+=l.h.i.decode(d[L],{stream:!(O&&L==T-1)});return d.length=0,l.h.g+=g,l.C=0,l.h.g}function yg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function mS(l,d){var g=l.C,T=d.indexOf(`
`,g);return T==-1?Le:(g=Number(d.substring(g,T)),isNaN(g)?Ne:(T+=1,T+g>d.length?Le:(d=d.slice(T,T+g),l.C=T+g,d)))}oe.prototype.cancel=function(){this.K=!0,js(this)};function Tl(l){l.T=Date.now()+l.H,vg(l,l.H)}function vg(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=un(c(l.aa,l),d)}function Th(l){l.D&&(o.clearTimeout(l.D),l.D=null)}oe.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(wh(this.i,this.B),this.M!=2&&(Ls(),ct(17)),js(this),this.m=2,Ao(this)):vg(this,this.T-l)};function Ao(l){l.j.I==0||l.K||$g(l.j,l)}function js(l){Th(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,_i(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function xh(l,d){try{var g=l.j;if(g.I!=0&&(g.g==l||Sh(g.h,l))){if(!l.L&&Sh(g.h,l)&&g.I==3){try{var T=g.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)Al(g),Il(g);else break e;bh(g),ct(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=un(c(g.Va,g),6e3));Eg(g.h)<=1&&g.ta&&(g.ta=void 0)}else Us(g,11)}else if((l.L||g.g==l)&&Al(g),!b(d))for(O=g.Ba.g.parse(d),d=0;d<O.length;d++){let Ee=O[d];const ht=Ee[0];if(!(ht<=g.K))if(g.K=ht,Ee=Ee[1],g.I==2)if(Ee[0]=="c"){g.M=Ee[1],g.ba=Ee[2];const Mn=Ee[3];Mn!=null&&(g.ka=Mn,g.j.info("VER="+g.ka));const zs=Ee[4];zs!=null&&(g.za=zs,g.j.info("SVER="+g.za));const Lr=Ee[5];Lr!=null&&typeof Lr=="number"&&Lr>0&&(T=1.5*Lr,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const Vr=l.g;if(Vr){const bl=Vr.g?Vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var L=T.h;L.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ch(L,L.h),L.h=null))}if(T.G){const Nh=Vr.g?Vr.g.getResponseHeader("X-HTTP-Session-Id"):null;Nh&&(T.wa=Nh,ke(T.J,T.G,Nh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var H=l;if(T.na=qg(T,T.L?T.ba:null,T.W),H.L){Tg(T.h,H);var le=H,st=T.O;st&&(le.H=st),le.D&&(Th(le),Tl(le)),T.g=H}else zg(T);g.i.length>0&&kl(g)}else Ee[0]!="stop"&&Ee[0]!="close"||Us(g,7);else g.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Us(g,7):Rh(g):Ee[0]!="noop"&&g.l&&g.l.qa(Ee),g.A=0)}}Ls(4)}catch{}}var gS=class{constructor(l,d){this.g=l,this.map=d}};function _g(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Eg(l){return l.h?1:l.g?l.g.size:0}function Sh(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Ch(l,d){l.g?l.g.add(d):l.h=d}function Tg(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}_g.prototype.cancel=function(){if(this.i=xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function xg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.G);return d}return y(l.i)}var Sg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yS(l,d){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const T=l[g].indexOf("=");let O,L=null;T>=0?(O=l[g].substring(0,T),L=l[g].substring(T+1)):O=l[g],d(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Nr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof Nr?(this.l=l.l,Ro(this,l.j),this.o=l.o,this.g=l.g,bo(this,l.u),this.h=l.h,Ih(this,bg(l.i)),this.m=l.m):l&&(d=String(l).match(Sg))?(this.l=!1,Ro(this,d[1]||"",!0),this.o=Po(d[2]||""),this.g=Po(d[3]||"",!0),bo(this,d[4]),this.h=Po(d[5]||"",!0),Ih(this,d[6]||"",!0),this.m=Po(d[7]||"")):(this.l=!1,this.i=new Do(null,this.l))}Nr.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(No(d,Cg,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(No(d,Cg,!0),"@"),l.push(B(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(No(g,g.charAt(0)=="/"?wS:_S,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",No(g,TS)),l.join("")},Nr.prototype.resolve=function(l){const d=Vn(this);let g=!!l.j;g?Ro(d,l.j):g=!!l.o,g?d.o=l.o:g=!!l.g,g?d.g=l.g:g=l.u!=null;var T=l.h;if(g)bo(d,l.u);else if(g=!!l.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var O=d.h.lastIndexOf("/");O!=-1&&(T=d.h.slice(0,O+1)+T)}if(O=T,O==".."||O==".")T="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){T=O.lastIndexOf("/",0)==0,O=O.split("/");const L=[];for(let H=0;H<O.length;){const le=O[H++];le=="."?T&&H==O.length&&L.push(""):le==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),T&&H==O.length&&L.push("")):(L.push(le),T=!0)}T=L.join("/")}else T=O}return g?d.h=T:g=l.i.toString()!=="",g?Ih(d,bg(l.i)):g=!!l.m,g&&(d.m=l.m),d};function Vn(l){return new Nr(l)}function Ro(l,d,g){l.j=g?Po(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function bo(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function Ih(l,d,g){d instanceof Do?(l.i=d,xS(l.i,l.l)):(g||(d=No(d,ES)),l.i=new Do(d,l.l))}function ke(l,d,g){l.i.set(d,g)}function xl(l){return ke(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Po(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function No(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,vS),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function vS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Cg=/[#\/\?@]/g,_S=/[#\?:]/g,wS=/[#\?]/g,ES=/[#\?@]/g,TS=/#/g;function Do(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Fs(l){l.g||(l.g=new Map,l.h=0,l.i&&yS(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}t=Do.prototype,t.add=function(l,d){Fs(this),this.i=null,l=xi(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function Ig(l,d){Fs(l),d=xi(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function kg(l,d){return Fs(l),d=xi(l,d),l.g.has(d)}t.forEach=function(l,d){Fs(this),this.g.forEach(function(g,T){g.forEach(function(O){l.call(d,O,T,this)},this)},this)};function Ag(l,d){Fs(l);let g=[];if(typeof d=="string")kg(l,d)&&(g=g.concat(l.g.get(xi(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)g=g.concat(l[d]);return g}t.set=function(l,d){return Fs(this),this.i=null,l=xi(this,l),kg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=Ag(this,l),l.length>0?String(l[0]):d):d};function Rg(l,d,g){Ig(l,d),g.length>0&&(l.i=null,l.g.set(xi(l,d),y(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var g=d[T];const O=B(g);g=Ag(this,g);for(let L=0;L<g.length;L++){let H=O;g[L]!==""&&(H+="="+B(g[L])),l.push(H)}}return this.i=l.join("&")};function bg(l){const d=new Do;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function xi(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function xS(l,d){d&&!l.j&&(Fs(l),l.i=null,l.g.forEach(function(g,T){const O=T.toLowerCase();T!=O&&(Ig(this,T),Rg(this,O,g))},l)),l.j=d}function SS(l,d){const g=new Vs;if(o.Image){const T=new Image;T.onload=h(Dr,g,"TestLoadImage: loaded",!0,d,T),T.onerror=h(Dr,g,"TestLoadImage: error",!1,d,T),T.onabort=h(Dr,g,"TestLoadImage: abort",!1,d,T),T.ontimeout=h(Dr,g,"TestLoadImage: timeout",!1,d,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else d(!1)}function CS(l,d){const g=new Vs,T=new AbortController,O=setTimeout(()=>{T.abort(),Dr(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:T.signal}).then(L=>{clearTimeout(O),L.ok?Dr(g,"TestPingServer: ok",!0,d):Dr(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Dr(g,"TestPingServer: error",!1,d)})}function Dr(l,d,g,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(g)}catch{}}function IS(){this.g=new G}function kh(l){this.i=l.Sb||null,this.h=l.ab||!1}f(kh,ie),kh.prototype.g=function(){return new Sl(this.i,this.h)};function Sl(l,d){Je.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Sl,Je),t=Sl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Lo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Oo(this):Lo(this),this.readyState==3&&Pg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Oo(this))},t.Na=function(l){this.g&&(this.response=l,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Lo(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Lo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ng(l){let d="";return J(l,function(g,T){d+=T,d+=":",d+=g,d+=`\r
`}),d}function Ah(l,d,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Ng(g),typeof l=="string"?g!=null&&B(g):ke(l,d,g))}function ze(l){Je.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ze,Je);var kS=/^https?$/i,AS=["POST","PUT"];t=ze.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():El.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(L){Dg(this,L);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)g.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())g.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(AS,d,void 0)>=0)||T||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of g)this.g.setRequestHeader(L,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(L){Dg(this,L)}};function Dg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,Og(l),Cl(l)}function Og(l){l.A||(l.A=!0,Ze(l,"complete"),Ze(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Ze(this,"complete"),Ze(this,"abort"),Cl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cl(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Lg(this):this.Xa())},t.Xa=function(){Lg(this)};function Lg(l){if(l.h&&typeof i<"u"){if(l.v&&Or(l)==4)setTimeout(l.Ca.bind(l),0);else if(Ze(l,"readystatechange"),Or(l)==4){l.h=!1;try{const L=l.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var T;if(T=L===0){let H=String(l.D).match(Sg)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),T=!kS.test(H?H.toLowerCase():"")}g=T}if(g)Ze(l,"complete"),Ze(l,"success");else{l.o=6;try{var O=Or(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",Og(l)}}finally{Cl(l)}}}}function Cl(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,d||Ze(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Or(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),$(d)}};function Vg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function RS(l){const d={};l=(l.g&&Or(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(b(l[T]))continue;var g=K(l[T]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=d[O]||[];d[O]=L,L.push(g)}Q(d,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function Mg(l){this.za=0,this.i=[],this.j=new Vs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vo("baseRetryDelayMs",5e3,l),this.Za=Vo("retryDelaySeedMs",1e4,l),this.Ta=Vo("forwardChannelMaxRetries",2,l),this.va=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new _g(l&&l.concurrentRequestLimit),this.Ba=new IS,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Mg.prototype,t.ka=8,t.I=1,t.connect=function(l,d,g,T){ct(0),this.W=l,this.H=d||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=qg(this,null,this.W),kl(this)};function Rh(l){if(jg(l),l.I==3){var d=l.V++,g=Vn(l.J);if(ke(g,"SID",l.M),ke(g,"RID",d),ke(g,"TYPE","terminate"),Mo(l,g),d=new oe(l,l.j,d),d.M=2,d.A=xl(Vn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=d.A,g=!0),g||(d.g=Gg(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Tl(d)}Wg(l)}function Il(l){l.g&&(Ph(l),l.g.cancel(),l.g=null)}function jg(l){Il(l),l.v&&(o.clearTimeout(l.v),l.v=null),Al(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function kl(l){if(!wg(l.h)&&!l.m){l.m=!0;var d=l.Ea;V||w(),U||(V(),U=!0),k.add(d,l),l.D=0}}function bS(l,d){return Eg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=un(c(l.Ea,l,d),Hg(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const O=new oe(this,this.j,l);let L=this.o;if(this.U&&(L?(L=ue(L),xt(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Ug(this,O,d),g=Vn(this.J),ke(g,"RID",l),ke(g,"CVER",22),this.G&&ke(g,"X-HTTP-Session-Id",this.G),Mo(this,g),L&&(this.R?d="headers="+B(Ng(L))+"&"+d:this.u&&Ah(g,this.u,L)),Ch(this.h,O),this.Ra&&ke(g,"TYPE","init"),this.S?(ke(g,"$req",d),ke(g,"SID","null"),O.U=!0,Ms(O,g,null)):Ms(O,g,d),this.I=2}}else this.I==3&&(l?Fg(this,l):this.i.length==0||wg(this.h)||Fg(this))};function Fg(l,d){var g;d?g=d.l:g=l.V++;const T=Vn(l.J);ke(T,"SID",l.M),ke(T,"RID",g),ke(T,"AID",l.K),Mo(l,T),l.u&&l.o&&Ah(T,l.u,l.o),g=new oe(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),d&&(l.i=d.G.concat(l.i)),d=Ug(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Ch(l.h,g),Ms(g,T,d)}function Mo(l,d){l.H&&J(l.H,function(g,T){ke(d,T,g)}),l.l&&J({},function(g,T){ke(d,T,g)})}function Ug(l,d,g){g=Math.min(l.i.length,g);const T=l.l?c(l.l.Ka,l.l,l):null;e:{var O=l.i;let le=-1;for(;;){const st=["count="+g];le==-1?g>0?(le=O[0].g,st.push("ofs="+le)):le=0:st.push("ofs="+le);let Ee=!0;for(let ht=0;ht<g;ht++){var L=O[ht].g;const Mn=O[ht].map;if(L-=le,L<0)le=Math.max(0,O[ht].g-100),Ee=!1;else try{L="req"+L+"_"||"";try{var H=Mn instanceof Map?Mn:Object.entries(Mn);for(const[zs,Lr]of H){let Vr=Lr;a(Lr)&&(Vr=M(Lr)),st.push(L+zs+"="+encodeURIComponent(Vr))}}catch(zs){throw st.push(L+"type="+encodeURIComponent("_badmap")),zs}}catch{T&&T(Mn)}}if(Ee){H=st.join("&");break e}}H=void 0}return l=l.i.splice(0,g),d.G=l,H}function zg(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;V||w(),U||(V(),U=!0),k.add(d,l),l.A=0}}function bh(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=un(c(l.Da,l),Hg(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Bg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=un(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),Il(this),Bg(this))};function Ph(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Bg(l){l.g=new oe(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=Vn(l.na);ke(d,"RID","rpc"),ke(d,"SID",l.M),ke(d,"AID",l.K),ke(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&ke(d,"TO",l.ia),ke(d,"TYPE","xmlhttp"),Mo(l,d),l.u&&l.o&&Ah(d,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=xl(Vn(d)),g.u=null,g.R=!0,rr(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Il(this),bh(this),ct(19))};function Al(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function $g(l,d){var g=null;if(l.g==d){Al(l),Ph(l),l.g=null;var T=2}else if(Sh(l.h,d))g=d.G,Tg(l.h,d),T=1;else return;if(l.I!=0){if(d.o)if(T==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var O=l.D;T=Ln(),Ze(T,new wi(T,g)),kl(l)}else zg(l);else if(O=d.m,O==3||O==0&&d.X>0||!(T==1&&bS(l,d)||T==2&&bh(l)))switch(g&&g.length>0&&(d=l.h,d.i=d.i.concat(g)),O){case 1:Us(l,5);break;case 4:Us(l,10);break;case 3:Us(l,6);break;default:Us(l,2)}}}function Hg(l,d){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*d}function Us(l,d){if(l.j.info("Error code "+d),d==2){var g=c(l.bb,l),T=l.Ua;const O=!T;T=new Nr(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ro(T,"https"),xl(T),O?SS(T.toString(),g):CS(T.toString(),g)}else ct(2);l.I=0,l.l&&l.l.pa(d),Wg(l),jg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Wg(l){if(l.I=0,l.ja=[],l.l){const d=xg(l.h);(d.length!=0||l.i.length!=0)&&(S(l.ja,d),S(l.ja,l.i),l.h.i.length=0,y(l.i),l.i.length=0),l.l.oa()}}function qg(l,d,g){var T=g instanceof Nr?Vn(g):new Nr(g);if(T.g!="")d&&(T.g=d+"."+T.g),bo(T,T.u);else{var O=o.location;T=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;const L=new Nr(null);T&&Ro(L,T),d&&(L.g=d),O&&bo(L,O),g&&(L.h=g),T=L}return g=l.G,d=l.wa,g&&d&&ke(T,g,d),ke(T,"VER",l.ka),Mo(l,T),T}function Gg(l,d,g){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new ze(new kh({ab:g})):new ze(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kg(){}t=Kg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Rl(){}Rl.prototype.g=function(l,d){return new Xt(l,d)};function Xt(l,d){Je.call(this),this.g=new Mg(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!b(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Si(this)}f(Xt,Je),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Rh(this.g)},Xt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=M(l),l=g);d.i.push(new gS(d.Ya++,l)),d.I==3&&kl(d)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Rh(this.g),delete this.g,Xt.Z.N.call(this)};function Yg(l){ut.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}f(Yg,ut);function Xg(){It.call(this),this.status=1}f(Xg,It);function Si(l){this.g=l}f(Si,Kg),Si.prototype.ra=function(){Ze(this.g,"a")},Si.prototype.qa=function(l){Ze(this.g,new Yg(l))},Si.prototype.pa=function(l){Ze(this.g,new Xg)},Si.prototype.oa=function(){Ze(this.g,"b")},Rl.prototype.createWebChannel=Rl.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,L1=function(){return new Rl},O1=function(){return Ln()},D1=ln,Of={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ei.NO_ERROR=0,Ei.TIMEOUT=8,Ei.HTTP_ERROR=6,Su=Ei,wl.COMPLETE="complete",N1=wl,Ke.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",Je.prototype.listen=Je.prototype.J,ea=Ke,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,P1=ze}).apply(typeof Xl<"u"?Xl:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Gv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new um("@firebase/firestore");function Ii(){return ui.logLevel}function Y(t,...e){if(ui.logLevel<=he.DEBUG){const n=e.map(_m);ui.debug(`Firestore (${_o}): ${t}`,...n)}}function Er(t,...e){if(ui.logLevel<=he.ERROR){const n=e.map(_m);ui.error(`Firestore (${_o}): ${t}`,...n)}}function oo(t,...e){if(ui.logLevel<=he.WARN){const n=e.map(_m);ui.warn(`Firestore (${_o}): ${t}`,...n)}}function _m(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,V1(t,r,n)}function V1(t,e,n){let r=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Er(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||V1(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class DN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new M1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new bt(e)}}class LN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new LN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function Lf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pd(s)===pd(i)?de(s,i):pd(s)?1:-1}return de(t.length,e.length)}const FN=55296,UN=57343;function pd(t){const e=t.charCodeAt(0);return e>=FN&&e<=UN}function ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class Un{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Un?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Un.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return de(e.length,n.length)}static compareSegments(e,n){const r=Un.isNumericId(e),s=Un.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Un.extractNumericId(e).compare(Un.extractNumericId(n)):Lf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class Se extends Un{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Un{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return zN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new vt([Yv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Se.fromString(e))}static fromName(e){return new Z(Se.fromString(e).popFirst(5))}static empty(){return new Z(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BN(t,e,n,r){if(e===!0&&r===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xv(t){if(!Z.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qv(t){if(Z.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function F1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gc(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ll(t,e){if(!F1(t))throw new q(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=-62135596800,Zv=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Zv);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jv)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zv}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ll(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:rt("string",Re._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Re(0,0))}static max(){return new ne(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function $N(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new gs(s,Z.empty(),e)}function HN(t){return new gs(t.readTime,t.key,za)}class gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gs(ne.min(),Z.empty(),za)}static max(){return new gs(ne.max(),Z.empty(),za)}}function WN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==qN)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function KN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-1;function Yc(t){return t==null}function cc(t){return t===0&&1/t==-1/0}function YN(t){return typeof t=="number"&&Number.isInteger(t)&&!cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="";function XN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=e0(e)),e=QN(t.get(n),e);return e0(e)}function QN(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case U1:n+="";break;default:n+=i}}return n}function e0(t){return t+U1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??yt.RED,this.left=s??yt.EMPTY,this.right=i??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new yt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new en([])}unionWith(e){let n=new at(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B1("Invalid base64 string: "+i):i}}(e);return new Et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const JN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=JN.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="server_timestamp",H1="__type__",W1="__previous_value__",q1="__local_write_time__";function Tm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[H1])==null?void 0:r.stringValue)===$1}function Xc(t){const e=t.mapValue.fields[W1];return Tm(e)?Xc(e):e}function Ba(t){const e=ys(t.mapValue.fields[q1].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r,s,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const hc="(default)";class $a{constructor(e,n){this.projectId=e,this.database=n||hc}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database===hc}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="__type__",eD="__max__",Jl={mapValue:{}},K1="__vector__",dc="value";function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tm(t)?4:nD(t)?9007199254740991:tD(t)?10:11:ee(28295,{value:t})}function Jn(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ba(t).isEqual(Ba(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ys(s.timestampValue),a=ys(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?cc(o)===cc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(t0(o)!==t0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Jn(o[u],a[u])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function Ha(t,e){return(t.values||[]).find(n=>Jn(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),u=Ye(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return r0(t.timestampValue,e.timestampValue);case 4:return r0(Ba(t),Ba(e));case 5:return Lf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=vs(i),u=vs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=de(a[c],u[c]);if(h!==0)return h}return de(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=de(Ye(i.latitude),Ye(o.latitude));return a!==0?a:de(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return s0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,S,E;const a=i.fields||{},u=o.fields||{},c=(m=a[dc])==null?void 0:m.arrayValue,h=(y=u[dc])==null?void 0:y.arrayValue,f=de(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return f!==0?f:s0(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Jl.mapValue&&o===Jl.mapValue)return 0;if(i===Jl.mapValue)return 1;if(o===Jl.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=Lf(u[f],h[f]);if(m!==0)return m;const y=lo(a[u[f]],c[h[f]]);if(y!==0)return y}return de(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{he:n})}}function r0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=ys(t),r=ys(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function s0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=lo(n[s],r[s]);if(i)return i}return de(n.length,r.length)}function uo(t){return Vf(t)}function Vf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ys(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Vf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Vf(n.fields[o])}`;return s+"}"}(t.mapValue):ee(61005,{value:t})}function Cu(t){switch(_s(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xc(t);return e?16+Cu(e):16;case 5:return 2*t.stringValue.length;case 6:return vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Cu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ks(r.fields,(i,o)=>{s+=i.length+Cu(o)}),s}(t.mapValue);default:throw ee(13486,{value:t})}}function i0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mf(t){return!!t&&"integerValue"in t}function xm(t){return!!t&&"arrayValue"in t}function o0(t){return!!t&&"nullValue"in t}function a0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function tD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[G1])==null?void 0:r.stringValue)===K1}function ga(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return{...t}}function nD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===eD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=vt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Iu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ks(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ht(ga(this.value))}}function Y1(t){const e=[];return ks(t.fields,(n,r)=>{const s=new vt([n]);if(Iu(r)){const i=Y1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,ne.min(),ne.min(),ne.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,s){return new Nt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new Nt(e,2,n,ne.min(),ne.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,ne.min(),ne.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.position=e,this.inclusive=n}}function l0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function u0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function rD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{}class nt extends X1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iD(e,n,r):n==="array-contains"?new lD(e,r):n==="in"?new uD(e,r):n==="not-in"?new cD(e,r):n==="array-contains-any"?new hD(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oD(e,r):new aD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lo(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends X1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return Q1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Q1(t){return t.op==="and"}function J1(t){return sD(t)&&Q1(t)}function sD(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function jf(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(J1(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(n=>jf(n)).join(",");return`${t.op}(${e})`}}function Z1(t,e){return t instanceof nt?function(r,s){return s instanceof nt&&r.op===s.op&&r.field.isEqual(s.field)&&Jn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Z1(o,s.filters[a]),!0):!1}(t,e):void ee(19439)}function eT(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(eT).join(" ,")+"}"}(t):"Filter"}class iD extends nt{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class oD extends nt{constructor(e,n){super(e,"in",n),this.keys=tT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aD extends nt{constructor(e,n){super(e,"not-in",n),this.keys=tT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class lD extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&Ha(n.arrayValue,this.value)}}class uD extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ha(this.value.arrayValue,n)}}class cD extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ha(this.value.arrayValue,n)}}class hD extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function c0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new dD(t,e,n,r,s,i,o)}function Sm(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Te=n}return e.Te}function Cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Z1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!u0(t.startAt,e.startAt)&&u0(t.endAt,e.endAt)}function Ff(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fD(t,e,n,r,s,i,o,a){return new To(t,e,n,r,s,i,o,a)}function Qc(t){return new To(t)}function h0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nT(t){return t.collectionGroup!==null}function ya(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new at(vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wa(i,r))}),n.has(vt.keyField().canonicalString())||e.Ie.push(new Wa(vt.keyField(),r))}return e.Ie}function Kn(t){const e=re(t);return e.Ee||(e.Ee=pD(e,ya(t))),e.Ee}function pD(t,e){if(t.limitType==="F")return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new fc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fc(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uf(t,e){const n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zf(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jc(t,e){return Cm(Kn(t),Kn(e))&&t.limitType===e.limitType}function rT(t){return`${Sm(Kn(t))}|lt:${t.limitType}`}function ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>eT(s)).join(", ")}]`),Yc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uo(s)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function Zc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ya(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=l0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ya(r),s)||r.endAt&&!function(o,a,u){const c=l0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ya(r),s))}(t,e)}function mD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sT(t){return(e,n)=>{let r=!1;for(const s of ya(t)){const i=gD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function gD(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?lo(u,c):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return z1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Ue(Z.comparator);function Tr(){return yD}const iT=new Ue(Z.comparator);function ta(...t){let e=iT;for(const n of t)e=e.insert(n.key,n);return e}function oT(t){let e=iT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ks(){return va()}function aT(){return va()}function va(){return new gi(t=>t.toString(),(t,e)=>t.isEqual(e))}const vD=new Ue(Z.comparator),_D=new at(Z.comparator);function fe(...t){let e=_D;for(const n of t)e=e.add(n);return e}const wD=new at(de);function ED(){return wD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function lT(t){return{integerValue:""+t}}function uT(t,e){return YN(e)?lT(e):Im(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this._=void 0}}function TD(t,e,n){return t instanceof pc?function(s,i){const o={fields:{[H1]:{stringValue:$1},[q1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tm(i)&&(i=Xc(i)),i&&(o.fields[W1]=i),{mapValue:o}}(n,e):t instanceof qa?hT(t,e):t instanceof Ga?dT(t,e):function(s,i){const o=cT(s,i),a=d0(o)+d0(s.Ae);return Mf(o)&&Mf(s.Ae)?lT(a):Im(s.serializer,a)}(t,e)}function xD(t,e,n){return t instanceof qa?hT(t,e):t instanceof Ga?dT(t,e):n}function cT(t,e){return t instanceof Ka?function(r){return Mf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pc extends eh{}class qa extends eh{constructor(e){super(),this.elements=e}}function hT(t,e){const n=fT(e);for(const r of t.elements)n.some(s=>Jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ga extends eh{constructor(e){super(),this.elements=e}}function dT(t,e){let n=fT(e);for(const r of t.elements)n=n.filter(s=>!Jn(s,r));return{arrayValue:{values:n}}}class Ka extends eh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function d0(t){return Ye(t.integerValue||t.doubleValue)}function fT(t){return xm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n){this.field=e,this.transform=n}}function CD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof qa&&s instanceof qa||r instanceof Ga&&s instanceof Ga?ao(r.elements,s.elements,Jn):r instanceof Ka&&s instanceof Ka?Jn(r.Ae,s.Ae):r instanceof pc&&s instanceof pc}(t.transform,e.transform)}class ID{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class th{}function pT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new km(t.key,yn.none()):new ul(t.key,t.data,yn.none());{const n=t.data,r=Ht.empty();let s=new at(vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new As(t.key,r,new en(s.toArray()),yn.none())}}function kD(t,e,n){t instanceof ul?function(s,i,o){const a=s.value.clone(),u=p0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof As?function(s,i,o){if(!ku(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=p0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(mT(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof ul?function(i,o,a,u){if(!ku(i.precondition,o))return a;const c=i.value.clone(),h=m0(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof As?function(i,o,a,u){if(!ku(i.precondition,o))return a;const c=m0(i.fieldTransforms,u,o),h=o.data;return h.setAll(mT(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return ku(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cT(r.transform,s||null);i!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,i))}return n||null}function f0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ao(r,s,(i,o)=>CD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ul extends th{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends th{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function p0(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,xD(o,a,n[s]))}return r}function m0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,TD(i,o,e))}return r}class km extends th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RD extends th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=pT(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>f0(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>f0(n,r))}}class Am{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return vD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Am(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ge;function DD(t){switch(t){case j.OK:return ee(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function gT(t){if(t===void 0)return Er("GRPC error has no .code"),j.UNKNOWN;switch(t){case et.OK:return j.OK;case et.CANCELLED:return j.CANCELLED;case et.UNKNOWN:return j.UNKNOWN;case et.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case et.INTERNAL:return j.INTERNAL;case et.UNAVAILABLE:return j.UNAVAILABLE;case et.UNAUTHENTICATED:return j.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case et.NOT_FOUND:return j.NOT_FOUND;case et.ALREADY_EXISTS:return j.ALREADY_EXISTS;case et.PERMISSION_DENIED:return j.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case et.ABORTED:return j.ABORTED;case et.OUT_OF_RANGE:return j.OUT_OF_RANGE;case et.UNIMPLEMENTED:return j.UNIMPLEMENTED;case et.DATA_LOSS:return j.DATA_LOSS;default:return ee(39323,{code:t})}}(ge=et||(et={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new ls([4294967295,4294967295],0);function g0(t){const e=OD().encode(t),n=new b1;return n.update(e),new Uint8Array(n.digest())}function y0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ls([n,r],0),new ls([s,i],0)]}class Rm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(r<0)throw new na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ls.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ls.fromNumber(r)));return s.compare(LD)===1&&(s=new ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g0(e),[r,s]=y0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=g0(e),[r,s]=y0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nh(ne.min(),s,new Ue(de),Tr(),fe())}}class cl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cl(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class yT{constructor(e,n){this.targetId=e,this.Ce=n}}class vT{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class v0{constructor(){this.ve=0,this.Fe=_0(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),n=fe(),r=fe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee(38017,{changeType:i})}}),new cl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=_0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tr(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ue(de)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ff(i))if(r===0){const o=new Z(i.path);this.et(n,o,Nt.newNoDocument(o,ne.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=vs(r).toUint8Array()}catch(u){if(u instanceof B1)return oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Rm(o,s,i)}catch(u){return oo(u instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ff(a.target)){const u=new Z(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Nt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=fe();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new nh(e,n,this.Ye,this.je,r);return this.je=Tr(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ue(de),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new v0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new at(de),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new at(de),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new v0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zl(){return new Ue(Z.comparator)}function _0(){return new Ue(Z.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},jD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FD={and:"AND",or:"OR"};class UD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||Yc(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _T(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zD(t,e){return mc(t,e.toTimestamp())}function Yn(t){return ve(!!t,49232),ne.fromTimestamp(function(n){const r=ys(n);return new Re(r.seconds,r.nanos)}(t))}function bm(t,e){return $f(t,e).canonicalString()}function $f(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wT(t){const e=Se.fromString(t);return ve(CT(e),10190,{key:e.toString()}),e}function Hf(t,e){return bm(t.databaseId,e.path)}function md(t,e){const n=wT(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(TT(n))}function ET(t,e){return bm(t.databaseId,e)}function BD(t){const e=wT(t);return e.length===4?Se.emptyPath():TT(e)}function Wf(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TT(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w0(t,e,n){return{name:Hf(t,e),fields:n.value.mapValue.fields}}function $D(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(ve(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:gT(c.code);return new q(h,c.message||"")}(o);n=new vT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=md(t,r.document.name),i=Yn(r.document.updateTime),o=r.document.createTime?Yn(r.document.createTime):ne.min(),a=new Ht({mapValue:{fields:r.document.fields}}),u=Nt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Au(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=md(t,r.document),i=r.readTime?Yn(r.readTime):ne.min(),o=Nt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Au([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=md(t,r.document),i=r.removedTargetIds||[];n=new Au([],i,s,null)}else{if(!("filter"in e))return ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ND(s,i),a=r.targetId;n=new yT(a,o)}}return n}function HD(t,e){let n;if(e instanceof ul)n={update:w0(t,e.key,e.value)};else if(e instanceof km)n={delete:Hf(t,e.key)};else if(e instanceof As)n={update:w0(t,e.key,e.data),updateMask:ZD(e.fieldMask)};else{if(!(e instanceof RD))return ee(16599,{Vt:e.type});n={verify:Hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ka)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:zD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee(27497)}(t,e.precondition)),n}function WD(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Yn(s.updateTime):Yn(i);return o.isEqual(ne.min())&&(o=Yn(i)),new ID(o,s.transformResults||[])}(n,e))):[]}function qD(t,e){return{documents:[ET(t,e.path)]}}function GD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ET(t,s);const i=function(c){if(c.length!==0)return ST(Nn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Ai(m.field),direction:XD(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function KD(t){let e=BD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=xT(f);return m instanceof Nn&&J1(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(S){return new Wa(Ri(S.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Yc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,y=f.values||[];return new fc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new fc(y,m)}(n.endAt)),fD(e,s,o,i,a,"F",u,c)}function YD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ri(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ri(n.unaryFilter.field);return nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ri(n.unaryFilter.field);return nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ri(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>xT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function XD(t){return MD[t]}function QD(t){return jD[t]}function JD(t){return FD[t]}function Ai(t){return{fieldPath:t.canonicalString()}}function Ri(t){return vt.fromServerFormat(t.fieldPath)}function ST(t){return t instanceof nt?function(n){if(n.op==="=="){if(a0(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NAN"}};if(o0(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(a0(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NAN"}};if(o0(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ai(n.field),op:QD(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>ST(s));return r.length===1?r[0]:{compositeFilter:{op:JD(n.op),filters:r}}}(t):ee(54877,{filter:t})}function ZD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),a=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.yt=e}}function t4(t){const e=KD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.Cn=new r4}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(gs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class r4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new at(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new at(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IT=41943040;class Bt{static withCacheSize(e){return new Bt(e,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(IT,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new co(0)}static cr(){return new co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="LruGarbageCollector",s4=1048576;function x0([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class i4{constructor(e){this.Ir=e,this.buffer=new at(x0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();x0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class o4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(T0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?Y(T0,"Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.Vr(3e5)})}}class a4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Kc.ce);const r=new i4(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(E0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ii()<=he.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function l4(t,e){return new a4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.changes=new gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_a(r.mutation,s,en.empty(),Re.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=Ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ta();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Tr();const o=va(),a=function(){return va()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof As)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),_a(h.mutation,c,h.mutation.getFieldMask(),Re.now())):o.set(c.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new c4(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=va();let s=new Ue((o,a)=>o-a),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||en.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||fe()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=aT();h.forEach(m=>{if(!i.has(m)){const y=pT(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Ks());let a=za,u=i;return o.next(c=>F.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,fe())).next(h=>({batchId:a,changes:oT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=ta();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ta();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,u=>{const c=function(f,m){return new To(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Nt.newInvalidDocument(h)))});let a=ta();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&_a(h.mutation,c,en.empty(),Re.now()),Zc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:t4(s.bundledQuery),readTime:Yn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.overlays=new Ue(Z.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ks();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Ks(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Ks(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ks(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return F.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PD(n,r));let i=this.qr.get(n);i===void 0&&(i=fe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.Qr=new at(dt.$r),this.Ur=new at(dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new dt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Se([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Se([])),r=new dt(n,e),s=new dt(n,e+1);let i=fe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||de(e.Yr,n.Yr)}static Kr(e,n){return de(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new at(dt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Em:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(de);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new dt(new Z(i),0);let a=new at(de);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Yr)),!0)},o),F.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new dt(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.ri=e,this.docs=function(){return new Ue(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=Tr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Nt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Tr();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||WN(HN(h),r)<=0||(s.has(h.key)||Zc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new y4(this)}getSize(e){return F.resolve(this.size)}}class y4 extends u4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.persistence=e,this.si=new gi(n=>Sm(n),Cm),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Pm,this.targetCount=0,this.ai=co.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new co(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kc(0),this.li=!1,this.li=!0,this.hi=new p4,this.referenceDelegate=e(this),this.Pi=new v4(this),this.indexManager=new n4,this.remoteDocumentCache=function(s){return new g4(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new e4(n),this.Ii=new d4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new m4(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new _4(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class _4 extends GN{constructor(e){super(),this.currentSequenceNumber=e}}class Nm{constructor(e){this.persistence=e,this.Ri=new Pm,this.Vi=null}static mi(e){return new Nm(e)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gc{constructor(e,n){this.persistence=e,this.pi=new gi(r=>XN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=l4(this,n)}static mi(e,n){return new gc(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cu(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return db()?8:KN(Ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new w4;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ii()<=he.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Ii()<=he.DEBUG&&Y("QueryEngine","Query:",ki(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ii()<=he.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):F.resolve())}ys(e,n){if(h0(n))return F.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zf(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,zf(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,s){return h0(n)||s.isEqual(ne.min())?F.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(Ii()<=he.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ki(n)),this.vs(e,o,n,$N(s,za)).next(a=>a))})}Ds(e,n){let r=new at(sT(e));return n.forEach((s,i)=>{Zc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ii()<=he.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ki(n)),this.ps.getDocumentsMatchingQuery(e,n,gs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="LocalStore",T4=3e8;class x4{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ue(de),this.xs=new gi(i=>Sm(i),Cm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new h4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function S4(t,e,n,r){return new x4(t,e,n,r)}async function AT(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=fe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function C4(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,m=f.keys();let y=F.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(E=>{const I=c.docVersions.get(S);ve(I!==null,48541),E.version.compareTo(I)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function RT(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function I4(t,e){const n=re(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Et.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(E,I,_){return E.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=T4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(i,y))});let u=Tr(),c=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(k4(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(ne.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=s,i))}function k4(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Tr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Y(Om,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:s}})}function A4(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Em),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R4(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qf(t,e,n){const r=re(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eo(o))throw o;Y(Om,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function S0(t,e,n){const r=re(t);let s=ne.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=re(u),m=f.xs.get(h);return m!==void 0?F.resolve(f.Ms.get(m)):f.Pi.getTargetData(c,h)}(r,o,Kn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:fe())).next(a=>(b4(r,mD(e),a),{documents:a,Qs:i})))}function b4(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class C0{constructor(){this.activeTargetIds=ED()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P4{constructor(){this.Mo=new C0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="ConnectivityMonitor";class k0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(I0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(I0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function Gf(){return eu===null?eu=function(){return 268435456+Math.round(2147483648*Math.random())}():eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="RestConnection",D4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===hc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gf(),a=this.zo(e,n.toUriEncodedString());Y(gd,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:c}=new URL(a),h=Is(c);return this.Jo(e,a,u,r,h).then(f=>(Y(gd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw oo(gd,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=D4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class V4 extends O4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gf();return new Promise((a,u)=>{const c=new P1;c.setWithCredentials(!0),c.listenOnce(N1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Su.NO_ERROR:const f=c.getResponseJson();Y(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Su.TIMEOUT:Y(Rt,`RPC '${e}' ${o} timed out`),u(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:const m=c.getStatus();if(Y(Rt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const E=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(S.status);u(new q(E,S.message))}else u(new q(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new q(j.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(Rt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Y(Rt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Gf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=L1(),a=O1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");Y(Rt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let m=!1,y=!1;const S=new L4({Yo:I=>{y?Y(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(m||(Y(Rt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Y(Rt,`RPC '${e}' stream ${s} sending:`,I),f.send(I))},Zo:()=>f.close()}),E=(I,_,v)=>{I.listen(_,x=>{try{v(x)}catch(D){setTimeout(()=>{throw D},0)}})};return E(f,ea.EventType.OPEN,()=>{y||(Y(Rt,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),E(f,ea.EventType.CLOSE,()=>{y||(y=!0,Y(Rt,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(f))}),E(f,ea.EventType.ERROR,I=>{y||(y=!0,oo(Rt,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),S.a_(new q(j.UNAVAILABLE,"The operation could not be completed")))}),E(f,ea.EventType.MESSAGE,I=>{var _;if(!y){const v=I.data[0];ve(!!v,16349);const x=v,D=(x==null?void 0:x.error)||((_=x[0])==null?void 0:_.error);if(D){Y(Rt,`RPC '${e}' stream ${s} received error:`,D);const V=D.status;let U=function(C){const R=et[C];if(R!==void 0)return gT(R)}(V),k=D.message;U===void 0&&(U=j.INTERNAL,k="Unknown error status: "+V+" with message "+D.message),y=!0,S.a_(new q(U,k)),f.close()}else Y(Rt,`RPC '${e}' stream ${s} received:`,v),S.u_(v)}}),E(a,D1.STAT_EVENT,I=>{I.stat===Of.PROXY?Y(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Of.NOPROXY&&Y(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){return new UD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="PersistentStream";class PT{constructor(e,n,r,s,i,o,a,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(A0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(A0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M4 extends PT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$D(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Yn(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wf(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Ff(u)?{documents:qD(i,u)}:{query:GD(i,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_T(i,o.resumeToken);const c=Bf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=mc(i,o.snapshotVersion.toTimestamp());const c=Bf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=YD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wf(this.serializer),n.removeTarget=e,this.q_(n)}}class j4 extends PT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WD(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HD(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{}class U4 extends F4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,$f(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(j.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,$f(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class z4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Er(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="RemoteStore";class B4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{yi(this)&&(Y(ci,"Restarting streams for network reachability change."),await async function(u){const c=re(u);c.Ea.add(4),await hl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await sh(c)}(this))})}),this.Ra=new z4(r,s)}}async function sh(t){if(yi(t))for(const e of t.da)await e(!0)}async function hl(t){for(const e of t.da)await e(!1)}function NT(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jm(n)?Mm(n):xo(n).O_()&&Vm(n,e))}function Lm(t,e){const n=re(t),r=xo(n);n.Ia.delete(e),r.O_()&&DT(n,e),n.Ia.size===0&&(r.O_()?r.L_():yi(n)&&n.Ra.set("Unknown"))}function Vm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).Y_(e)}function DT(t,e){t.Va.Ue(e),xo(t).Z_(e)}function Mm(t){t.Va=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.Ra.ua()}function jm(t){return yi(t)&&!xo(t).x_()&&t.Ia.size>0}function yi(t){return re(t).Ea.size===0}function OT(t){t.Va=void 0}async function $4(t){t.Ra.set("Online")}async function H4(t){t.Ia.forEach((e,n)=>{Vm(t,e)})}async function W4(t,e){OT(t),jm(t)?(t.Ra.ha(e),Mm(t)):t.Ra.set("Unknown")}async function q4(t,e,n){if(t.Ra.set("Online"),e instanceof vT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Y(ci,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yc(t,r)}else if(e instanceof Au?t.Va.Ze(e):e instanceof yT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await RT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),DT(i,u);const f=new Xr(h.target,u,c,h.sequenceNumber);Vm(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y(ci,"Failed to raise snapshot:",r),await yc(t,r)}}async function yc(t,e,n){if(!Eo(e))throw e;t.Ea.add(1),await hl(t),t.Ra.set("Offline"),n||(n=()=>RT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(ci,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await sh(t)})}function LT(t,e){return e().catch(n=>yc(t,n,e))}async function ih(t){const e=re(t),n=ws(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Em;for(;G4(e);)try{const s=await A4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,K4(e,s)}catch(s){await yc(e,s)}VT(e)&&MT(e)}function G4(t){return yi(t)&&t.Ta.length<10}function K4(t,e){t.Ta.push(e);const n=ws(t);n.O_()&&n.X_&&n.ea(e.mutations)}function VT(t){return yi(t)&&!ws(t).x_()&&t.Ta.length>0}function MT(t){ws(t).start()}async function Y4(t){ws(t).ra()}async function X4(t){const e=ws(t);for(const n of t.Ta)e.ea(n.mutations)}async function Q4(t,e,n){const r=t.Ta.shift(),s=Am.from(r,e,n);await LT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ih(t)}async function J4(t,e){e&&ws(t).X_&&await async function(r,s){if(function(o){return DD(o)&&o!==j.ABORTED}(s.code)){const i=r.Ta.shift();ws(r).B_(),await LT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ih(r)}}(t,e),VT(t)&&MT(t)}async function R0(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Y(ci,"RemoteStore received new credentials");const r=yi(n);n.Ea.add(3),await hl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sh(n)}async function Z4(t,e){const n=re(t);e?(n.Ea.delete(2),await sh(n)):e||(n.Ea.add(2),await hl(n),n.Ra.set("Unknown"))}function xo(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new M4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:$4.bind(null,t),t_:H4.bind(null,t),r_:W4.bind(null,t),H_:q4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),jm(t)?Mm(t):t.Ra.set("Unknown")):(await t.ma.stop(),OT(t))})),t.ma}function ws(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new j4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Y4.bind(null,t),r_:J4.bind(null,t),ta:X4.bind(null,t),na:Q4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ih(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(ci,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Fm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(t,e){if(Er("AsyncQueue",`${e}: ${t}`),Eo(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{static emptySet(e){return new Ji(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ta(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ji)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ji;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.ga=new Ue(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,Ji.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class tO{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=P0(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new q(j.ABORTED,"Firestore shutting down"))}}function P0(){return new gi(t=>rT(t),Jc)}async function zm(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new eO,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Um(o,`Initialization of query '${ki(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&$m(n)}async function Bm(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nO(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&$m(n)}function rO(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function $m(t){t.Ca.forEach(e=>{e.next()})}var Kf,N0;(N0=Kf||(Kf={})).Ma="default",N0.Cache="cache";class Hm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class sO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=sT(e),this.tu=new Ji(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new b0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Zc(this.query,f)?f:null,S=!!m&&this.mutatedKeys.has(m.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?S!==E&&(r.track({type:3,doc:y}),I=!0):this.su(m,y)||(r.track({type:2,doc:y}),I=!0,(u&&this.eu(y,u)>0||c&&this.eu(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),I=!0):m&&!y&&(r.track({type:1,doc:m}),I=!0,(u||c)&&(a=!0)),I&&(y?(o=o.add(y),i=E?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,S){const E=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:I})}};return E(y)-E(S)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new ho(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new FT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new jT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wm="SyncEngine";class iO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oO{constructor(e){this.key=e,this.hu=!1}}class aO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new gi(a=>rT(a),Jc),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(Z.comparator),this.Au=new Map,this.Ru=new Pm,this.Vu={},this.mu=new Map,this.fu=co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lO(t,e,n=!0){const r=WT(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await UT(r,e,n,!0),s}async function uO(t,e){const n=WT(t);await UT(n,e,!0,!1)}async function UT(t,e,n,r){const s=await R4(t.localStore,Kn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await cO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&NT(t.remoteStore,s),a}async function cO(t,e,n,r,s){t.pu=(f,m,y)=>async function(E,I,_,v){let x=I.view.ru(_);x.Cs&&(x=await S0(E.localStore,I.query,!1).then(({documents:k})=>I.view.ru(k,x)));const D=v&&v.targetChanges.get(I.targetId),V=v&&v.targetMismatches.get(I.targetId)!=null,U=I.view.applyChanges(x,E.isPrimaryClient,D,V);return O0(E,I.targetId,U.au),U.snapshot}(t,f,m,y);const i=await S0(t.localStore,e,!0),o=new sO(e,i.Qs),a=o.ru(i.documents),u=cl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);O0(t,n,c.au);const h=new iO(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function hO(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Jc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lm(r.remoteStore,s.targetId),Yf(r,s.targetId)}).catch(wo)):(Yf(r,s.targetId),await qf(r.localStore,s.targetId,!0))}async function dO(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lm(n.remoteStore,r.targetId))}async function fO(t,e,n){const r=wO(t);try{const s=await function(o,a){const u=re(o),c=Re.now(),h=a.reduce((y,S)=>y.add(S.key),fe());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Tr(),E=fe();return u.Ns.getEntries(y,h).next(I=>{S=I,S.forEach((_,v)=>{v.isValidDocument()||(E=E.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(I=>{f=I;const _=[];for(const v of a){const x=AD(v,f.get(v.key).overlayedDocument);x!=null&&_.push(new As(v.key,x,Y1(x.value.mapValue),yn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,_,a)}).next(I=>{m=I;const _=I.applyToLocalDocumentSet(f,E);return u.documentOverlayCache.saveOverlays(y,I.batchId,_)})}).then(()=>({batchId:m.batchId,changes:oT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ue(de)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await dl(r,s.changes),await ih(r.remoteStore)}catch(s){const i=Um(s,"Failed to persist write");n.reject(i)}}async function zT(t,e){const n=re(t);try{const r=await I4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ve(o.hu,14607):s.removedDocuments.size>0&&(ve(o.hu,42227),o.hu=!1))}),await dl(n,r,e)}catch(r){await wo(r)}}function D0(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=re(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(a)&&(c=!0)}),c&&$m(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pO(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ue(Z.comparator);o=o.insert(i,Nt.newNoDocument(i,ne.min()));const a=fe().add(i),u=new nh(ne.min(),new Map,new Ue(de),o,a);await zT(r,u),r.du=r.du.remove(i),r.Au.delete(e),qm(r)}else await qf(r.localStore,e,!1).then(()=>Yf(r,e,n)).catch(wo)}async function mO(t,e){const n=re(t),r=e.batch.batchId;try{const s=await C4(n.localStore,e);$T(n,r,null),BT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dl(n,s)}catch(s){await wo(s)}}async function gO(t,e,n){const r=re(t);try{const s=await function(o,a){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(ve(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);$T(r,e,n),BT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dl(r,s)}catch(s){await wo(s)}}function BT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $T(t,e,n){const r=re(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Yf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||HT(t,r)})}function HT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),qm(t))}function O0(t,e,n){for(const r of n)r instanceof jT?(t.Ru.addReference(r.key,e),yO(t,r)):r instanceof FT?(Y(Wm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||HT(t,r.key)):ee(19791,{wu:r})}function yO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Wm,"New document in limbo: "+n),t.Eu.add(r),qm(t))}function qm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new oO(n)),t.du=t.du.insert(n,r),NT(t.remoteStore,new Xr(Kn(Qc(n.path)),r,"TargetPurposeLimboResolution",Kc.ce))}}async function dl(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Dm.As(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,c){const h=re(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(c,m=>F.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>F.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Eo(f))throw f;Y(Om,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),S=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(m,E)}}}(r.localStore,i))}async function vO(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Y(Wm,"User change. New user:",e.toKey());const r=await AT(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(u=>{u.reject(new q(j.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dl(n,r.Ls)}}function _O(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return fe().add(r.key);{let s=fe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function WT(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_O.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pO.bind(null,e),e.Pu.H_=nO.bind(null,e.eventManager),e.Pu.yu=rO.bind(null,e.eventManager),e}function wO(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gO.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return S4(this.persistence,new E4,e.initialUser,this.serializer)}Cu(e){return new kT(Nm.mi,this.serializer)}Du(e){return new P4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class EO extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new o4(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new kT(r=>gc.mi(r,n),this.serializer)}}class Xf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vO.bind(null,this.syncEngine),await Z4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tO}()}createDatastore(e){const n=rh(e.databaseInfo.databaseId),r=function(i){return new V4(i)}(e.databaseInfo);return function(i,o,a,u){return new U4(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new B4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>D0(this.syncEngine,n,0),function(){return k0.v()?new k0:new N4}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const f=new aO(s,i,o,a,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);Y(ci,"RemoteStore shutting down."),i.Ea.add(5),await hl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xf.provider={build:()=>new Xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class TO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(Es,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(Es,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Um(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xO(t);Y(Es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R0(e.remoteStore,s)),t._onlineComponents=e}async function xO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Es,"Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await vd(t,new vc)}}else Y(Es,"Using default OfflineComponentProvider"),await vd(t,new EO(void 0));return t._offlineComponents}async function qT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Es,"Using user provided OnlineComponentProvider"),await L0(t,t._uninitializedComponentsProvider._online)):(Y(Es,"Using default OnlineComponentProvider"),await L0(t,new Xf))),t._onlineComponents}function SO(t){return qT(t).then(e=>e.syncEngine)}async function _c(t){const e=await qT(t),n=e.eventManager;return n.onListen=lO.bind(null,e.syncEngine),n.onUnlisten=hO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dO.bind(null,e.syncEngine),n}function CO(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new Gm({next:m=>{h.Nu(),o.enqueueAndForget(()=>Bm(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Hm(Qc(a.path),h,{includeMetadataChanges:!0,qa:!0});return zm(i,f)}(await _c(t),t.asyncQueue,e,n,r)),r.promise}function IO(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new Gm({next:m=>{h.Nu(),o.enqueueAndForget(()=>Bm(i,f)),m.fromCache&&u.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Hm(a,h,{includeMetadataChanges:!0,qa:!0});return zm(i,f)}(await _c(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="firestore.googleapis.com",M0=!0;class j0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KT,this.ssl=M0}else this.host=e.host,this.ssl=e.ssl??M0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s4)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NN;switch(r.type){case"firstParty":return new VN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=V0.get(n);r&&(Y("ComponentProvider","Removing Datastore"),V0.delete(n),r.terminate())}(this),Promise.resolve()}}function kO(t,e,n,r={}){var c;t=Yt(t,oh);const s=Is(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(am(`https://${a}`),lm("Firestore",!0)),i.host!==KT&&i.host!==a&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:s,emulatorOptions:r};if(!oi(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=bt.MOCK_USER;else{h=qE(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new bt(m)}t._authCredentials=new DN(new M1(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ll(n,$e._jsonSchema))return new $e(e,r||null,new Z(Se.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:rt("string",$e._jsonSchemaVersion),referencePath:rt("string")};class us extends Rs{constructor(e,n,r){super(e,n,Qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Z(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function Cr(t,e,...n){if(t=Qe(t),j1("collection","path",e),t instanceof oh){const r=Se.fromString(e,...n);return Qv(r),new us(t,null,r)}{if(!(t instanceof $e||t instanceof us))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Qv(r),new us(t.firestore,null,r)}}function Tt(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=wm.newId()),j1("doc","path",e),t instanceof oh){const r=Se.fromString(e,...n);return Xv(r),new $e(t,null,new Z(r))}{if(!(t instanceof $e||t instanceof us))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Xv(r),new $e(t.firestore,t instanceof us?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="AsyncQueue";class U0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const r=yd();r&&Y(F0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new dr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Eo(e))throw e;Y(F0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Er("INTERNAL UNHANDLED ERROR: ",z0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Fm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ee(47125,{Pc:z0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function z0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class xr extends oh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new U0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U0(e),this._firestoreClient=void 0,await e}}}function AO(t,e){const n=typeof t=="object"?t:hm(),r=typeof t=="string"?t:hc,s=Bc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$E("firestore");i&&kO(s,...i)}return s}function ah(t){if(t._terminated)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RO(t),t._firestoreClient}function RO(t){var r,s,i;const e=t._freezeSettings(),n=function(a,u,c,h){return new ZN(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(Et.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fn(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ll(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:rt("string",fn._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(e){if(ll(e,Xn._jsonSchema))return new Xn(e.latitude,e.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:rt("string",Xn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ll(e,Qn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Qn(e.vectorValues);throw new q(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qn._jsonSchemaVersion="firestore/vectorValue/1.0",Qn._jsonSchema={type:rt("string",Qn._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^__.*__$/;class PO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,n,this.fieldTransforms):new ul(e,this.data,n,this.fieldTransforms)}}class YT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new As(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function XT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:t})}}class Km{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Km({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XT(this.Ac)&&bO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rh(e)}Cc(e,n,r,s=!1){return new Km({Ac:e,methodName:n,Dc:r,path:vt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ch(t){const e=t._freezeSettings(),n=rh(t._databaseId);return new NO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QT(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Xm("Data must be an object, but it was:",o,r);const a=JT(r,o);let u,c;if(i.merge)u=new en(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Qf(e,f,n);if(!o.contains(m))throw new q(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ex(h,m)||h.push(m)}u=new en(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new PO(new Ht(a),u,c)}class hh extends uh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}class Ym extends uh{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Ka(e.serializer,uT(e.serializer,this.Fc));return new SD(e.path,n)}isEqual(e){return e instanceof Ym&&this.Fc===e.Fc}}function DO(t,e,n,r){const s=t.Cc(1,e,n);Xm("Data must be an object, but it was:",s,r);const i=[],o=Ht.empty();ks(r,(u,c)=>{const h=Qm(e,u,n);c=Qe(c);const f=s.yc(h);if(c instanceof hh)i.push(h);else{const m=fl(c,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new en(i);return new YT(o,a,s.fieldTransforms)}function OO(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Qf(e,r,n)],u=[s];if(i.length%2!=0)throw new q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Qf(e,i[m])),u.push(i[m+1]);const c=[],h=Ht.empty();for(let m=a.length-1;m>=0;--m)if(!ex(c,a[m])){const y=a[m];let S=u[m];S=Qe(S);const E=o.yc(y);if(S instanceof hh)c.push(y);else{const I=fl(S,E);I!=null&&(c.push(y),h.set(y,I))}}const f=new en(c);return new YT(h,f,o.fieldTransforms)}function LO(t,e,n,r=!1){return fl(n,t.Cc(r?4:3,e))}function fl(t,e){if(ZT(t=Qe(t)))return Xm("Unsupported field value:",e,t),JT(t,e);if(t instanceof uh)return function(r,s){if(!XT(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=fl(a,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Re.fromDate(r);return{timestampValue:mc(s.serializer,i)}}if(r instanceof Re){const i=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(s.serializer,i)}}if(r instanceof Xn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fn)return{bytesValue:_T(s.serializer,r._byteString)};if(r instanceof $e){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:bm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qn)return function(o,a){return{mapValue:{fields:{[G1]:{stringValue:K1},[dc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Im(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Gc(r)}`)}(t,e)}function JT(t,e){const n={};return z1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(r,s)=>{const i=fl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ZT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof Xn||t instanceof fn||t instanceof $e||t instanceof uh||t instanceof Qn)}function Xm(t,e,n){if(!ZT(n)||!F1(n)){const r=Gc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Qf(t,e,n){if((e=Qe(e))instanceof lh)return e._internalPath;if(typeof e=="string")return Qm(t,e);throw wc("Field path arguments must be of type string or ",t,!1,void 0,n)}const VO=new RegExp("[~\\*/\\[\\]]");function Qm(t,e,n){if(e.search(VO)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lh(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(j.INVALID_ARGUMENT,a+t+u)}function ex(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MO extends tx{data(){return super.data()}}function dh(t,e){return typeof e=="string"?Qm(t,e):e instanceof lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jm{}class rx extends Jm{}function So(t,e,...n){let r=[];e instanceof Jm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Zm).length,a=i.filter(u=>u instanceof fh).length;if(o>1||o>0&&a>0)throw new q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fh extends rx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return sx(e._query,n),new Rs(e.firestore,e.converter,Uf(e._query,n))}_parse(e){const n=ch(e.firestore);return function(i,o,a,u,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){H0(f,h);const S=[];for(const E of f)S.push($0(u,i,E));m={arrayValue:{values:S}}}else m=$0(u,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||H0(f,h),m=LO(a,o,f,h==="in"||h==="not-in");return nt.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Co(t,e,n){const r=e,s=dh("where",t);return fh._create(s,r,n)}class Zm extends Jm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)sx(o,u),o=Uf(o,u)}(e._query,n),new Rs(e.firestore,e.converter,Uf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class eg extends rx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new eg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wa(i,o)}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new To(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ph(t,e="asc"){const n=e,r=dh("orderBy",t);return eg._create(r,n)}function $0(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nT(e)&&n.indexOf("/")!==-1)throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!Z.isDocumentKey(r))throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return i0(t,new Z(r))}if(n instanceof $e)return i0(t,n._key);throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gc(n)}.`)}function H0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sx(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jO{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ks(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[dc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ye(o.doubleValue));return new Qn(n)}convertGeoPoint(e){return new Xn(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ba(e));default:return null}}convertTimestamp(e){const n=ys(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);ve(CT(r),9688,{name:e});const s=new $a(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Er(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends tx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:rt("string",Qs._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class Ru extends Qs{data(e={}){return super.data(e)}}class Js{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ra(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ru(this._firestore,this._userDataWriter,r.key,r,new ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Ru(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ra(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Ru(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ra(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:FO(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){t=Yt(t,$e);const e=Yt(t.firestore,xr);return CO(ah(e),t._key).then(n=>ox(e,t,n))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:rt("string",Js._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class ng extends jO{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function pl(t){t=Yt(t,Rs);const e=Yt(t.firestore,xr),n=ah(e),r=new ng(e);return nx(t._query),IO(n,t._query).then(s=>new Js(e,r,t,s))}function UO(t,e,n){t=Yt(t,$e);const r=Yt(t.firestore,xr),s=ix(t.converter,e,n);return mh(r,[QT(ch(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yn.none())])}function Ir(t,e,n,...r){t=Yt(t,$e);const s=Yt(t.firestore,xr),i=ch(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof lh?OO(i,"updateDoc",t._key,e,n,r):DO(i,"updateDoc",t._key,e),mh(s,[o.toMutation(t._key,yn.exists(!0))])}function rg(t){return mh(Yt(t.firestore,xr),[new km(t._key,yn.none())])}function sg(t,e){const n=Yt(t.firestore,xr),r=Tt(t),s=ix(t.converter,e);return mh(n,[QT(ch(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function zO(t,...e){var u,c,h;t=Qe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||B0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(B0(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(c=f.error)==null?void 0:c.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,a;if(t instanceof $e)o=Yt(t.firestore,xr),a=Qc(t._key.path),i={next:f=>{e[r]&&e[r](ox(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Yt(t,Rs);o=Yt(f.firestore,xr),a=f._query;const m=new ng(o);i={next:y=>{e[r]&&e[r](new Js(o,m,f,y))},error:e[r+1],complete:e[r+2]},nx(t._query)}return function(m,y,S,E){const I=new Gm(E),_=new Hm(y,I,S);return m.asyncQueue.enqueueAndForget(async()=>zm(await _c(m),_)),()=>{I.Nu(),m.asyncQueue.enqueueAndForget(async()=>Bm(await _c(m),_))}}(ah(o),a,s,i)}function mh(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>fO(await SO(r),s,i)),i.promise}(ah(t),e)}function ox(t,e,n){const r=n.docs.get(e._key),s=new ng(t);return new Qs(t,s,e._key,r,new ra(n.hasPendingWrites,n.fromCache),e.converter)}function BO(t){return new Ym("increment",t)}(function(e,n=!0){(function(s){_o=s})(mi),ai(new ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xr(new ON(r.getProvider("auth-internal")),new MN(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(c.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Wn(qv,Gv,e),Wn(qv,Gv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="firebasestorage.googleapis.com",lx="storageBucket",$O=2*60*1e3,HO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends nr{constructor(e,n,r=0){super(_d(e),`Firebase Storage: ${n} (${_d(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var He;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(He||(He={}));function _d(t){return"storage/"+t}function ig(){const t="An unknown error occurred, please check the error payload for server response.";return new We(He.UNKNOWN,t)}function WO(t){return new We(He.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qO(t){return new We(He.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(He.UNAUTHENTICATED,t)}function KO(){return new We(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YO(t){return new We(He.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function XO(){return new We(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QO(){return new We(He.CANCELED,"User canceled the upload/download.")}function JO(t){return new We(He.INVALID_URL,"Invalid URL '"+t+"'.")}function ZO(t){return new We(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function eL(){return new We(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lx+"' property when initializing the app?")}function tL(){return new We(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nL(){return new We(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rL(t){return new We(He.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jf(t){return new We(He.INVALID_ARGUMENT,t)}function ux(){return new We(He.APP_DELETED,"The Firebase app was deleted.")}function sL(t){return new We(He.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wa(t,e){return new We(He.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Go(t){throw new We(He.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw ZO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),S={bucket:1,path:3},E=n===ax?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",_=new RegExp(`^https?://${E}/${s}/${I}`,"i"),x=[{regex:a,indices:u,postModify:i},{regex:y,indices:S,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<x.length;D++){const V=x[D],U=V.regex.exec(e);if(U){const k=U[V.indices.bucket];let w=U[V.indices.path];w||(w=""),r=new tn(k,w),V.postModify(r);break}}if(r==null)throw JO(e);return r}}class iL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...I){c||(c=!0,e.apply(null,I))}function f(I){s=setTimeout(()=>{s=null,t(y,u())},I)}function m(){i&&clearTimeout(i)}function y(I,..._){if(c){m();return}if(I){m(),h.call(null,I,..._);return}if(u()||o){m(),h.call(null,I,..._);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let S=!1;function E(I){S||(S=!0,m(),!c&&(s!==null?(I||(a=2),clearTimeout(s),f(0)):I||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function aL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){return t!==void 0}function uL(t){return typeof t=="object"&&!Array.isArray(t)}function og(t){return typeof t=="string"||t instanceof String}function W0(t){return ag()&&t instanceof Blob}function ag(){return typeof Blob<"u"}function q0(t,e,n,r){if(r<e)throw Jf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Zs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zs||(Zs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,r,s,i,o,a,u,c,h,f,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,E)=>{this.resolve_=S,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Zs.NO_ERROR,u=i.getStatus();if(!a||cL(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Zs.ABORT;r(!1,new tu(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new tu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());lL(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=ig();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?ux():QO();o(u)}else{const u=XO();o(u)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=oL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function dL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gL(t,e,n,r,s,i,o=!0,a=!1){const u=cx(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return pL(h,e),dL(h,n),fL(h,i),mL(h,r),new hL(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vL(...t){const e=yL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ag())return new Blob(t);throw new We(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _L(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){if(typeof atob>"u")throw rL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wd{constructor(e,n){this.data=e,this.contentType=n||null}}function EL(t,e){switch(t){case Bn.RAW:return new wd(hx(e));case Bn.BASE64:case Bn.BASE64URL:return new wd(dx(t,e));case Bn.DATA_URL:return new wd(xL(e),SL(e))}throw ig()}function hx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function TL(t){let e;try{e=decodeURIComponent(t)}catch{throw wa(Bn.DATA_URL,"Malformed data URL.")}return hx(e)}function dx(t,e){switch(t){case Bn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw wa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Bn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw wa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wL(e)}catch(s){throw s.message.includes("polyfill")?s:wa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class fx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wa(Bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=CL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xL(t){const e=new fx(t);return e.base64?dx(Bn.BASE64,e.rest):TL(e.rest)}function SL(t){return new fx(t).contentType}function CL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){let r=0,s="";W0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(W0(this.data_)){const r=this.data_,s=_L(r,e,n);return s===null?null:new Gr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Gr(r,!0)}}static getBlob(...e){if(ag()){const n=e.map(r=>r instanceof Gr?r.data_:r);return new Gr(vL.apply(null,n))}else{const n=e.map(o=>og(o)?EL(Bn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Gr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){let e;try{e=JSON.parse(t)}catch{return null}return uL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e){return e}class Vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||AL}}let nu=null;function RL(t){return!og(t)||t.length<2?t:mx(t)}function gx(){if(nu)return nu;const t=[];t.push(new Vt("bucket")),t.push(new Vt("generation")),t.push(new Vt("metageneration")),t.push(new Vt("name","fullPath",!0));function e(i,o){return RL(o)}const n=new Vt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Vt("size");return s.xform=r,t.push(s),t.push(new Vt("timeCreated")),t.push(new Vt("updated")),t.push(new Vt("md5Hash",null,!0)),t.push(new Vt("cacheControl",null,!0)),t.push(new Vt("contentDisposition",null,!0)),t.push(new Vt("contentEncoding",null,!0)),t.push(new Vt("contentLanguage",null,!0)),t.push(new Vt("contentType",null,!0)),t.push(new Vt("metadata","customMetadata",!0)),nu=t,nu}function bL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new tn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function PL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return bL(r,t),r}function yx(t,e,n){const r=px(e);return r===null?null:PL(t,r,n)}function NL(t,e,n,r){const s=px(e);if(s===null||!og(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),y=lg(m,n,r),S=cx({alt:"media",token:c});return y+S})[0]}function DL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class vx{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){if(!t)throw ig()}function OL(t,e){function n(r,s){const i=yx(t,s,e);return _x(i!==null),i}return n}function LL(t,e){function n(r,s){const i=yx(t,s,e);return _x(i!==null),NL(i,s,t.host,t._protocol)}return n}function wx(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=KO():s=GO():n.getStatus()===402?s=qO(t.bucket):n.getStatus()===403?s=YO(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function VL(t){const e=wx(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=WO(t.path)),i.serverResponse=s.serverResponse,i}return n}function ML(t,e,n){const r=e.fullServerUrl(),s=lg(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new vx(s,i,LL(t,n),o);return a.errorHandler=VL(e),a}function jL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=jL(null,e)),r}function UL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let D=0;D<2;D++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=FL(e,r,s),h=DL(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+u+"--",y=Gr.getBlob(f,r,m);if(y===null)throw tL();const S={name:c.fullPath},E=lg(i,t.host,t._protocol),I="POST",_=t.maxUploadRetryTime,v=new vx(E,I,OL(t,n),_);return v.urlParams=S,v.headers=o,v.body=y.uploadData(),v.errorHandler=wx(e),v}class zL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Go("cannot .send() more than once");if(Is(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Go("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Go("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Go("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Go("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class BL extends zL{initXhr(){this.xhr_.responseType="text"}}function Ex(){return new BL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hi(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mx(this._location.path)}get storage(){return this._service}get parent(){const e=IL(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new hi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sL(e)}}function $L(t,e,n){t._throwIfRoot("uploadBytes");const r=UL(t.storage,t._location,gx(),new Gr(e,!0),n);return t.storage.makeRequestWithTokens(r,Ex).then(s=>({metadata:s,ref:t}))}function HL(t){t._throwIfRoot("getDownloadURL");const e=ML(t.storage,t._location,gx());return t.storage.makeRequestWithTokens(e,Ex).then(n=>{if(n===null)throw nL();return n})}function WL(t,e){const n=kL(t._location.path,e),r=new tn(t._location.bucket,n);return new hi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){return/^[A-Za-z]+:\/\//.test(t)}function GL(t,e){return new hi(t,e)}function Tx(t,e){if(t instanceof ug){const n=t;if(n._bucket==null)throw eL();const r=new hi(n,n._bucket);return e!=null?Tx(r,e):r}else return e!==void 0?WL(t,e):t}function KL(t,e){if(e&&qL(e)){if(t instanceof ug)return GL(t,e);throw Jf("To use ref(service, url), the first argument must be a Storage instance.")}else return Tx(t,e)}function G0(t,e){const n=e==null?void 0:e[lx];return n==null?null:tn.makeFromBucketSpec(n,t)}function YL(t,e,n,r={}){t.host=`${e}:${n}`;const s=Is(e);s&&(am(`https://${t.host}/b`),lm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:qE(i,t.app.options.projectId))}class ug{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=ax,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$O,this._maxUploadRetryTime=HO,this._requests=new Set,s!=null?this._bucket=tn.makeFromBucketSpec(s,this._host):this._bucket=G0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=G0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new iL(ux());{const o=gL(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const K0="@firebase/storage",Y0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="storage";function XL(t,e,n){return t=Qe(t),$L(t,e,n)}function QL(t){return t=Qe(t),HL(t)}function JL(t,e){return t=Qe(t),KL(t,e)}function ZL(t=hm(),e){t=Qe(t);const r=Bc(t,xx).getImmediate({identifier:e}),s=$E("storage");return s&&eV(r,...s),r}function eV(t,e,n,r={}){YL(t,e,n,r)}function tV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ug(n,r,s,e,mi)}function nV(){ai(new ps(xx,tV,"PUBLIC").setMultipleInstances(!0)),Wn(K0,Y0,""),Wn(K0,Y0,"esm2020")}nV();const rV={apiKey:"AIzaSyCFQEN6wjLDKcUrP4UxVneMA1cNKtvRGY8",authDomain:"econotas-app.firebaseapp.com",projectId:"econotas-app",storageBucket:"econotas-app.firebasestorage.app",messagingSenderId:"237857251178",appId:"1:237857251178:web:bd4b78051ddf501d714f13"},cg=YE(rV),Qt=bN(cg),Ie=AO(cg),Sx=ZL(cg),Cx=async()=>{try{return(await fP(Qt)).user}catch(t){throw console.error("Error signing in anonymously:",t),t}},Ix=async(t,e)=>{try{const n=JL(Sx,`audio/${e}.webm`),r=await XL(n,t);return await QL(r.ref)}catch(n){throw console.error("Error uploading audio:",n),n}},kx=async t=>{try{return(await sg(Cr(Ie,"sessions"),t)).id}catch(e){throw console.error("Error saving session:",e),e}},Ax=async t=>{try{const e=Tt(Ie,"sessions",t),n=await tg(e);return n.exists()?{id:n.id,...n.data()}:(console.log("No such session!"),null)}catch(e){throw console.error("Error getting session:",e),e}},Rx=async t=>{try{const e=So(Cr(Ie,"sessions"),Co("userId","==",t),ph("createdAt","desc")),n=await pl(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){throw console.error("Error getting user sessions:",e),e}},hg=async t=>{try{const e=Tt(Ie,"sessions",t);return await rg(e),!0}catch(e){throw console.error("Error deleting session:",e),e}},bx=async t=>{try{return(await sg(Cr(Ie,"comments"),{...t,createdAt:new Date,updatedAt:new Date})).id}catch(e){throw console.error("Error adding comment:",e),e}},sV=async t=>{try{const e=So(Cr(Ie,"comments"),Co("sessionId","==",t),ph("timestamp","asc")),n=await pl(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){throw console.error("Error getting comments:",e),e}},Px=async(t,e)=>{try{const n=Tt(Ie,"comments",t);return await Ir(n,{text:e,updatedAt:new Date}),!0}catch(n){throw console.error("Error updating comment:",n),n}},Nx=async t=>{try{const e=Tt(Ie,"comments",t);return await rg(e),!0}catch(e){throw console.error("Error deleting comment:",e),e}},Dx=(t,e)=>{try{const n=So(Cr(Ie,"comments"),Co("sessionId","==",t),ph("timestamp","asc"));return zO(n,r=>{const s=[];r.forEach(i=>{s.push({id:i.id,...i.data()})}),e(s)},r=>{console.error("Error in comment subscription:",r)})}catch(n){throw console.error("Error setting up comment subscription:",n),n}},Ox=async t=>{try{const e=Tt(Ie,"sessions",t);return await Ir(e,{viewCount:BO(1)}),!0}catch(e){return console.error("Error incrementing view count:",e),!1}},Lx=async(t,e,n,r="")=>{try{const s=`${t}_${e}`,i=Tt(Ie,"ratings",s);await UO(i,{sessionId:t,userId:e,rating:n,comment:r,updatedAt:new Date},{merge:!0});const o=So(Cr(Ie,"ratings"),Co("sessionId","==",t)),a=await pl(o);let u=0,c=0;const h={1:0,2:0,3:0,4:0,5:0};a.forEach(y=>{const S=y.data().rating;u+=S,c++,h[S]!==void 0&&h[S]++});const f=c>0?u/c:0,m=Tt(Ie,"sessions",t);return await Ir(m,{ratingAverage:f,ratingCount:c,ratingBreakdown:h}),{average:f,count:c}}catch(s){throw console.error("Error adding rating:",s),s}},Vx=async(t,e)=>{try{const n=`${t}_${e}`,r=Tt(Ie,"ratings",n),s=await tg(r);return s.exists()?s.data():null}catch(n){return console.error("Error getting user rating:",n),null}},Mx=async(t,e)=>{try{const n=Tt(Ie,"sessions",t);await Ir(n,{transcription:{segments:e.segments||[],fullText:e.fullText||"",language:e.language||"es-ES",generatedAt:new Date}}),console.log(" Transcription saved successfully")}catch(n){throw console.error("Error saving transcription:",n),n}},jx=async t=>{try{return(await sg(Cr(Ie,"folders"),{...t,createdAt:new Date,sessionCount:0})).id}catch(e){throw console.error("Error creating folder:",e),e}},Fx=async t=>{try{const e=So(Cr(Ie,"folders"),Co("userId","==",t),ph("createdAt","asc")),n=await pl(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){throw console.error("Error getting folders:",e),e}},Ux=async(t,e)=>{try{const n=Tt(Ie,"folders",t);return await Ir(n,e),!0}catch(n){throw console.error("Error updating folder:",n),n}},zx=async t=>{try{const e=So(Cr(Ie,"sessions"),Co("folderId","==",t)),n=await pl(e),r=[];return n.forEach(s=>{r.push(Ir(Tt(Ie,"sessions",s.id),{folderId:null}))}),await Promise.all(r),await rg(Tt(Ie,"folders",t)),!0}catch(e){throw console.error("Error deleting folder:",e),e}},Bx=async(t,e)=>{try{const n=Tt(Ie,"sessions",t);return await Ir(n,{folderId:e}),!0}catch(n){throw console.error("Error moving session to folder:",n),n}},$x=async(t,e)=>{try{const n=Tt(Ie,"sessions",t);return await Ir(n,{tags:e||[]}),!0}catch(n){throw console.error("Error updating session tags:",n),n}},Hx=async(t,e)=>{try{const n=Tt(Ie,"sessions",t);return await Ir(n,{isFavorite:e}),!0}catch(n){throw console.error("Error toggling favorite:",n),n}},Wx=async t=>{try{const e=t.map(n=>hg(n));return await Promise.all(e),!0}catch(e){throw console.error("Error bulk deleting sessions:",e),e}},qx=async(t,e)=>{try{const n=t.map(r=>Bx(r,e));return await Promise.all(n),!0}catch(n){throw console.error("Error bulk moving sessions:",n),n}},Gx=async(t,e)=>{try{const n=t.map(async r=>{const s=await tg(Tt(Ie,"sessions",r));if(s.exists()){const i=s.data().tags||[],o=[...new Set([...i,...e])];await $x(r,o)}});return await Promise.all(n),!0}catch(n){throw console.error("Error bulk adding tags:",n),n}},iV=Object.freeze(Object.defineProperty({__proto__:null,addComment:bx,addRating:Lx,auth:Qt,bulkAddTags:Gx,bulkDeleteSessions:Wx,bulkMoveToFolder:qx,createFolder:jx,db:Ie,deleteComment:Nx,deleteFolder:zx,deleteSession:hg,getSession:Ax,getSessionComments:sV,getUserFolders:Fx,getUserRating:Vx,getUserSessions:Rx,incrementViewCount:Ox,moveSessionToFolder:Bx,saveSession:kx,saveTranscription:Mx,signInUser:Cx,storage:Sx,subscribeToComments:Dx,toggleFavorite:Hx,updateComment:Px,updateFolder:Ux,updateSessionTags:$x,uploadAudio:Ix},Symbol.toStringTag,{value:"Module"})),oV=({segments:t=[],currentTime:e=0,onSeekToTime:n,onExport:r,isRecording:s=!1})=>{const[i,o]=A.useState(""),[a,u]=A.useState([]),c=A.useRef(null),h=t.findIndex(S=>e>=S.startTime&&e<=S.endTime);A.useEffect(()=>{c.current&&h>=0&&c.current.scrollIntoView({behavior:"smooth",block:"center"})},[h]),A.useEffect(()=>{if(!i.trim()){u([]);return}const S=i.toLowerCase(),E=t.map((I,_)=>({...I,index:_,matches:I.text.toLowerCase().includes(S)})).filter(I=>I.matches);u(E)},[i,t]);const f=S=>{const E=Math.floor(S/1e3),I=Math.floor(E/60),_=E%60;return`${I}:${_.toString().padStart(2,"0")}`},m=(S,E)=>E?S.split(new RegExp(`(${E})`,"gi")).map((_,v)=>_.toLowerCase()===E.toLowerCase()?p.jsx("mark",{className:"bg-yellow-400 text-slate-900 px-0.5 rounded",children:_},v):_):S,y=i?a:t;return p.jsxs("div",{className:"h-full flex flex-col bg-slate-800 border-l border-slate-700",children:[p.jsxs("div",{className:"p-4 border-b border-slate-700",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xf,{className:"w-5 h-5 text-indigo-400"}),p.jsx("h3",{className:"font-semibold text-white",children:"Transcripcin"})]}),t.length>0&&p.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar transcripcin",children:p.jsx(rm,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"relative",children:[p.jsx(ME,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),p.jsx("input",{type:"text",placeholder:"Buscar en transcripcin...",value:i,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-8 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm"}),i&&p.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 hover:text-white",children:p.jsx(tr,{className:"w-4 h-4"})})]}),i&&p.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[a.length," resultado",a.length!==1?"s":""," encontrado",a.length!==1?"s":""]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:y.length===0?p.jsx("div",{className:"text-center py-12 text-slate-400",children:s?p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-red-500/20 flex items-center justify-center",children:p.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})}),p.jsx("p",{className:"text-sm",children:"Escuchando..."}),p.jsx("p",{className:"text-xs",children:"Habla claramente para transcribir"})]}):i?p.jsx("p",{className:"text-sm",children:"No se encontraron resultados"}):p.jsxs("div",{className:"space-y-2",children:[p.jsx(xf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),p.jsx("p",{className:"text-sm",children:"No hay transcripcin disponible"}),p.jsx("p",{className:"text-xs",children:"Inicia una grabacin para transcribir"})]})}):y.map((S,E)=>{const I=E===h,_=i?S.index:E;return p.jsx("div",{ref:I?c:null,onClick:()=>n&&n(S.startTime),className:`p-3 rounded-lg cursor-pointer transition-all ${I?"bg-indigo-500/20 border border-indigo-500/50 shadow-lg":"bg-slate-700/50 border border-transparent hover:bg-slate-700 hover:border-slate-600"}`,children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("span",{className:`text-xs font-mono px-2 py-0.5 rounded ${I?"bg-indigo-500 text-white":"bg-slate-600 text-slate-300"}`,children:f(S.startTime)})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:`text-sm leading-relaxed ${I?"text-white font-medium":"text-slate-200"}`,children:i?m(S.text,i):S.text}),S.confidence&&S.confidence<.7&&p.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:" Baja confianza"})]}),I&&p.jsx(LE,{className:"w-4 h-4 text-indigo-400 flex-shrink-0 animate-pulse"})]})},_)})}),t.length>0&&p.jsx("div",{className:"p-3 border-t border-slate-700 bg-slate-800/50",children:p.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[p.jsxs("span",{children:[t.length," segmento",t.length!==1?"s":""]}),p.jsxs("span",{children:[t.reduce((S,E)=>S+E.text.split(" ").length,0)," palabras"]})]})})]})},cs=({onClick:t,disabled:e=!1,variant:n="primary",children:r,label:s,className:i=""})=>{const o="flex items-center justify-center p-2 rounded-xl transition-transform duration-200 ease-out font-medium",a={primary:"bg-gradient-to-r from-[var(--accent)] to-[#a78bfa] text-white shadow-lg shadow-indigo-500/20",secondary:"bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] hover:bg-[var(--bg)]",danger:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/20",warning:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black shadow-lg shadow-yellow-500/20",success:"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/20",info:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/20",ghost:"text-[var(--text)] hover:bg-[var(--bg-card)]"}[n]||"",u=e?"opacity-50 cursor-not-allowed":"hover:scale-105 active:scale-95";return p.jsx("button",{onClick:t,disabled:e,"aria-label":s,className:`${o} ${a} ${u} ${i}`,children:r})},Kx=({isOpen:t,onClose:e,type:n="info",title:r,message:s,confirmText:i="OK"})=>{if(A.useEffect(()=>{const m=y=>{y.key==="Escape"&&t&&e()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t,e]),A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const o={info:{icon:uR,bgColor:"bg-blue-500",textColor:"text-blue-400",borderColor:"border-blue-500/30",buttonVariant:"info"},success:{icon:GA,bgColor:"bg-green-500",textColor:"text-green-400",borderColor:"border-green-500/30",buttonVariant:"success"},warning:{icon:jE,bgColor:"bg-yellow-500",textColor:"text-yellow-400",borderColor:"border-yellow-500/30",buttonVariant:"warning"},error:{icon:WA,bgColor:"bg-red-500",textColor:"text-red-400",borderColor:"border-red-500/30",buttonVariant:"danger"}},{icon:a,bgColor:u,textColor:c,borderColor:h,buttonVariant:f}=o[n];return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:p.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl max-w-md w-full border border-[var(--border)] overflow-hidden animate-scale-in",onClick:m=>m.stopPropagation(),children:[p.jsxs("div",{className:`flex items-center gap-3 p-6 border-b ${h}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-full ${u}/10 flex items-center justify-center`,children:p.jsx(a,{className:`w-6 h-6 ${c}`})}),p.jsx("div",{className:"flex-1",children:p.jsx("h3",{className:"text-xl font-bold text-[var(--text)]",children:r})}),p.jsx(cs,{onClick:e,variant:"ghost",className:"p-1 rounded-lg",label:"Cerrar",children:p.jsx(tr,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"p-6",children:p.jsx("p",{className:"text-[var(--text)] opacity-80 leading-relaxed",children:s})}),p.jsx("div",{className:"p-6 pt-0 flex justify-end",children:p.jsx(cs,{onClick:e,variant:f,className:"px-6 py-2 rounded-lg font-semibold shadow-lg",children:i})})]})})},Yx=({isOpen:t,onConfirm:e,onCancel:n,onClose:r,title:s,message:i,confirmText:o="Confirmar",cancelText:a="Cancelar",variant:u="default"})=>{const c=()=>{n&&n(),r&&r()},h=()=>{e&&e(),r&&r()};if(A.useEffect(()=>{const m=y=>{y.key==="Escape"&&t&&c()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t]),A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const f=u==="destructive";return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:c,children:p.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl max-w-md w-full border border-[var(--border)] overflow-hidden animate-scale-in",onClick:m=>m.stopPropagation(),children:[p.jsxs("div",{className:`flex items-center gap-3 p-6 border-b ${f?"border-red-500/30":"border-[var(--border)]"}`,children:[f&&p.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center",children:p.jsx(jE,{className:"w-6 h-6 text-red-400"})}),p.jsx("div",{className:"flex-1",children:p.jsx("h3",{className:"text-xl font-bold text-[var(--text)]",children:s})}),p.jsx(cs,{onClick:c,variant:"ghost",className:"p-1 rounded-lg",label:"Cerrar",children:p.jsx(tr,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"p-6",children:p.jsx("p",{className:"text-[var(--text)] opacity-80 leading-relaxed",children:i})}),p.jsxs("div",{className:"p-6 pt-0 flex justify-end gap-3",children:[p.jsx(cs,{onClick:c,variant:"secondary",className:"px-6 py-2 rounded-lg font-semibold",children:a}),p.jsx(cs,{onClick:h,variant:f?"danger":"primary",className:"px-6 py-2 rounded-lg font-semibold shadow-lg",autoFocus:!0,children:o})]})]})})};var mn=function(t,e){return Number(t.toFixed(e))},aV=function(t,e){return e},De=function(t,e,n){n&&typeof n=="function"&&n(t,e)},lV=function(t){return-Math.cos(t*Math.PI)/2+.5},uV=function(t){return t},cV=function(t){return t*t},hV=function(t){return t*(2-t)},dV=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},fV=function(t){return t*t*t},pV=function(t){return--t*t*t+1},mV=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},gV=function(t){return t*t*t*t},yV=function(t){return 1- --t*t*t*t},vV=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},_V=function(t){return t*t*t*t*t},wV=function(t){return 1+--t*t*t*t*t},EV=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},Xx={easeOut:lV,linear:uV,easeInQuad:cV,easeOutQuad:hV,easeInOutQuad:dV,easeInCubic:fV,easeOutCubic:pV,easeInOutCubic:mV,easeInQuart:gV,easeOutQuart:yV,easeInOutQuart:vV,easeInQuint:_V,easeOutQuint:wV,easeInOutQuint:EV},Qx=function(t){typeof t=="number"&&cancelAnimationFrame(t)},In=function(t){t.mounted&&(Qx(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function Jx(t,e,n,r){if(t.mounted){var s=new Date().getTime(),i=1;In(t),t.animation=function(){if(!t.mounted)return Qx(t.animation);var o=new Date().getTime()-s,a=o/n,u=Xx[e],c=u(a);o>=n?(r(i),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function TV(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function bs(t,e,n,r){var s=TV(e);if(!(!t.mounted||!s)){var i=t.setTransformState,o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY,h=e.scale-a,f=e.positionX-u,m=e.positionY-c;n===0?i(e.scale,e.positionX,e.positionY):Jx(t,r,n,function(y){var S=a+h*y,E=u+f*y,I=c+m*y;i(S,E,I)})}}function xV(t,e,n){var r=t.offsetWidth,s=t.offsetHeight,i=e.offsetWidth,o=e.offsetHeight,a=i*n,u=o*n,c=r-a,h=s-u;return{wrapperWidth:r,wrapperHeight:s,newContentWidth:a,newDiffWidth:c,newContentHeight:u,newDiffHeight:h}}var SV=function(t,e,n,r,s,i,o){var a=t>e?n*(o?1:.5):0,u=r>s?i*(o?1:.5):0,c=t-e-a,h=a,f=r-s-u,m=u;return{minPositionX:c,maxPositionX:h,minPositionY:f,maxPositionY:m}},dg=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,s=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var i=xV(n,r,e),o=i.wrapperWidth,a=i.wrapperHeight,u=i.newContentWidth,c=i.newDiffWidth,h=i.newContentHeight,f=i.newDiffHeight,m=SV(o,u,c,a,h,f,!!s);return m},Zf=function(t,e,n,r){return r?t<e?mn(e,2):t>n?mn(n,2):mn(t,2):mn(t,2)},ei=function(t,e){var n=dg(t,e);return t.bounds=n,n};function ml(t,e,n,r,s,i,o){var a=n.minPositionX,u=n.minPositionY,c=n.maxPositionX,h=n.maxPositionY,f=0,m=0;o&&(f=s,m=i);var y=Zf(t,a-f,c+f,r),S=Zf(e,u-m,h+m,r);return{x:y,y:S}}function gh(t,e,n,r,s,i){var o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY,h=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:c};var f=u-e*h,m=c-n*h,y=ml(f,m,s,i,0,0,null);return y}function gl(t,e,n,r,s){var i=s?r:0,o=e-i;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var X0=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,s=t.wrapperComponent,i=e.target,o="shadowRoot"in i&&"composedPath"in e,a=o?e.composedPath().some(function(h){return h instanceof Element?s==null?void 0:s.contains(h):!1}):s==null?void 0:s.contains(i),u=r&&i&&a;if(!u)return!1;var c=yh(i,n);return!c},Q0=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,s=r.panning.disabled,i=e&&n&&!s;return!!i},CV=function(t,e){var n=t.transformState,r=n.positionX,s=n.positionY;t.isPanning=!0;var i=e.clientX,o=e.clientY;t.startCoords={x:i-r,y:o-s}},IV=function(t,e){var n=e.touches,r=t.transformState,s=r.positionX,i=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,u=n[0].clientY;t.startCoords={x:a-s,y:u-i}}};function kV(t){var e=t.transformState,n=e.positionX,r=e.positionY,s=e.scale,i=t.setup,o=i.disabled,a=i.limitToBounds,u=i.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var h=t.bounds,f=h.maxPositionX,m=h.minPositionX,y=h.maxPositionY,S=h.minPositionY,E=n>f||n<m,I=r>y||r<S,_=n>f?c.offsetWidth:t.setup.minPositionX||0,v=r>y?c.offsetHeight:t.setup.minPositionY||0,x=gh(t,_,v,s,t.bounds,a||u),D=x.x,V=x.y;return{scale:s,positionX:E?D:n,positionY:I?V:r}}}function Zx(t,e,n,r,s){var i=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,u=t.transformState,c=u.scale,h=u.positionX,f=u.positionY;if(!(o===null||a===null||e===h&&n===f)){var m=ml(e,n,a,i,r,s,o),y=m.x,S=m.y;t.setTransformState(c,y,S)}}var AV=function(t,e,n){var r=t.startCoords,s=t.transformState,i=t.setup.panning,o=i.lockAxisX,a=i.lockAxisY,u=s.positionX,c=s.positionY;if(!r)return{x:u,y:c};var h=e-r.x,f=n-r.y,m=o?u:h,y=a?c:f;return{x:m,y}},Ts=function(t,e){var n=t.setup,r=t.transformState,s=r.scale,i=n.minScale,o=n.disablePadding;return e>0&&s>=i&&!o?e:0},RV=function(t){var e=t.mounted,n=t.setup,r=n.disabled,s=n.velocityAnimation,i=t.transformState.scale,o=s.disabled,a=!o||i>1||!r||e;return!!a},bV=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,s=t.setup,i=s.disabled,o=s.velocityAnimation,a=t.transformState.scale,u=o.disabled,c=!u||a>1||!i||e;return!(!c||!n||!r)};function PV(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,s=n.animationTime,i=n.sensitivity;return r?s*e*i:s}function J0(t,e,n,r,s,i,o,a,u,c){if(s){if(e>o&&n>o){var h=o+(t-o)*c;return h>u?u:h<o?o:h}if(e<i&&n<i){var h=i+(t-i)*c;return h<a?a:h>i?i:h}}return r?e:Zf(t,i,o,s)}function NV(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function DV(t,e){var n=RV(t);if(n){var r=t.lastMousePosition,s=t.velocityTime,i=t.setup,o=t.wrapperComponent,a=i.velocityAnimation.equalToMove,u=Date.now();if(r&&s&&o){var c=NV(o,a),h=e.x-r.x,f=e.y-r.y,m=h/c,y=f/c,S=u-s,E=h*h+f*f,I=Math.sqrt(E)/S;t.velocity={velocityX:m,velocityY:y,total:I}}t.lastMousePosition=e,t.velocityTime=u}}function OV(t){var e=t.velocity,n=t.bounds,r=t.setup,s=t.wrapperComponent,i=bV(t);if(!(!i||!e||!n||!s)){var o=e.velocityX,a=e.velocityY,u=e.total,c=n.maxPositionX,h=n.minPositionX,f=n.maxPositionY,m=n.minPositionY,y=r.limitToBounds,S=r.alignmentAnimation,E=r.zoomAnimation,I=r.panning,_=I.lockAxisY,v=I.lockAxisX,x=E.animationType,D=S.sizeX,V=S.sizeY,U=S.velocityAlignmentTime,k=U,w=PV(t,u),C=Math.max(w,k),R=Ts(t,D),P=Ts(t,V),N=R*s.offsetWidth/100,b=P*s.offsetHeight/100,we=c+N,qe=h-N,mt=f+b,zt=m-b,W=t.transformState,J=new Date().getTime();Jx(t,x,C,function(Q){var ue=t.transformState,ae=ue.scale,xt=ue.positionX,Te=ue.positionY,me=new Date().getTime()-J,Pe=me/k,Ge=Xx[S.animationType],an=1-Ge(Math.min(1,Pe)),St=1-Q,kr=xt+o*St,Dn=Te+a*St,Ar=J0(kr,W.positionX,xt,v,y,h,c,qe,we,an),Lt=J0(Dn,W.positionY,Te,_,y,m,f,zt,mt,an);(xt!==kr||Te!==Dn)&&t.setTransformState(ae,Ar,Lt)})}}function Z0(t,e){var n=t.transformState.scale;In(t),ei(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?IV(t,e):CV(t,e)}function fg(t,e){var n=t.transformState.scale,r=t.setup,s=r.minScale,i=r.alignmentAnimation,o=i.disabled,a=i.sizeX,u=i.sizeY,c=i.animationTime,h=i.animationType,f=o||n<s||!a&&!u;if(!f){var m=kV(t);m&&bs(t,m,e??c,h)}}function e_(t,e,n){var r=t.startCoords,s=t.setup,i=s.alignmentAnimation,o=i.sizeX,a=i.sizeY;if(r){var u=AV(t,e,n),c=u.x,h=u.y,f=Ts(t,o),m=Ts(t,a);DV(t,{x:c,y:h}),Zx(t,c,h,f,m)}}function LV(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,s=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var i=r==null?void 0:r.getBoundingClientRect(),o=s==null?void 0:s.getBoundingClientRect(),a=(i==null?void 0:i.width)||0,u=(i==null?void 0:i.height)||0,c=(o==null?void 0:o.width)||0,h=(o==null?void 0:o.height)||0,f=a<c||u<h,m=!e&&n&&(n==null?void 0:n.total)>.1&&f;m?OV(t):fg(t)}}function pg(t,e,n,r){var s=t.setup,i=s.minScale,o=s.maxScale,a=s.limitToBounds,u=gl(mn(e,2),i,o,0,!1),c=ei(t,u),h=gh(t,n,r,u,c,a),f=h.x,m=h.y;return{scale:u,positionX:f,positionY:m}}function eS(t,e,n){var r=t.transformState.scale,s=t.wrapperComponent,i=t.setup,o=i.minScale,a=i.limitToBounds,u=i.zoomAnimation,c=u.disabled,h=u.animationTime,f=u.animationType,m=c||r>=o;if((r>=1||a)&&fg(t),!(m||!s||!t.mounted)){var y=e||s.offsetWidth/2,S=n||s.offsetHeight/2,E=pg(t,o,y,S);E&&bs(t,E,h,f)}}var hs=function(){return hs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hs.apply(this,arguments)};function t_(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var ru={scale:1,positionX:0,positionY:0},Ko={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ep={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},tS=function(t){var e,n,r,s;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:ru.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:ru.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:ru.positionX,positionY:(s=t.initialPositionY)!==null&&s!==void 0?s:ru.positionY}},n_=function(t){var e=hs({},Ko);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",s=typeof Ko[n]<"u";if(s&&r){var i=Object.prototype.toString.call(Ko[n]),o=i==="[object Object]",a=i==="[object Array]";o?e[n]=hs(hs({},Ko[n]),t[n]):a?e[n]=t_(t_([],Ko[n],!0),t[n]):e[n]=t[n]}}),e},nS=function(t,e,n){var r=t.transformState.scale,s=t.wrapperComponent,i=t.setup,o=i.maxScale,a=i.minScale,u=i.zoomAnimation,c=i.smooth,h=u.size;if(!s)throw new Error("Wrapper is not mounted");var f=c?r*Math.exp(e*n):r+e*n,m=gl(mn(f,3),a,o,h,!1);return m};function rS(t,e,n,r,s){var i=t.wrapperComponent,o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY;if(!i)return console.error("No WrapperComponent found");var h=i.offsetWidth,f=i.offsetHeight,m=(h/2-u)/a,y=(f/2-c)/a,S=nS(t,e,n),E=pg(t,S,m,y);if(!E)return console.error("Error during zoom event. New transformation state was not calculated.");bs(t,E,r,s)}function sS(t,e,n,r){var s=t.setup,i=t.wrapperComponent,o=s.limitToBounds,a=tS(t.props),u=t.transformState,c=u.scale,h=u.positionX,f=u.positionY;if(i){var m=dg(t,a.scale),y=ml(a.positionX,a.positionY,m,o,0,0,i),S={scale:a.scale,positionX:y.x,positionY:y.y};c===a.scale&&h===a.positionX&&f===a.positionY||(r==null||r(),bs(t,S,e,n))}}function VV(t,e,n,r){var s=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i.x*r.scale,u=i.y*r.scale;return{x:(s.x-o.x+a)/r.scale,y:(s.y-o.y+u)/r.scale}}function MV(t,e,n){var r=t.wrapperComponent,s=t.contentComponent,i=t.transformState,o=t.setup,a=o.limitToBounds,u=o.minScale,c=o.maxScale;if(!r||!s)return i;var h=r.getBoundingClientRect(),f=e.getBoundingClientRect(),m=VV(e,r,s,i),y=m.x,S=m.y,E=f.width/i.scale,I=f.height/i.scale,_=r.offsetWidth/E,v=r.offsetHeight/I,x=gl(n||Math.min(_,v),u,c,0,!1),D=(h.width-E*x)/2,V=(h.height-I*x)/2,U=(h.left-y)*x+D,k=(h.top-S)*x+V,w=dg(t,x),C=ml(U,k,w,a,0,0,r),R=C.x,P=C.y;return{positionX:R,positionY:P,scale:x}}var jV=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),rS(t,1,e,n,r)}},FV=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),rS(t,-1,e,n,r)}},UV=function(t){return function(e,n,r,s,i){s===void 0&&(s=300),i===void 0&&(i="easeOut");var o=t.transformState,a=o.positionX,u=o.positionY,c=o.scale,h=t.wrapperComponent,f=t.contentComponent,m=t.setup.disabled;if(!(m||!h||!f)){var y={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?u:n,scale:Number.isNaN(r)?c:r};bs(t,y,s,i)}}},zV=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),sS(t,e,n)}},BV=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var s=t.transformState,i=t.wrapperComponent,o=t.contentComponent;if(i&&o){var a=iS(e||s.scale,i,o);bs(t,a,n,r)}}},$V=function(t){return function(e,n,r,s){r===void 0&&(r=600),s===void 0&&(s="easeOut"),In(t);var i=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(i&&o&&i.contains(o)){var a=MV(t,o,n);bs(t,a,r,s)}}},tp=function(t){return{instance:t,zoomIn:jV(t),zoomOut:FV(t),setTransform:UV(t),resetTransform:zV(t),centerView:BV(t),zoomToElement:$V(t)}},HV=function(t){return{instance:t,state:t.transformState}},xe=function(t){var e={};return Object.assign(e,HV(t)),Object.assign(e,tp(t)),e},Ed=!1;function Td(){try{var t={get passive(){return Ed=!0,!1}};return t}catch{return Ed=!1,Ed}}var su=".".concat(ep.wrapperClass),yh=function(t,e){return e.some(function(n){return t.matches("".concat(su," ").concat(n,", ").concat(su," .").concat(n,", ").concat(su," ").concat(n," *, ").concat(su," .").concat(n," *"))})},np=function(t){t&&clearTimeout(t)},WV=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},iS=function(t,e,n){var r=n.offsetWidth*t,s=n.offsetHeight*t,i=(e.offsetWidth-r)/2,o=(e.offsetHeight-s)/2;return{scale:t,positionX:i,positionY:o}};function qV(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var GV=function(t,e){var n=t.setup.wheel,r=n.disabled,s=n.wheelDisabled,i=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,u=t.isPanning,c=e.target,h=a&&!u&&!r&&c;if(!h||s&&!e.ctrlKey||i&&e.ctrlKey)return!1;var f=yh(c,o);return!f},KV=function(t){return t?t.deltaY<0?1:-1:0};function YV(t,e){var n=KV(t),r=aV(e,n);return r}function oS(t,e,n){var r=e.getBoundingClientRect(),s=0,i=0;if("clientX"in t)s=(t.clientX-r.left)/n,i=(t.clientY-r.top)/n;else{var o=t.touches[0];s=(o.clientX-r.left)/n,i=(o.clientY-r.top)/n}return(Number.isNaN(s)||Number.isNaN(i))&&console.error("No mouse or touch offset found"),{x:s,y:i}}var XV=function(t,e,n,r,s){var i=t.transformState.scale,o=t.wrapperComponent,a=t.setup,u=a.maxScale,c=a.minScale,h=a.zoomAnimation,f=a.disablePadding,m=h.size,y=h.disabled;if(!o)throw new Error("Wrapper is not mounted");var S=i+e*n,E=r?!1:!y,I=gl(mn(S,3),c,u,m,E&&!f);return I},QV=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,s=t.setup,i=s.maxScale,o=s.minScale;return n?r<i||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},JV=function(t,e){var n=t.setup.pinch,r=n.disabled,s=n.excluded,i=t.isInitialized,o=e.target,a=i&&!r&&o;if(!a)return!1;var u=yh(o,s);return!u},ZV=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,s=n&&!e&&r;return!!s},eM=function(t,e,n){var r=n.getBoundingClientRect(),s=t.touches,i=mn(s[0].clientX-r.left,5),o=mn(s[0].clientY-r.top,5),a=mn(s[1].clientX-r.left,5),u=mn(s[1].clientY-r.top,5);return{x:(i+a)/2/e,y:(o+u)/2/e}},aS=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},tM=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,s=t.setup,i=s.maxScale,o=s.minScale,a=s.zoomAnimation,u=s.disablePadding,c=a.size,h=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var f=e/r,m=f*n;return gl(mn(m,2),o,i,c,!h&&!u)},nM=160,rM=100,sM=function(t,e){var n=t.props,r=n.onWheelStart,s=n.onZoomStart;t.wheelStopEventTimer||(In(t),De(xe(t),e,r),De(xe(t),e,s))},iM=function(t,e){var n=t.props,r=n.onWheel,s=n.onZoom,i=t.contentComponent,o=t.setup,a=t.transformState,u=a.scale,c=o.limitToBounds,h=o.centerZoomedOut,f=o.zoomAnimation,m=o.wheel,y=o.disablePadding,S=o.smooth,E=f.size,I=f.disabled,_=m.step,v=m.smoothStep;if(!i)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=YV(e,null),D=S?v*Math.abs(e.deltaY):_,V=XV(t,x,D,!e.ctrlKey);if(u!==V){var U=ei(t,V),k=oS(e,i,u),w=I||E===0||h||y,C=c&&w,R=gh(t,k.x,k.y,V,U,C),P=R.x,N=R.y;t.previousWheelEvent=e,t.setTransformState(V,P,N),De(xe(t),e,r),De(xe(t),e,s)}},oM=function(t,e){var n=t.props,r=n.onWheelStop,s=n.onZoomStop;np(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(eS(t,e.x,e.y),t.wheelAnimationTimer=null)},rM);var i=QV(t,e);i&&(np(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,De(xe(t),e,r),De(xe(t),e,s))},nM))},lS=function(t){for(var e=0,n=0,r=0;r<2;r+=1)e+=t.touches[r].clientX,n+=t.touches[r].clientY;var s=e/2,i=n/2;return{x:s,y:i}},aM=function(t,e){var n=aS(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var r=lS(e);t.pinchLastCenterX=r.x,t.pinchLastCenterY=r.y,In(t)},lM=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,s=t.wrapperComponent,i=t.transformState.scale,o=t.setup,a=o.limitToBounds,u=o.centerZoomedOut,c=o.zoomAnimation,h=o.alignmentAnimation,f=c.disabled,m=c.size;if(!(r===null||!n)){var y=eM(e,i,n);if(!(!Number.isFinite(y.x)||!Number.isFinite(y.y))){var S=aS(e),E=tM(t,S),I=lS(e),_=I.x-(t.pinchLastCenterX||0),v=I.y-(t.pinchLastCenterY||0);if(!(E===i&&_===0&&v===0)){t.pinchLastCenterX=I.x,t.pinchLastCenterY=I.y;var x=ei(t,E),D=f||m===0||u,V=a&&D,U=gh(t,y.x,y.y,E,x,V),k=U.x,w=U.y;t.pinchMidpoint=y,t.lastDistance=S;var C=h.sizeX,R=h.sizeY,P=Ts(t,C),N=Ts(t,R),b=k+_,we=w+v,qe=ml(b,we,x,a,P,N,s),mt=qe.x,zt=qe.y;t.setTransformState(E,mt,zt)}}}},uM=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,eS(t,e==null?void 0:e.x,e==null?void 0:e.y)},uS=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;np(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,De(xe(t),e,n)},r)},cM=function(t,e){var n=t.props,r=n.onZoomStart,s=n.onZoom,i=t.setup.doubleClick,o=i.animationTime,a=i.animationType;De(xe(t),e,r),sS(t,o,a,function(){return De(xe(t),e,s)}),uS(t,e)};function hM(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function dM(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,s=t.transformState,i=t.contentComponent,o=s.scale,a=t.props,u=a.onZoomStart,c=a.onZoom,h=n.doubleClick,f=h.disabled,m=h.mode,y=h.step,S=h.animationTime,E=h.animationType;if(!f&&!r){if(m==="reset")return cM(t,e);if(!i)return console.error("No ContentComponent found");var I=hM(m,t.transformState.scale),_=nS(t,I,y);if(o!==_){De(xe(t),e,u);var v=oS(e,i,o),x=pg(t,_,v.x,v.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");De(xe(t),e,c),bs(t,x,S,E),uS(t,e)}}}var fM=function(t,e){var n=t.isInitialized,r=t.setup,s=t.wrapperComponent,i=r.doubleClick,o=i.disabled,a=i.excluded,u=e.target,c=s==null?void 0:s.contains(u),h=n&&u&&c&&!o;if(!h)return!1;var f=yh(u,a);return!f},pM=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,ei(n,n.transformState.scale),n.setup=n_(r)},this.initializeWindowEvents=function(){var r,s,i=Td(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;(s=n.wrapperComponent)===null||s===void 0||s.addEventListener("wheel",n.onWheelPanning,i),a==null||a.addEventListener("mousedown",n.onPanningStart,i),a==null||a.addEventListener("mousemove",n.onPanning,i),a==null||a.addEventListener("mouseup",n.onPanningStop,i),o==null||o.addEventListener("mouseleave",n.clearPanning,i),a==null||a.addEventListener("keyup",n.setKeyUnPressed,i),a==null||a.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,s,i=Td(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,i),a==null||a.removeEventListener("mousemove",n.onPanning,i),a==null||a.removeEventListener("mouseup",n.onPanningStop,i),o==null||o.removeEventListener("mouseleave",n.clearPanning,i),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,i),a==null||a.removeEventListener("keydown",n.setKeyPressed,i),document.removeEventListener("mouseleave",n.clearPanning,i),In(n),(s=n.observer)===null||s===void 0||s.disconnect()},this.handleInitializeWrapperEvents=function(r){var s=Td();r.addEventListener("wheel",n.onWheelZoom,s),r.addEventListener("dblclick",n.onDoubleClick,s),r.addEventListener("touchstart",n.onTouchPanningStart,s),r.addEventListener("touchmove",n.onTouchPanning,s),r.addEventListener("touchend",n.onTouchPanningStop,s)},this.handleInitialize=function(r,s){var i=!1,o=n.setup.centerOnInit,a=function(u,c){for(var h=0,f=u;h<f.length;h++){var m=f[h];if(m.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(u){u(xe(n))}),n.observer=new ResizeObserver(function(u){if(a(u,r)||a(u,s))if(o&&!i){var c=s.offsetWidth,h=s.offsetHeight;(c>0||h>0)&&(i=!0,n.setCenter())}else In(n),ei(n,n.transformState.scale),fg(n,0)}),n.observer.observe(r),n.observer.observe(s)},this.onWheelZoom=function(r){var s=n.setup.disabled;if(!s){var i=GV(n,r);if(i){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(sM(n,r),iM(n,r),oM(n,r))}}},this.onWheelPanning=function(r){var s=n.setup,i=s.disabled,o=s.wheel,a=s.panning;if(!(!n.wrapperComponent||!n.contentComponent||i||!o.wheelDisabled||a.disabled||!a.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var u=n.transformState,c=u.positionX,h=u.positionY,f=c-r.deltaX,m=h-r.deltaY,y=a.lockAxisX?c:f,S=a.lockAxisY?h:m,E=n.setup.alignmentAnimation,I=E.sizeX,_=E.sizeY,v=Ts(n,I),x=Ts(n,_);y===c&&S===h||Zx(n,y,S,v,x)}},this.onPanningStart=function(r){var s=n.setup.disabled,i=n.props.onPanningStart;if(!s){var o=X0(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),In(n),Z0(n,r),De(xe(n),r,i)))}}},this.onPanning=function(r){var s=n.setup.disabled,i=n.props.onPanning;if(!s){var o=Q0(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),e_(n,r.clientX,r.clientY),De(xe(n),r,i))}}},this.onPanningStop=function(r){var s=n.props.onPanningStop;n.isPanning&&(LV(n),De(xe(n),r,s))},this.onPinchStart=function(r){var s=n.setup.disabled,i=n.props,o=i.onPinchingStart,a=i.onZoomStart;if(!s){var u=JV(n,r);u&&(aM(n,r),In(n),De(xe(n),r,o),De(xe(n),r,a))}},this.onPinch=function(r){var s=n.setup.disabled,i=n.props,o=i.onPinching,a=i.onZoom;if(!s){var u=ZV(n);u&&(r.preventDefault(),r.stopPropagation(),lM(n,r),De(xe(n),r,o),De(xe(n),r,a))}},this.onPinchStop=function(r){var s=n.props,i=s.onPinchingStop,o=s.onZoomStop;n.pinchStartScale&&(uM(n),De(xe(n),r,i),De(xe(n),r,o))},this.onTouchPanningStart=function(r){var s=n.setup.disabled,i=n.props.onPanningStart;if(!s){var o=X0(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!a){n.lastTouch=+new Date,In(n);var u=r.touches,c=u.length===1,h=u.length===2;c&&(In(n),Z0(n,r),De(xe(n),r,i)),h&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var s=n.setup.disabled,i=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(s)return;var o=Q0(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];e_(n,a.clientX,a.clientY),De(xe(n),r,i)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var s=n.setup.disabled;if(!s){var i=fM(n,r);i&&dM(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(s){return n.pressedKeys[s]}):!0},this.setTransformState=function(r,s,i){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(s)&&!Number.isNaN(i)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=s,n.transformState.positionY=i,n.applyTransformation();var a=xe(n);n.onChangeCallbacks.forEach(function(u){return u(a)}),De(a,{scale:r,positionX:s,positionY:i},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=iS(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,s,i){return n.props.customTransform?n.props.customTransform(r,s,i):WV(r,s,i)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,s=r.scale,i=r.positionX,o=r.positionY,a=n.handleTransformStyles(i,o,s);n.contentComponent.style.transform=a}},this.getContext=function(){return xe(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,s){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=s,ei(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,s),n.initializeWindowEvents(),n.isInitialized=!0;var i=xe(n);De(i,void 0,n.props.onInit)},this.props=e,this.setup=n_(this.props),this.transformState=tS(this.props)}return t}(),mg=vn.createContext(null),mM=function(t,e){return typeof t=="function"?t(e):t},gM=vn.forwardRef(function(t,e){var n=A.useRef(new pM(t)).current,r=mM(t.children,tp(n));return A.useImperativeHandle(e,function(){return tp(n)},[n]),A.useEffect(function(){n.update(t)},[n,t]),vn.createElement(mg.Provider,{value:n},r)});vn.forwardRef(function(t,e){var n=A.useRef(null),r=A.useContext(mg);return A.useEffect(function(){return r.onChange(function(s){if(n.current){var i=0,o=0;n.current.style.transform=r.handleTransformStyles(i,o,1/s.instance.transformState.scale)}})},[r]),vn.createElement("div",hs({},t,{ref:qV([n,e])}))});function yM(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var vM=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,r_={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yM(vM);var _M=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,s=t.contentClass,i=s===void 0?"":s,o=t.wrapperStyle,a=t.contentStyle,u=t.wrapperProps,c=u===void 0?{}:u,h=t.contentProps,f=h===void 0?{}:h,m=A.useContext(mg),y=m.init,S=m.cleanupWindowEvents,E=A.useRef(null),I=A.useRef(null);return A.useEffect(function(){var _=E.current,v=I.current;return _!==null&&v!==null&&y&&(y==null||y(_,v)),function(){S==null||S()}},[]),vn.createElement("div",hs({},c,{ref:E,className:"".concat(ep.wrapperClass," ").concat(r_.wrapper," ").concat(r),style:o}),vn.createElement("div",hs({},f,{ref:I,className:"".concat(ep.contentClass," ").concat(r_.content," ").concat(i),style:a}),e))};const wM=({canvasRef:t,strokes:e,onPointerDown:n,onPointerMove:r,onPointerUp:s,mode:i,readOnly:o})=>{const a=vn.useRef(null),u=h=>{typeof window<"u"&&sessionStorage.setItem("econotas-viewport",JSON.stringify({zoom:h.scale,positionX:h.positionX,positionY:h.positionY}))},c=()=>{if(typeof window<"u"){const h=sessionStorage.getItem("econotas-viewport");if(h)try{return JSON.parse(h)}catch{return null}}return null};return vn.useEffect(()=>{const h=c();h&&a.current&&a.current.setTransform(h.positionX,h.positionY,h.zoom,0)},[]),p.jsx(gM,{ref:a,minScale:.5,maxScale:5,initialScale:1,centerOnInit:!0,wheel:{step:.1},panning:{disabled:i==="RECORDING",velocityDisabled:!1},doubleClick:{disabled:!0},onTransformed:h=>{u(h.state)},children:({zoomIn:h,zoomOut:f,resetTransform:m})=>p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[p.jsx("button",{onClick:()=>h(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Zoom in",disabled:o,children:p.jsx(qR,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>f(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Zoom out",disabled:o,children:p.jsx(KR,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>m(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Reset zoom",disabled:o,children:p.jsx(mR,{className:"w-5 h-5"})})]}),p.jsx(_M,{wrapperStyle:{width:"100%",height:"100%",cursor:i==="RECORDING"?"crosshair":"grab"},contentStyle:{width:"100%",height:"100%"},children:p.jsx("canvas",{ref:t,onPointerDown:n,onPointerMove:r,onPointerUp:s,onPointerLeave:s,className:"touch-none",style:{touchAction:"none",cursor:i==="RECORDING"?"crosshair":"default"}})})]})})},EM=[{name:"Rojo",value:"#ef4444",hex:"#ef4444"},{name:"Azul",value:"#3b82f6",hex:"#3b82f6"},{name:"Verde",value:"#10b981",hex:"#10b981"},{name:"Amarillo",value:"#eab308",hex:"#eab308"},{name:"Negro",value:"#000000",hex:"#000000"},{name:"Blanco",value:"#ffffff",hex:"#ffffff"},{name:"Naranja",value:"#f97316",hex:"#f97316"},{name:"Morado",value:"#a855f7",hex:"#a855f7"}],TM=1,xM=20,SM=4,CM="#e2e8f0",iu=50,cS=120*60*1e3,IM=cS*.9,kM=({selectedColor:t,onColorChange:e,disabled:n=!1})=>p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("label",{className:"text-xs font-medium text-[var(--text)] opacity-70",children:"Color"}),p.jsx("div",{className:"grid grid-cols-4 gap-2",children:EM.map(r=>p.jsx("button",{onClick:()=>!n&&e(r.value),disabled:n,className:`
              w-10 h-10 rounded-lg border-2 transition-all
              ${t===r.value?"border-[var(--accent)] scale-110 shadow-lg":"border-[var(--border)] hover:border-[var(--text)] hover:scale-105"}
              ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}
            `,style:{backgroundColor:r.value},title:r.name,"aria-label":`Select ${r.name} color`,children:t===r.value&&p.jsx("div",{className:"flex items-center justify-center",children:p.jsx("span",{className:`text-2xl ${r.value==="#ffffff"||r.value==="#eab308"?"text-slate-900":"text-white"}`,children:""})})},r.value))})]}),AM=({currentTool:t,onToolChange:e,penColor:n,onColorChange:r,penThickness:s,onThicknessChange:i,canUndo:o,canRedo:a,onUndo:u,onRedo:c,disabled:h=!1})=>{const[f,m]=vn.useState(!1);return p.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-3",children:[p.jsx("div",{className:"bg-[var(--bg-card)]/90 backdrop-blur-md rounded-2xl p-3 border border-[var(--border)] shadow-xl transition-all duration-300",children:p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(cs,{onClick:()=>e("pen"),variant:t==="pen"?"primary":"secondary",disabled:h,label:"Lpiz",children:p.jsx(wR,{className:"w-5 h-5"})}),p.jsx(cs,{onClick:()=>e("eraser"),variant:t==="eraser"?"primary":"secondary",disabled:h,label:"Borrador",children:p.jsx(ZA,{className:"w-5 h-5"})})]}),t==="pen"&&p.jsx(cs,{onClick:()=>m(!f),variant:"secondary",disabled:h,label:"Selector de color",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 rounded-full border border-[var(--border)] shadow-sm",style:{backgroundColor:n}}),p.jsx("span",{className:"text-xs font-medium",children:"Color"})]})}),t==="pen"&&p.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-[var(--border)]",children:[p.jsxs("label",{className:"text-xs font-medium text-[var(--text)] opacity-70",children:["Grosor: ",s,"px"]}),p.jsx("input",{type:"range",min:TM,max:xM,value:s,onChange:y=>i(Number(y.target.value)),disabled:h,className:"w-full h-2 bg-[var(--bg)] rounded-lg appearance-none cursor-pointer accent-[var(--accent)]"}),p.jsx("div",{className:"flex justify-center py-1",children:p.jsx("div",{className:"rounded-full transition-all duration-200",style:{width:`${s}px`,height:`${s}px`,backgroundColor:n,minWidth:"4px",minHeight:"4px"}})})]})]})}),f&&t==="pen"&&p.jsx("div",{className:"bg-[var(--bg-card)]/95 backdrop-blur-md rounded-2xl p-3 border border-[var(--border)] shadow-xl animate-in fade-in zoom-in-95 duration-200",children:p.jsx(kM,{selectedColor:n,onColorChange:y=>{r(y),m(!1)},disabled:h})})]})};function RM(t){return t?`User ${t.slice(-4).toUpperCase()}`:"User"}function bM(t){if(!t)return"#6366f1";const e=["#6366f1","#ec4899","#14b8a6","#f59e0b","#8b5cf6","#10b981","#f97316","#06b6d4","#ef4444","#3b82f6"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]}function hS(t){if(!t)return"U";const e=t.split(" ");return e.length>=2?e[0][0]+e[1][0]:t.slice(0,2).toUpperCase()}function gg(t){const e=Math.floor(t/1e3),n=Math.floor(e/60),r=e%60;return`${n}:${r.toString().padStart(2,"0")}`}function PM(t){const n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"just now":r<60?`${r}m ago`:s<24?`${s}h ago`:i<7?`${i}d ago`:t.toLocaleDateString()}const NM=({comment:t,currentUserId:e,isActive:n,onSeek:r,onEdit:s,onDelete:i})=>{var E;const[o,a]=A.useState(!1),[u,c]=A.useState(t.text),h=t.userId===e,f=()=>{u.trim()&&u!==t.text&&s(t.id,u.trim()),a(!1)},m=()=>{c(t.text),a(!1)},y=()=>{window.confirm("Eliminar este comentario?")&&i(t.id)},S=(E=t.createdAt)!=null&&E.toDate?t.createdAt.toDate():new Date(t.createdAt);return p.jsx("div",{className:`p-4 rounded-lg transition-all cursor-pointer hover:bg-slate-700/50 ${n?"bg-indigo-500/20 border-l-4 border-indigo-500":"bg-slate-700/30 border-l-4 border-transparent"}`,onClick:()=>!o&&r(t.timestamp),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",style:{backgroundColor:t.userColor},children:hS(t.userName)}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx("span",{className:"font-semibold text-slate-200",children:t.userName}),p.jsx("span",{className:"text-slate-500",children:""}),p.jsx("span",{className:"text-indigo-400 font-mono text-xs",children:gg(t.timestamp)})]}),h&&!o&&p.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[p.jsx("button",{onClick:I=>{I.stopPropagation(),a(!0)},className:"p-1.5 text-slate-400 hover:text-white hover:bg-slate-600 rounded transition-colors",title:"Editar",children:p.jsx(sm,{className:"w-3.5 h-3.5"})}),p.jsx("button",{onClick:I=>{I.stopPropagation(),y()},className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Eliminar",children:p.jsx(Uc,{className:"w-3.5 h-3.5"})})]})]}),o?p.jsxs("div",{className:"mt-2",onClick:I=>I.stopPropagation(),children:[p.jsx("textarea",{value:u,onChange:I=>c(I.target.value),maxLength:500,className:"w-full bg-slate-800 border border-indigo-500 rounded px-3 py-2 text-white text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none",rows:3,autoFocus:!0,onKeyDown:I=>{I.key==="Enter"&&I.ctrlKey&&f(),I.key==="Escape"&&m()}}),p.jsxs("div",{className:"flex items-center justify-between mt-2",children:[p.jsxs("span",{className:"text-xs text-slate-500",children:[u.length,"/500"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:m,className:"px-3 py-1.5 text-sm bg-slate-600 hover:bg-slate-500 rounded text-white transition-colors flex items-center gap-1",children:[p.jsx(tr,{className:"w-3.5 h-3.5"}),"Cancelar"]}),p.jsxs("button",{onClick:f,disabled:!u.trim(),className:"px-3 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-700 rounded text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[p.jsx(nm,{className:"w-3.5 h-3.5"}),"Guardar"]})]})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mt-1",children:t.text}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:PM(S)})]})]})]})})},DM=({currentTime:t,onSubmit:e,userName:n,userColor:r,disabled:s=!1})=>{const[i,o]=A.useState(""),[a,u]=A.useState(!1),c=()=>{i.trim()&&(e(i.trim()),o(""),u(!1))},h=f=>{f.key==="Enter"&&f.ctrlKey&&c(),f.key==="Escape"&&(o(""),u(!1))};return s?null:p.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-800/50",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",style:{backgroundColor:r},children:hS(n)}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"text-xs text-slate-400",children:"Comentar en"}),p.jsx("span",{className:"text-sm text-indigo-400 font-mono font-semibold",children:gg(t)})]}),p.jsx("textarea",{value:i,onChange:f=>o(f.target.value),onFocus:()=>u(!0),onKeyDown:h,maxLength:500,placeholder:"Agrega un comentario...",className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 resize-none transition-all",rows:a?3:1}),a&&p.jsxs("div",{className:"flex items-center justify-between mt-2",children:[p.jsxs("span",{className:"text-xs text-slate-500",children:[i.length,"/500  Ctrl+Enter para publicar"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>{o(""),u(!1)},className:"px-3 py-1.5 text-sm text-slate-400 hover:text-white transition-colors",children:"Cancelar"}),p.jsxs("button",{onClick:c,disabled:!i.trim(),className:"px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 font-medium",children:[p.jsx(im,{className:"w-4 h-4"}),"Comentar"]})]})]})]})]})})},OM=({isOpen:t,onClose:e,sessionId:n,comments:r,currentTime:s,onSeekToTime:i,userId:o,userName:a,userColor:u,canEdit:c=!0,onAddComment:h,onEditComment:f,onDeleteComment:m})=>{const y=A.useRef(null),S=A.useRef(null),E=r.find(I=>Math.abs(I.timestamp-s)<2e3);return A.useEffect(()=>{E&&S.current&&t&&S.current.scrollIntoView({behavior:"smooth",block:"center"})},[E==null?void 0:E.id,t]),A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:e}),p.jsxs("div",{ref:y,className:"fixed top-0 right-0 h-full w-full sm:w-96 bg-slate-800 shadow-2xl z-50 flex flex-col transform transition-transform duration-300 ease-out",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Sf,{className:"w-5 h-5 text-indigo-400"}),p.jsx("h2",{className:"text-lg font-bold text-white",children:"Comentarios"}),p.jsx("span",{className:"px-2 py-0.5 text-xs bg-indigo-500/20 text-indigo-300 rounded-full font-semibold",children:r.length})]}),p.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Cerrar",children:p.jsx(tr,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[p.jsx("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mb-4",children:p.jsx(Sf,{className:"w-8 h-8 text-slate-500"})}),p.jsx("h3",{className:"text-lg font-semibold text-slate-300 mb-2",children:"Sin comentarios"}),p.jsx("p",{className:"text-sm text-slate-500 max-w-xs",children:c?"Agrega el primer comentario a esta sesin":"An no hay comentarios en esta sesin"})]}):p.jsx("div",{className:"space-y-3 group",children:r.map(I=>p.jsx("div",{ref:(E==null?void 0:E.id)===I.id?S:null,children:p.jsx(NM,{comment:I,currentUserId:o,isActive:(E==null?void 0:E.id)===I.id,onSeek:i,onEdit:f,onDelete:m})},I.id))})}),c&&p.jsx(DM,{currentTime:s,onSubmit:h,userName:a,userColor:u})]})]}):null},LM=({comment:t,duration:e,onSeek:n})=>{const r=e>0?t.timestamp/e*100:0,s=i=>{i.stopPropagation(),n(t.timestamp)};return p.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 group cursor-pointer z-10",style:{left:`${r}%`},onClick:s,children:[p.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white shadow-lg transition-transform duration-200 ease-out group-hover:scale-150",style:{backgroundColor:t.userColor}}),p.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:p.jsxs("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-slate-700 whitespace-nowrap max-w-xs",children:[p.jsx("div",{className:"font-semibold text-indigo-300 mb-1",children:t.userName}),p.jsx("div",{className:"text-slate-400 mb-1 font-mono",children:gg(t.timestamp)}),p.jsx("div",{className:"text-slate-200 truncate",children:t.text}),p.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-px",children:p.jsx("div",{className:"w-2 h-2 bg-slate-900 border-r border-b border-slate-700 transform rotate-45"})})]})})]})},dS=({rating:t,max:e=5,size:n=16,interactive:r=!1,onRate:s,className:i=""})=>{const[o,a]=vn.useState(0),u=f=>{r&&a(f)},c=()=>{r&&a(0)},h=f=>{r&&s&&s(f)};return p.jsx("div",{className:`flex items-center gap-1 ${i}`,onMouseLeave:c,children:[...Array(e)].map((f,m)=>{const y=m+1,S=r?y<=(o||t):y<=t;return p.jsx("button",{type:"button",onClick:()=>h(y),onMouseEnter:()=>u(y),className:`${r?"cursor-pointer hover:scale-110 transition-transform":"cursor-default"} focus:outline-none`,disabled:!r,children:p.jsx(Fc,{size:n,className:`${S?"fill-yellow-400 text-yellow-400":"fill-transparent text-slate-600"} transition-colors duration-200`})},y)})})},VM=({isOpen:t,onClose:e,onRate:n,initialRating:r=0,sessionName:s})=>{const[i,o]=A.useState(r),[a,u]=A.useState(""),[c,h]=A.useState(!1);if(!t)return null;const f=async m=>{if(m.preventDefault(),i!==0){h(!0);try{await n(i,a),e()}catch(y){console.error("Error submitting rating:",y)}finally{h(!1)}}};return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-xl font-bold text-white",children:"Calificar Sesin"}),p.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:p.jsx(tr,{size:24})})]}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsxs("p",{className:"text-slate-300 mb-4",children:["Qu te pareci ",p.jsxs("span",{className:"font-semibold text-indigo-400",children:['"',s,'"']}),"?"]}),p.jsx("div",{className:"flex justify-center mb-2",children:p.jsx(dS,{rating:i,interactive:!0,size:40,onRate:o})}),p.jsxs("p",{className:"text-sm text-slate-400 h-5",children:[i===1&&"Necesita mejorar",i===2&&"Regular",i===3&&"Buena",i===4&&"Muy buena",i===5&&"Excelente!"]})]}),p.jsxs("form",{onSubmit:f,children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Comentario (opcional)"}),p.jsx("textarea",{value:a,onChange:m=>u(m.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none h-24",placeholder:"Qu fue lo que ms te gust?"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancelar"}),p.jsx("button",{type:"submit",disabled:i===0||c,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${i>0&&!c?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-900/20":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:c?"Enviando...":"Enviar Calificacin"})]})]})]})})},xd={slate:{name:"Dark Slate",colors:{"--color-bg-primary":"#0f172a","--color-bg-secondary":"#1e293b","--color-bg-tertiary":"#334155","--color-text-primary":"#f1f5f9","--color-text-secondary":"#94a3b8","--color-accent-primary":"#6366f1","--color-accent-hover":"#4f46e5","--color-accent-light":"rgba(99, 102, 241, 0.1)","--color-border":"#334155"}},ocean:{name:"Ocean Blue",colors:{"--color-bg-primary":"#082f49","--color-bg-secondary":"#0c4a6e","--color-bg-tertiary":"#075985","--color-text-primary":"#f0f9ff","--color-text-secondary":"#bae6fd","--color-accent-primary":"#06b6d4","--color-accent-hover":"#0891b2","--color-accent-light":"rgba(6, 182, 212, 0.1)","--color-border":"#075985"}},forest:{name:"Forest Green",colors:{"--color-bg-primary":"#052e16","--color-bg-secondary":"#064e3b","--color-bg-tertiary":"#065f46","--color-text-primary":"#ecfdf5","--color-text-secondary":"#a7f3d0","--color-accent-primary":"#10b981","--color-accent-hover":"#059669","--color-accent-light":"rgba(16, 185, 129, 0.1)","--color-border":"#065f46"}},sunset:{name:"Sunset Orange",colors:{"--color-bg-primary":"#18181b","--color-bg-secondary":"#27272a","--color-bg-tertiary":"#3f3f46","--color-text-primary":"#fafafa","--color-text-secondary":"#a1a1aa","--color-accent-primary":"#f97316","--color-accent-hover":"#ea580c","--color-accent-light":"rgba(249, 115, 22, 0.1)","--color-border":"#3f3f46"}},light:{name:"Light Clean",colors:{"--color-bg-primary":"#ffffff","--color-bg-secondary":"#f8fafc","--color-bg-tertiary":"#f1f5f9","--color-text-primary":"#0f172a","--color-text-secondary":"#475569","--color-accent-primary":"#6366f1","--color-accent-hover":"#4f46e5","--color-accent-light":"rgba(99, 102, 241, 0.1)","--color-border":"#e2e8f0"}}},fS=A.createContext(),MM=()=>{const t=A.useContext(fS);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},jM=({children:t})=>{const[e,n]=A.useState(()=>localStorage.getItem("econotas-mode")||"dark"),[r,s]=A.useState(()=>{const u=localStorage.getItem("econotas-theme");return u&&xd[u]?u:"slate"}),i=()=>e==="light"?"light":r==="light"?"slate":r;A.useEffect(()=>{const u=i(),c=xd[u],h=document.documentElement;Object.entries(c.colors).forEach(([f,m])=>{h.style.setProperty(f,m)}),localStorage.setItem("econotas-mode",e),localStorage.setItem("econotas-theme",r)},[r,e]);const o=()=>{n(u=>u==="dark"?"light":"dark")},a={mode:e,currentTheme:r,activeTheme:i(),setTheme:s,toggleMode:o,themes:xd};return p.jsx(fS.Provider,{value:a,children:t})},pS=()=>{const{mode:t,currentTheme:e,activeTheme:n,setTheme:r,toggleMode:s,themes:i}=MM(),[o,a]=A.useState(!1),u=Object.entries(i).filter(([c])=>t==="light"?c==="light":c!=="light");return p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>a(!o),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Cambiar tema",children:t==="dark"?p.jsx(mv,{className:"w-5 h-5"}):p.jsx(gv,{className:"w-5 h-5"})}),o&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),p.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 p-2 animate-in fade-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"px-2 py-2 mb-2 border-b border-slate-700",children:[p.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"MODO"}),p.jsxs("div",{className:"flex gap-1 bg-slate-900 rounded-lg p-1",children:[p.jsxs("button",{onClick:s,className:`flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="dark"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,children:[p.jsx(mv,{className:"w-3.5 h-3.5"}),"Oscuro"]}),p.jsxs("button",{onClick:s,className:`flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="light"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,children:[p.jsx(gv,{className:"w-3.5 h-3.5"}),"Claro"]})]})]}),t==="dark"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"text-xs font-semibold text-slate-400 px-2 py-1 mb-1",children:"PALETA"}),u.map(([c,h])=>p.jsxs("button",{onClick:()=>{r(c),a(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${e===c?"bg-indigo-500/10 text-indigo-400":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.colors["--color-accent-primary"]}}),h.name]}),e===c&&p.jsx(nm,{className:"w-3 h-3"})]},c))]})]})]})]})},FM=(t=[])=>{const[e,n]=A.useState(t),[r,s]=A.useState({past:[],future:[]}),i=r.past.length>0,o=r.future.length>0,a=A.useCallback(y=>{n(S=>{const E=[...S,y];return s(I=>({past:[...I.past,S].slice(-iu),future:[]})),E})},[]),u=A.useCallback(y=>{n(y),s({past:[],future:[]})},[]),c=A.useCallback(()=>{i&&s(y=>{const S=y.past[y.past.length-1],E=y.past.slice(0,-1);return n(S),{past:E,future:[e,...y.future].slice(0,iu)}})},[i,e]),h=A.useCallback(()=>{o&&s(y=>{const S=y.future[0],E=y.future.slice(1);return n(S),{past:[...y.past,e].slice(-iu),future:E}})},[o,e]),f=A.useCallback(()=>{s({past:[],future:[]})},[]),m=A.useCallback(y=>{n(S=>{const E=S.filter((I,_)=>_!==y);return s(I=>({past:[...I.past,S].slice(-iu),future:[]})),E})},[]);return{strokes:e,setStrokes:u,undo:c,redo:h,canUndo:i,canRedo:o,addStroke:a,deleteStroke:m,clearHistory:f}},UM=(t="es-ES")=>{const[e,n]=A.useState([]),[r,s]=A.useState(!1),[i,o]=A.useState(null),a=A.useRef(null),u=A.useRef(0),c=A.useRef(""),h=A.useCallback(()=>"webkitSpeechRecognition"in window||"SpeechRecognition"in window,[]),f=A.useCallback(()=>{if(!h())return o("Tu navegador no soporta transcripcin automtica. Usa Chrome o Edge."),null;const I=window.SpeechRecognition||window.webkitSpeechRecognition,_=new I;return _.continuous=!0,_.interimResults=!0,_.lang=t,_.maxAlternatives=1,_},[t,h]),m=A.useCallback(I=>{if(!h()){o("Transcripcin no soportada en este navegador");return}try{const _=f();if(!_)return;u.current=I||Date.now(),c.current="",n([]),o(null),_.onstart=()=>{console.log(" Transcripcin iniciada"),s(!0)},_.onresult=v=>{let x="",D="";for(let V=v.resultIndex;V<v.results.length;V++){const U=v.results[V][0].transcript,k=v.results[V][0].confidence;if(v.results[V].isFinal){D+=U+" ";const w=Date.now(),C=w-u.current-U.split(" ").length*200,R=w-u.current,P={text:U.trim(),startTime:Math.max(0,C),endTime:R,confidence:k||.9,timestamp:new Date().toISOString()};n(N=>[...N,P]),c.current=""}else x+=U,c.current=x}},_.onerror=v=>{console.error(" Error de transcripcin:",v.error),v.error==="no-speech"?console.log(" No se detect voz, continuando..."):v.error==="network"?o("Error de red. Verifica tu conexin a internet."):o(`Error de transcripcin: ${v.error}`)},_.onend=()=>{if(console.log(" Transcripcin detenida"),s(!1),a.current&&r)try{_.start()}catch{console.log("No se pudo reiniciar transcripcin")}},_.start(),a.current=_}catch(_){console.error("Error iniciando transcripcin:",_),o("No se pudo iniciar la transcripcin"),s(!1)}},[f,h]),y=A.useCallback(()=>{if(a.current)try{a.current.stop(),a.current=null,s(!1),console.log(" Transcripcin finalizada")}catch(I){console.error("Error deteniendo transcripcin:",I)}},[]),S=A.useCallback(()=>e.map(I=>I.text).join(" "),[e]),E=A.useCallback(I=>{if(!I.trim())return[];const _=I.toLowerCase();return e.map((v,x)=>({...v,index:x,matches:v.text.toLowerCase().includes(_)})).filter(v=>v.matches)},[e]);return A.useEffect(()=>()=>{a.current&&a.current.stop()},[]),{segments:e,isTranscribing:r,error:i,isSupported:h(),startTranscription:m,stopTranscription:y,getFullText:S,searchInTranscript:E,currentSegment:c.current}},Sd=({readOnly:t=!1})=>{var Ti;const{sessionId:e}=Ok(),n=CE(),[r,s]=A.useState("IDLE"),[i,o]=A.useState(0),[a,u]=A.useState(0),[c,h]=A.useState(null),[f,m]=A.useState(null),[y,S]=A.useState("pen"),[E,I]=A.useState(CM),[_,v]=A.useState(SM),{strokes:x,setStrokes:D,undo:V,redo:U,canUndo:k,canRedo:w,addStroke:C,clearHistory:R}=FM([]),[P,N]=A.useState(""),[b,we]=A.useState(null),[qe,mt]=A.useState(!1),[zt,W]=A.useState(!!e),[J,Q]=A.useState({isOpen:!1,type:"info",title:"",message:""}),[ue,ae]=A.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[xt,Te]=A.useState(!1),[me,Pe]=A.useState(!1),[Ge,an]=A.useState(!0),[St,kr]=A.useState([]),[Dn,Ar]=A.useState(!1),{segments:Lt,isSupported:vi,startTranscription:Io,stopTranscription:Ps,getFullText:Ns}=UM("es-ES"),[Ds,Je]=A.useState(""),[Ze,Rr]=A.useState("#6366f1"),[ko,br]=A.useState(!1),[Ct,En]=A.useState(0),[Os,_i]=A.useState(!1),M=A.useRef(null),$=A.useRef(null),G=A.useRef([]),ie=A.useRef(null),Ke=A.useRef(0),lt=A.useRef(null),ut=A.useRef(null),It=A.useRef(null);A.useEffect(()=>{(async()=>{const K=Qt.currentUser;if(K){const oe=RM(K.uid),pe=bM(K.uid);Je(oe),Rr(pe)}})()},[]),A.useEffect(()=>{if(e){const B=Dx(e,K=>{kr(K)});return It.current=B,()=>{It.current&&It.current()}}},[e]),A.useEffect(()=>{e&&(async()=>{try{const K=await Ax(e);K&&(N(K.sessionName),we(K.createdAt?K.createdAt.toDate?K.createdAt.toDate():new Date(K.createdAt):new Date),m(K.audioUrl),D(JSON.parse(K.strokes)),o(K.durationMs/1e3),setTimeout(()=>un(0,!0),100))}catch(K){console.error("Error loading session:",K),Q({isOpen:!0,type:"error",title:"Error",message:"Error al cargar la sesin. Por favor intenta nuevamente."})}finally{W(!1)}})()},[e]),A.useEffect(()=>{e&&!Os&&(async()=>{if(await Ox(e),_i(!0),Qt.currentUser){const K=await Vx(e,Qt.currentUser.uid);K&&En(K.rating)}})()},[e,Os]),A.useEffect(()=>{const B=M.current;if(!B)return;const K=B.getContext("2d"),oe=()=>{const pe=B.parentElement;pe&&(B.width=pe.clientWidth,B.height=pe.clientHeight),K.lineCap="round",K.lineJoin="round",un(0,!0)};return window.addEventListener("resize",oe),oe(),()=>window.removeEventListener("resize",oe)},[x,zt]),A.useEffect(()=>{let B;return r==="RECORDING"&&(B=setInterval(()=>{const K=Date.now()-Ke.current;o(K/1e3),u(K),!xt&&K>=IM&&(Te(!0),Q({isOpen:!0,type:"warning",title:"Lmite de tiempo",message:"Te quedan aproximadamente 12 minutos de grabacin. La sesin se detendr automticamente al alcanzar 120 minutos."})),K>=cS&&(On(),Q({isOpen:!0,type:"info",title:"Grabacin completada",message:"Se alcanz el lmite mximo de 120 minutos. La grabacin se detuvo automticamente."}))},100)),()=>clearInterval(B)},[r,xt]);const ln=async()=>{if(!t)try{console.log(" Solicitando micrfono");const B=await navigator.mediaDevices.getUserMedia({audio:!0});console.log(" Acceso concedido");const K=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":MediaRecorder.isTypeSupported("audio/mp4")?"audio/mp4":"";console.log(` MIME: ${K||"default"}`);const oe=K?{mimetype:K}:void 0;$.current=new MediaRecorder(B,oe),G.current=[],$.current.ondataavailable=Ne=>{Ne.data.size>0&&G.current.push(Ne.data)},$.current.onstop=()=>{console.log(" Detenido");const Ne=new Blob(G.current,{type:K||"audio/webm"});if(Ne.size===0){Q({isOpen:!0,type:"error",title:"Error de grabacin",message:"No se grab audio. Por favor verifica el acceso al micrfono e intenta nuevamente."});return}const Le=URL.createObjectURL(Ne);h(Ne),m(Le),console.log(" Audio listo")},$.current.start(),console.log(" Grabando"),Ke.current=Date.now(),Ke.current=Date.now(),D([]),R(),Te(!1),o(0),s("RECORDING"),vi&&Io(Date.now()),M.current.getContext("2d").clearRect(0,0,M.current.width,M.current.height)}catch(B){console.error(" Error:",B),Q({isOpen:!0,type:"error",title:"Error de micrfono",message:`No se pudo acceder al micrfono: ${B.message}`})}},On=()=>{$.current&&r==="RECORDING"&&($.current.stop(),$.current.stream.getTracks().forEach(B=>B.stop()),s("IDLE"),Ps())},Ln=B=>{const K=M.current,oe=K.getBoundingClientRect(),pe=K.width/oe.width,Ne=K.height/oe.height;return{offsetX:(B.clientX-oe.left)*pe,offsetY:(B.clientY-oe.top)*Ne,pressure:B.pressure}},yl=B=>{if(r!=="RECORDING"||t)return;const{offsetX:K,offsetY:oe,pressure:pe}=Ln(B),Ne=Date.now()-Ke.current;ut.current={tool:y,color:E,thickness:_,startTime:Ne,points:[{x:K,y:oe,p:pe||.5,t:Ne}]};const Le=M.current.getContext("2d");Le.globalCompositeOperation=y==="eraser"?"destination-out":"source-over",Le.beginPath(),Le.moveTo(K,oe),Le.lineWidth=(pe||.5)*_,Le.strokeStyle=E,Le.lineCap="round",Le.lineJoin="round"},Ls=B=>{if(r!=="RECORDING"||!ut.current||t)return;B.preventDefault();const{offsetX:K,offsetY:oe,pressure:pe}=Ln(B),Ne=Date.now()-Ke.current;ut.current.points.push({x:K,y:oe,p:pe||.5,t:Ne});const Le=M.current.getContext("2d");Le.lineWidth=(pe||.5)*ut.current.thickness,Le.lineTo(K,oe),Le.stroke(),Le.beginPath(),Le.moveTo(K,oe)},vl=()=>{if(r!=="RECORDING"||!ut.current||t)return;const B=ut.current;C(B),ut.current=null},ct=async()=>{if(!(!f||!ie.current))if(r==="PLAYING")ie.current.pause(),s("PAUSED"),cancelAnimationFrame(lt.current);else try{await ie.current.play(),s("PLAYING"),wi()}catch(B){console.error(" Error:",B)}},wi=()=>{if(!ie.current||ie.current.paused||ie.current.ended){ie.current&&ie.current.ended&&s("IDLE");return}const B=ie.current.currentTime*1e3;u(B),un(B,!1),lt.current=requestAnimationFrame(wi)},un=(B,K=!1)=>{const oe=M.current;if(!oe)return;const pe=oe.getContext("2d");pe.clearRect(0,0,oe.width,oe.height),x.forEach(Ne=>{if(!Ne||!K&&Ne.startTime>B)return;pe.globalCompositeOperation=Ne.tool==="eraser"?"destination-out":"source-over",pe.beginPath(),pe.strokeStyle=Ne.color,pe.lineCap="round",pe.lineJoin="round";let Le=!1;for(let Ms=0;Ms<Ne.points.length;Ms++){const rr=Ne.points[Ms];if(!K&&rr.t>B)break;const Eh=Ne.thickness||4;pe.lineWidth=rr.p*Eh,Le?pe.lineTo(rr.x,rr.y):(pe.moveTo(rr.x,rr.y),Le=!0)}Le&&pe.stroke()}),pe.globalCompositeOperation="source-over"},Vs=B=>{if(!ie.current)return;const K=Number(B.target.value);ie.current.currentTime=K,u(K*1e3),un(K*1e3,!1)},vh=B=>{const K=Math.floor(B/1e3),oe=Math.floor(K/60),pe=K%60;return`${oe}:${pe.toString().padStart(2,"0")}`},_h=async B=>{if(!(!e||!Qt.currentUser))try{await bx({sessionId:e,userId:Qt.currentUser.uid,userName:Ds,userColor:Ze,timestamp:a,text:B})}catch(K){console.error("Error adding comment:",K),Q({isOpen:!0,type:"error",title:"Error",message:"No se pudo agregar el comentario. Intenta nuevamente."})}},Pr=async(B,K)=>{try{await Px(B,K)}catch(oe){console.error("Error updating comment:",oe),Q({isOpen:!0,type:"error",title:"Error",message:"No se pudo actualizar el comentario."})}},wh=async B=>{try{await Nx(B)}catch(K){console.error("Error deleting comment:",K),Q({isOpen:!0,type:"error",title:"Error",message:"No se pudo eliminar el comentario."})}},_l=B=>{ie.current&&(ie.current.currentTime=B/1e3,u(B),un(B,!1))},Ei=async(B,K)=>{if(!(!e||!Qt.currentUser))try{await Lx(e,Qt.currentUser.uid,B,K),En(B),Q({isOpen:!0,type:"success",title:"Gracias!",message:"Tu calificacin ha sido guardada."})}catch(oe){console.error("Error saving rating:",oe),Q({isOpen:!0,type:"error",title:"Error",message:"No se pudo guardar la calificacin."})}},wl=async()=>{try{const{exportSessionToJson:B}=await Tf(async()=>{const{exportSessionToJson:pe}=await import("./exportUtils-Dar7xkeZ.js");return{exportSessionToJson:pe}},[]),K={id:e,sessionName:P,createdAt:b||new Date,durationMs:i*1e3,audioUrl:f,strokes:x};B(K,St)&&Q({isOpen:!0,type:"success",title:"Exportacin exitosa",message:"La sesin se ha descargado correctamente."})}catch(B){console.error("Export error:",B),Q({isOpen:!0,type:"error",title:"Error de exportacin",message:"No se pudo exportar la sesin."})}},El=async()=>{if(!(!c||!Qt.currentUser)){if(!P.trim()){Q({isOpen:!0,type:"warning",title:"Nombre requerido",message:"Por favor ingresa un nombre para la sesin antes de guardar."});return}mt(!0);try{const B=Date.now().toString(),K=await Ix(c,B),oe={userId:Qt.currentUser.uid,sessionName:P,createdAt:new Date,audioUrl:K,durationMs:i*1e3,strokes:JSON.stringify(x),folderId:null,tags:[],isFavorite:!1},pe=await kx(oe);Lt.length>0&&await Mx(pe,{segments:Lt,fullText:Ns(),language:"es-ES"}),Q({isOpen:!0,type:"success",title:"xito!",message:"Sesin guardada exitosamente. Redirigiendo al panel..."}),setTimeout(()=>n("/"),1500)}catch(B){console.error("Error saving session:",B),Q({isOpen:!0,type:"error",title:"Error al guardar",message:`No se pudo guardar la sesin: ${B.message}`})}finally{mt(!1)}}};return zt?p.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):p.jsxs("div",{className:"flex flex-col h-screen bg-slate-900 text-slate-100 font-sans overflow-y-auto pb-4 pb-[env(safe-area-inset-bottom)]",children:[p.jsxs("div",{className:"h-16 border-b border-slate-700 bg-slate-800 flex items-center justify-between px-6 shadow-lg z-10",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:()=>n("/"),className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:p.jsx(VA,{className:"w-5 h-5 text-slate-400"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center transform rotate-12",children:p.jsx(SR,{className:"w-5 h-5 text-white"})}),p.jsxs("h1",{className:"text-xl font-bold tracking-tight hidden sm:block",children:["EcoNotas",p.jsx("span",{className:"text-indigo-400",children:"Notes"})]})]})]}),p.jsxs("div",{className:"flex items-center gap-4 bg-slate-900 py-1 px-4 rounded-full border border-slate-700",children:[p.jsx(VE,{className:`w-4 h-4 ${r==="RECORDING"?"text-red-500 animate-pulse":"text-slate-400"}`}),p.jsx("span",{className:"font-mono text-lg",children:vh(r==="RECORDING"||r==="IDLE"&&!f?i*1e3:a)})]}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("button",{onClick:()=>an(!Ge),className:`p-2 rounded-lg transition-colors ${Ge?"text-indigo-400 bg-indigo-500/10":"text-slate-400 hover:text-white hover:bg-slate-700"}`,title:Ge?"Ocultar herramientas":"Mostrar herramientas",children:p.jsx(VR,{className:"w-5 h-5"})}),e&&p.jsx("button",{onClick:()=>br(!0),className:"p-2 text-slate-400 hover:text-yellow-400 transition-colors",title:Ct>0?`Tu calificacin: ${Ct} estrellas`:"Calificar sesin",children:p.jsx(Fc,{className:`w-5 h-5 ${Ct>0?"fill-yellow-400 text-yellow-400":""}`})}),e&&p.jsxs("button",{onClick:()=>Pe(!me),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-semibold transition-all ${me?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[p.jsx(Sf,{className:"w-4 h-4"}),St.length>0&&p.jsx("span",{className:"text-sm",children:St.length})]}),(e||Lt.length>0)&&p.jsxs("button",{onClick:()=>Ar(!Dn),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-semibold transition-all ${Dn?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,title:"Transcripcin",children:[p.jsx(xf,{className:"w-4 h-4"}),Lt.length>0&&p.jsx("span",{className:"text-sm",children:Lt.length})]}),t&&p.jsx("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 text-xs font-bold rounded-full border border-indigo-500/30",children:"SOLO LECTURA"}),e&&p.jsx("button",{onClick:wl,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar a JSON",children:p.jsx(rm,{className:"w-5 h-5"})}),p.jsx(pS,{})]})]}),p.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-crosshair touch-none",children:[p.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(#6366f1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),p.jsx(wM,{canvasRef:M,strokes:x,onPointerDown:yl,onPointerMove:Ls,onPointerUp:vl,mode:r,readOnly:t}),Ge&&p.jsx(AM,{currentTool:y,onToolChange:S,penColor:E,onColorChange:I,penThickness:_,onThicknessChange:v,canUndo:k&&r!=="RECORDING",canRedo:w&&r!=="RECORDING",onUndo:V,onRedo:U,disabled:r==="PLAYING"||t}),r==="IDLE"&&x.length===0&&!t&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:p.jsxs("div",{className:"text-center text-slate-500",children:[p.jsx(pv,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),p.jsx("p",{className:"text-lg",children:"Presiona Grabar para comenzar"}),p.jsx("p",{className:"text-sm opacity-60",children:"Usa tu stylus o mouse"})]})})]}),p.jsxs("div",{className:"bg-slate-800 border-t border-slate-700 p-4 flex flex-col justify-center",children:[f&&p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[!t&&!e&&p.jsx("input",{type:"text",placeholder:"Nombre de la sesin...",value:P,onChange:B=>N(B.target.value),className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}),t&&p.jsx("p",{className:"text-lg font-semibold text-indigo-300",children:P})]}),p.jsx("audio",{ref:ie,src:f,className:"hidden",onPlay:()=>{console.log(" Play"),s("PLAYING"),wi()},onPause:()=>{console.log(" Pause"),s("PAUSED"),cancelAnimationFrame(lt.current)},onEnded:()=>{console.log(" Ended"),s("IDLE"),e&&Ct===0&&br(!0)}})]}),f&&ie.current&&p.jsxs("div",{className:"relative mb-4",children:[p.jsx("input",{type:"range",min:"0",max:ie.current.duration||i,value:a/1e3,onChange:Vs,className:"w-full h-1 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),St.map(B=>p.jsx(LM,{comment:B,duration:i*1e3,onSeek:_l},B.id))]}),p.jsx("div",{className:"flex items-center justify-center gap-6",children:r==="IDLE"||r==="PAUSED"?f?p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("button",{onClick:ct,className:"flex items-center gap-2 px-8 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold transition-all shadow-lg shadow-indigo-900/20",children:[p.jsx(Cf,{className:"w-5 h-5 fill-current"})," REPRODUCIR"]}),!t&&!e&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:El,disabled:qe,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold transition-all shadow-lg shadow-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[qe?p.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):p.jsx(PR,{className:"w-5 h-5"}),qe?"GUARDANDO...":"GUARDAR"]}),p.jsx("button",{onClick:()=>{ae({isOpen:!0,title:"Reiniciar grabacin?",message:"Ests seguro? Se perder la grabacin actual y no podrs recuperarla.",variant:"destructive",onConfirm:()=>{m(null),h(null),D([]),R(),o(0),N(""),Te(!1),M.current&&M.current.getContext("2d").clearRect(0,0,M.current.width,M.current.height)}})},className:"p-2 bg-slate-700 hover:bg-slate-600 rounded-full text-slate-300",title:"Reiniciar",children:p.jsx(RR,{className:"w-5 h-5"})})]})]}):!t&&p.jsxs("button",{onClick:ln,className:"flex items-center gap-2 px-8 py-2 bg-red-600 hover:bg-red-700 text-white rounded-full font-bold transition-all shadow-lg shadow-red-900/20 active:scale-95",children:[p.jsx(pv,{className:"w-5 h-5"})," GRABAR"]}):r==="RECORDING"?p.jsxs("button",{onClick:On,className:"flex items-center gap-2 px-8 py-2 bg-slate-200 text-slate-900 hover:bg-white rounded-full font-bold transition-all animate-pulse",children:[p.jsx(jR,{className:"w-5 h-5 fill-current"})," DETENER"]}):p.jsxs("button",{onClick:ct,className:"flex items-center gap-2 px-8 py-2 bg-yellow-500 text-black hover:bg-yellow-400 rounded-full font-bold transition-all",children:[p.jsx(TR,{className:"w-5 h-5 fill-current"})," PAUSA"]})})]}),p.jsx(Kx,{isOpen:J.isOpen,onClose:()=>Q({...J,isOpen:!1}),type:J.type,title:J.title,message:J.message}),p.jsx(Yx,{isOpen:ue.isOpen,onClose:()=>ae({...ue,isOpen:!1}),onConfirm:ue.onConfirm,onCancel:()=>ae({...ue,isOpen:!1}),title:ue.title,message:ue.message,variant:ue.variant}),e&&p.jsx(OM,{isOpen:me,onClose:()=>Pe(!1),sessionId:e,comments:St,currentTime:a,onSeekToTime:_l,userId:(Ti=Qt.currentUser)==null?void 0:Ti.uid,userName:Ds,userColor:Ze,canEdit:!t,onAddComment:_h,onEditComment:Pr,onDeleteComment:wh}),p.jsx(VM,{isOpen:ko,onClose:()=>br(!1),onRate:Ei,initialRating:Ct,sessionName:P}),Dn&&p.jsx("div",{className:"fixed right-0 top-16 bottom-0 w-96 z-40 shadow-2xl",children:p.jsx(oV,{segments:Lt,currentTime:a,onSeekToTime:B=>{ie.current&&(ie.current.currentTime=B/1e3,u(B),un(B,!1))},onExport:()=>{const{exportAsText:B}=require("./utils/transcriptionExport");B(Lt,P),Q({isOpen:!0,type:"success",title:"Exportacin exitosa",message:"La transcripcin se ha descargado correctamente."})},isRecording:r==="RECORDING"})})]})},zM=(t,e,n="all",r=[])=>{if(!t||!t.trim())return e;const s=t.toLowerCase().trim(),i=[];return e.forEach(o=>{var c;let a=[],u=!1;(n==="names"||n==="all")&&o.sessionName.toLowerCase().includes(s)&&(a.push({type:"name",text:o.sessionName}),u=!0),n==="all"&&(o.tags||[]).forEach(f=>{f.toLowerCase().includes(s)&&(a.push({type:"tag",text:f}),u=!0)}),(n==="comments"||n==="all")&&r.filter(f=>f.sessionId===o.id).forEach(f=>{f.text.toLowerCase().includes(s)&&(a.push({type:"comment",text:f.text,timestamp:f.timestamp}),u=!0)}),(n==="transcriptions"||n==="all")&&(c=o.transcription)!=null&&c.fullText&&o.transcription.fullText.toLowerCase().includes(s)&&(a.push({type:"transcription",text:o.transcription.fullText}),u=!0),u&&i.push({...o,searchMatches:a})}),i},BM=t=>{const e={};return t.forEach(n=>{(n.tags||[]).forEach(s=>{e[s]=(e[s]||0)+1})}),Object.entries(e).map(([n,r])=>({tag:n,count:r})).sort((n,r)=>r.count-n.count)},$M=({view:t,onViewChange:e})=>p.jsxs("div",{className:"flex gap-1 bg-slate-800 rounded-lg p-1",children:[p.jsxs("button",{onClick:()=>e("grid"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="grid"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,title:"Vista en cuadrcula",children:[p.jsx(hR,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),p.jsxs("button",{onClick:()=>e("list"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="list"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,title:"Vista en lista",children:[p.jsx(fR,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Lista"})]})]}),HM=({value:t,onChange:e,placeholder:n="Buscar sesiones..."})=>p.jsxs("div",{className:"relative flex-1 max-w-md",children:[p.jsx(ME,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),p.jsx("input",{type:"text",placeholder:n,value:t,onChange:r=>e(r.target.value),className:"w-full pl-10 pr-10 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}),t&&p.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-0.5 text-slate-400 hover:text-white transition-colors",children:p.jsx(tr,{className:"w-4 h-4"})})]}),WM=({filters:t,onFiltersChange:e})=>{const[n,r]=A.useState(!1),s=(a,u)=>{e({...t,[a]:u})},i=()=>{e({dateRange:"all",duration:"all",minRating:0,hasTranscription:!1,hasComments:!1})},o=Object.values(t).filter(a=>a!=="all"&&a!==0&&a!==!1).length;return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition-colors",children:[p.jsx(iR,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Filtros"}),o>0&&p.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-500 text-white text-xs font-bold rounded-full",children:o}),p.jsx(OE,{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`})]}),n&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),p.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 p-4 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("h3",{className:"text-sm font-semibold text-white",children:"Filtros"}),o>0&&p.jsx("button",{onClick:i,className:"text-xs text-indigo-400 hover:text-indigo-300",children:"Limpiar todo"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Fecha"}),p.jsxs("select",{value:t.dateRange,onChange:a=>s("dateRange",a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"all",children:"Todas"}),p.jsx("option",{value:"today",children:"Hoy"}),p.jsx("option",{value:"week",children:"ltima semana"}),p.jsx("option",{value:"month",children:"ltimo mes"}),p.jsx("option",{value:"year",children:"ltimo ao"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Duracin"}),p.jsxs("select",{value:t.duration,onChange:a=>s("duration",a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"all",children:"Todas"}),p.jsx("option",{value:"short",children:"Corta (< 15 min)"}),p.jsx("option",{value:"medium",children:"Media (15-60 min)"}),p.jsx("option",{value:"long",children:"Larga (> 60 min)"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Calificacin mnima"}),p.jsxs("select",{value:t.minRating,onChange:a=>s("minRating",Number(a.target.value)),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"0",children:"Cualquiera"}),p.jsx("option",{value:"1",children:" 1+"}),p.jsx("option",{value:"2",children:" 2+"}),p.jsx("option",{value:"3",children:" 3+"}),p.jsx("option",{value:"4",children:" 4+"}),p.jsx("option",{value:"5",children:" 5"})]})]}),p.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-700",children:[p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.hasTranscription,onChange:a=>s("hasTranscription",a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-slate-800"}),p.jsx("span",{className:"text-sm text-slate-300",children:"Con transcripcin"})]}),p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:t.hasComments,onChange:a=>s("hasComments",a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-slate-800"}),p.jsx("span",{className:"text-sm text-slate-300",children:"Con comentarios"})]})]})]})]})]})},qM=({folders:t=[],selectedFolder:e,onSelectFolder:n,onCreateFolder:r,onEditFolder:s,onDeleteFolder:i,sessionCounts:o={},favoriteCount:a=0,isCollapsed:u=!1,onToggleCollapse:c})=>{const[h,f]=A.useState(null),m=(E,I)=>{E.preventDefault(),E.stopPropagation(),f({folder:I,x:E.clientX,y:E.clientY})},y=()=>f(null),S=({folder:E,count:I,icon:_,color:v,isSpecial:x=!1})=>{const D=e===(E==null?void 0:E.id)||e===E;return p.jsxs("button",{onClick:()=>{n((E==null?void 0:E.id)||E),y()},onContextMenu:V=>!x&&m(V,E),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all group ${D?"bg-indigo-600 text-white":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[p.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${D?"bg-white/20":"bg-slate-700"}`,style:v&&!D?{backgroundColor:v+"20"}:{},children:p.jsx(_,{className:"w-4 h-4",style:v&&!D?{color:v}:{}})}),!u&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 text-left font-medium truncate",children:(E==null?void 0:E.name)||E}),p.jsx("span",{className:`text-sm px-2 py-0.5 rounded-full ${D?"bg-white/20 text-white":"bg-slate-700 text-slate-400"}`,children:I}),!x&&p.jsx("button",{onClick:V=>{V.stopPropagation(),m(V,E)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-slate-600 rounded transition-opacity",children:p.jsx(QA,{className:"w-4 h-4"})})]})]})};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`bg-slate-800 border-r border-slate-700 flex flex-col transition-all duration-300 ${u?"w-16":"w-64"}`,children:[p.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[!u&&p.jsx("h2",{className:"text-lg font-bold text-white",children:"Carpetas"}),p.jsx("button",{onClick:c,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white",title:u?"Expandir":"Colapsar",children:u?p.jsx(LE,{className:"w-5 h-5"}):p.jsx(BA,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:[p.jsx(S,{folder:"all",count:Object.values(o).reduce((E,I)=>E+I,0),icon:aR,isSpecial:!0}),p.jsx(S,{folder:"favorites",count:a,icon:Fc,color:"#f59e0b",isSpecial:!0}),t.length>0&&!u&&p.jsx("div",{className:"h-px bg-slate-700 my-2"}),t.map(E=>p.jsx(S,{folder:E,count:o[E.id]||0,icon:tc,color:E.color},E.id))]}),!u&&p.jsx("div",{className:"p-3 border-t border-slate-700",children:p.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 px-3 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[p.jsx(im,{className:"w-4 h-4"}),"Nueva Carpeta"]})})]}),h&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:y}),p.jsxs("div",{className:"fixed bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 z-50 min-w-[160px]",style:{left:`${h.x}px`,top:`${h.y}px`},children:[p.jsxs("button",{onClick:()=>{s(h.folder),y()},className:"w-full flex items-center gap-2 px-4 py-2 text-slate-300 hover:bg-slate-700 hover:text-white transition-colors",children:[p.jsx(sm,{className:"w-4 h-4"}),"Editar"]}),p.jsxs("button",{onClick:()=>{i(h.folder),y()},className:"w-full flex items-center gap-2 px-4 py-2 text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors",children:[p.jsx(Uc,{className:"w-4 h-4"}),"Eliminar"]})]})]})]})},Cd=[{name:"Indigo",value:"#6366f1"},{name:"Blue",value:"#3b82f6"},{name:"Green",value:"#10b981"},{name:"Yellow",value:"#f59e0b"},{name:"Red",value:"#ef4444"},{name:"Purple",value:"#a855f7"},{name:"Pink",value:"#ec4899"},{name:"Teal",value:"#14b8a6"}],GM=({isOpen:t,onClose:e,onSave:n,initialData:r=null})=>{const[s,i]=A.useState((r==null?void 0:r.name)||""),[o,a]=A.useState((r==null?void 0:r.color)||Cd[0].value),[u,c]=A.useState(""),h=()=>{if(!s.trim()){c("El nombre de la carpeta es requerido");return}n({name:s.trim(),color:o}),f()},f=()=>{i(""),a(Cd[0].value),c(""),e()};return t?p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-700",children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:o},children:p.jsx(tc,{className:"w-5 h-5 text-white"})}),p.jsx("h2",{className:"text-xl font-bold text-white",children:r?"Editar Carpeta":"Nueva Carpeta"})]}),p.jsx("button",{onClick:f,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white",children:p.jsx(tr,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nombre de la carpeta"}),p.jsx("input",{type:"text",value:s,onChange:m=>{i(m.target.value),c("")},placeholder:"Ej: Matemticas, Fsica...",className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",autoFocus:!0,onKeyDown:m=>{m.key==="Enter"&&h(),m.key==="Escape"&&f()}}),u&&p.jsx("p",{className:"mt-2 text-sm text-red-400",children:u})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Color"}),p.jsx("div",{className:"grid grid-cols-4 gap-3",children:Cd.map(m=>p.jsx("button",{onClick:()=>a(m.value),className:"relative h-12 rounded-lg transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/50",style:{backgroundColor:m.value},title:m.name,children:o===m.value&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx(nm,{className:"w-6 h-6 text-white drop-shadow-lg"})})},m.value))})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-700",children:[p.jsx("button",{onClick:f,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancelar"}),p.jsx("button",{onClick:h,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:r?"Guardar Cambios":"Crear Carpeta"})]})]})}):null},KM=({availableTags:t=[],selectedTags:e=[],onTagsChange:n})=>{const[r,s]=A.useState(!1),i=c=>{e.includes(c)?n(e.filter(h=>h!==c)):n([...e,c])},o=()=>{n([]),s(!1)},a=["bg-indigo-500/20 text-indigo-300 border-indigo-500/30","bg-blue-500/20 text-blue-300 border-blue-500/30","bg-green-500/20 text-green-300 border-green-500/30","bg-yellow-500/20 text-yellow-300 border-yellow-500/30","bg-purple-500/20 text-purple-300 border-purple-500/30","bg-pink-500/20 text-pink-300 border-pink-500/30"],u=c=>{const h=c.split("").reduce((f,m)=>f+m.charCodeAt(0),0);return a[h%a.length]};return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>s(!r),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e.length>0?"bg-indigo-600 text-white":"bg-slate-700 border border-slate-600 text-white hover:bg-slate-600"}`,children:[p.jsx(om,{className:"w-4 h-4"}),"Etiquetas",e.length>0&&p.jsx("span",{className:"px-1.5 py-0.5 bg-white/20 rounded-full text-xs",children:e.length}),p.jsx(OE,{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`})]}),r&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),p.jsxs("div",{className:"absolute top-full right-0 mt-2 w-72 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-20 max-h-96 overflow-hidden flex flex-col",children:[p.jsxs("div",{className:"p-3 border-b border-slate-700 flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-white",children:"Filtrar por etiquetas"}),e.length>0&&p.jsx("button",{onClick:o,className:"text-xs text-indigo-400 hover:text-indigo-300",children:"Limpiar todo"})]}),p.jsx("div",{className:"overflow-y-auto p-2",children:t.length===0?p.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"No hay etiquetas disponibles"}):p.jsx("div",{className:"space-y-1",children:t.map(({tag:c,count:h})=>{const f=e.includes(c);return p.jsxs("button",{onClick:()=>i(c),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${f?"bg-indigo-600 text-white":"hover:bg-slate-700 text-slate-300"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${f?"bg-white border-white":"border-slate-600"}`,children:f&&p.jsx("svg",{className:"w-3 h-3 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),p.jsx("span",{className:`text-sm font-medium px-2 py-0.5 rounded border ${f?"bg-white/20 border-white/30":u(c)}`,children:c})]}),p.jsx("span",{className:`text-xs ${f?"text-indigo-200":"text-slate-400"}`,children:h})]},c)})})})]})]})]})},YM=({tags:t=[],onChange:e,suggestions:n=[],placeholder:r="Agregar etiquetas..."})=>{const[s,i]=A.useState(""),[o,a]=A.useState(!1),u=A.useRef(null),c=n.filter(E=>!t.includes(E.tag)&&E.tag.toLowerCase().includes(s.toLowerCase())),h=E=>{const I=E.trim().toLowerCase();I&&!t.includes(I)&&e([...t,I]),i(""),a(!1)},f=E=>{e(t.filter(I=>I!==E))},m=E=>{E.key==="Enter"||E.key===","?(E.preventDefault(),s.trim()&&h(s)):E.key==="Backspace"&&!s&&t.length>0&&f(t[t.length-1])},y=["bg-indigo-500/20 text-indigo-300 border-indigo-500/30","bg-blue-500/20 text-blue-300 border-blue-500/30","bg-green-500/20 text-green-300 border-green-500/30","bg-yellow-500/20 text-yellow-300 border-yellow-500/30","bg-purple-500/20 text-purple-300 border-purple-500/30","bg-pink-500/20 text-pink-300 border-pink-500/30"],S=E=>{const I=E.split("").reduce((_,v)=>_+v.charCodeAt(0),0);return y[I%y.length]};return p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-slate-700 border border-slate-600 rounded-lg focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500",children:[t.map(E=>p.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium border ${S(E)}`,children:[p.jsx(om,{className:"w-3 h-3"}),E,p.jsx("button",{onClick:()=>f(E),className:"hover:bg-white/10 rounded-full p-0.5 transition-colors",children:p.jsx(tr,{className:"w-3 h-3"})})]},E)),p.jsx("input",{ref:u,type:"text",value:s,onChange:E=>{i(E.target.value),a(E.target.value.length>0)},onKeyDown:m,onFocus:()=>s&&a(!0),onBlur:()=>setTimeout(()=>a(!1),200),placeholder:t.length===0?r:"",className:"flex-1 min-w-[120px] bg-transparent border-none outline-none text-white placeholder-slate-500 text-sm"})]}),o&&c.length>0&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-48 overflow-y-auto z-10",children:c.slice(0,10).map(E=>p.jsxs("button",{onClick:()=>h(E.tag),className:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-slate-700 transition-colors",children:[p.jsx("span",{className:"text-white text-sm",children:E.tag}),p.jsx("span",{className:"text-slate-400 text-xs",children:E.count})]},E.tag))})]})},XM=({selectedCount:t,onClearSelection:e,onMoveToFolder:n,onAddTags:r,onDelete:s,folders:i=[]})=>{const[o,a]=A.useState(!1);return t===0?null:p.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-30",children:p.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl px-6 py-4 flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 rounded-lg",children:[p.jsx("span",{className:"text-white font-bold",children:t}),p.jsxs("span",{className:"text-indigo-200 text-sm",children:["seleccionado",t!==1?"s":""]})]}),p.jsx("div",{className:"h-8 w-px bg-slate-700"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>a(!o),onMouseEnter:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:[p.jsx(tc,{className:"w-4 h-4"}),"Mover a"]}),o&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),p.jsx("div",{className:"absolute bottom-full left-0 mb-2 z-20",onMouseLeave:()=>a(!1),children:p.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 min-w-[200px] max-h-64 overflow-y-auto",children:[p.jsxs("button",{onClick:()=>{n(null),a(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-slate-300 hover:bg-slate-700 hover:text-white transition-colors text-left",children:[p.jsx(tc,{className:"w-4 h-4"}),"Todas las sesiones"]}),i.length>0&&p.jsx("div",{className:"h-px bg-slate-700 my-1"}),i.map(u=>p.jsxs("button",{onClick:()=>{n(u.id),a(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-slate-300 hover:bg-slate-700 hover:text-white transition-colors text-left",children:[p.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:u.color}}),u.name]},u.id))]})})]})]}),p.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:[p.jsx(om,{className:"w-4 h-4"}),"Etiquetar"]}),p.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[p.jsx(Uc,{className:"w-4 h-4"}),"Eliminar"]})]}),p.jsx("div",{className:"h-8 w-px bg-slate-700"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white",title:"Cancelar seleccin",children:p.jsx(tr,{className:"w-5 h-5"})})]})})},QM=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,i]=A.useState(null),[o,a]=A.useState(null),[u,c]=A.useState(""),[h,f]=A.useState([]),[m,y]=A.useState([]),[S,E]=A.useState("all"),[I,_]=A.useState(()=>localStorage.getItem("sidebar-collapsed")==="true"),[v,x]=A.useState(!1),[D,V]=A.useState(null),[U,k]=A.useState([]),[w,C]=A.useState([]),[R,P]=A.useState(!1),[N,b]=A.useState([]),[we,qe]=A.useState(!1),[mt,zt]=A.useState(()=>localStorage.getItem("dashboard-view")||"grid"),[W,J]=A.useState(""),[Q,ue]=A.useState("newest"),[ae,xt]=A.useState({dateRange:"all",duration:"all",minRating:0,hasTranscription:!1,hasComments:!1}),[Te,me]=A.useState({isOpen:!1,type:"info",title:"",message:""}),[Pe,Ge]=A.useState({isOpen:!1,title:"",message:"",onConfirm:null});A.useEffect(()=>{const M=_P(Qt,async $=>{if($)i($),an($.uid),St($.uid);else try{const G=await Cx();i(G),r(!1)}catch(G){console.error("Auth error:",G),r(!1)}});return()=>M()},[]),A.useEffect(()=>{localStorage.setItem("sidebar-collapsed",I)},[I]);const an=async M=>{try{const $=await Rx(M);e($)}catch($){console.error("Error loading sessions:",$),$.message.includes("index")&&alert("Falta un ndice en Firestore. Revisa la consola para ver el enlace de creacin.")}finally{r(!1)}},St=async M=>{try{const $=await Fx(M);y($)}catch($){console.error("Error loading folders:",$)}},kr=M=>{const $=Math.floor(M/1e3),G=Math.floor($/60),ie=$%60;return`${G}:${ie.toString().padStart(2,"0")}`},Dn=(M,$)=>{M.preventDefault(),M.stopPropagation();const G=`${window.location.origin}/econotas/share/${$}`;navigator.clipboard.writeText(G),me({isOpen:!0,type:"success",title:"Enlace copiado",message:`El enlace se copi al portapapeles: ${G}`})},Ar=(M,$)=>{M.preventDefault(),M.stopPropagation(),Ge({isOpen:!0,title:"Eliminar sesin?",message:`Ests seguro de que deseas eliminar "${$.sessionName}"? Esta accin no se puede deshacer.`,variant:"destructive",onConfirm:async()=>{try{await hg($.id),e(G=>G.filter(ie=>ie.id!==$.id)),me({isOpen:!0,type:"success",title:"Sesin eliminada",message:"La sesin se elimin correctamente."})}catch(G){console.error("Error deleting session:",G),me({isOpen:!0,type:"error",title:"Error",message:`No se pudo eliminar la sesin: ${G.message}`})}}})},Lt=async M=>{if(s)try{const $=await jx({userId:s.uid,...M});await St(s.uid),me({isOpen:!0,type:"success",title:"Carpeta creada",message:`La carpeta "${M.name}" se cre correctamente.`})}catch($){console.error("Error creating folder:",$),me({isOpen:!0,type:"error",title:"Error",message:"No se pudo crear la carpeta."})}},vi=M=>{V(M),x(!0)},Io=async M=>{if(D)try{await Ux(D.id,M),await St(s.uid),V(null),me({isOpen:!0,type:"success",title:"Carpeta actualizada",message:"Los cambios se guardaron correctamente."})}catch($){console.error("Error updating folder:",$),me({isOpen:!0,type:"error",title:"Error",message:"No se pudo actualizar la carpeta."})}},Ps=M=>{Ge({isOpen:!0,title:"Eliminar carpeta?",message:`Ests seguro de que deseas eliminar "${M.name}"? Las sesiones se movern a "Todas las sesiones".`,variant:"destructive",onConfirm:async()=>{try{await zx(M.id),await St(s.uid),await an(s.uid),S===M.id&&E("all"),me({isOpen:!0,type:"success",title:"Carpeta eliminada",message:"La carpeta se elimin correctamente."})}catch($){console.error("Error deleting folder:",$),me({isOpen:!0,type:"error",title:"Error",message:"No se pudo eliminar la carpeta."})}}})},Ns=async(M,$)=>{M.preventDefault(),M.stopPropagation();try{const G=!$.isFavorite;await Hx($.id,G),e(ie=>ie.map(Ke=>Ke.id===$.id?{...Ke,isFavorite:G}:Ke))}catch(G){console.error("Error toggling favorite:",G)}},Ds=(M,$)=>{C($?G=>[...G,M]:G=>G.filter(ie=>ie!==M))},Je=M=>{C(M?Ct.map($=>$.id):[])},Ze=()=>{Ge({isOpen:!0,title:"Eliminar sesiones?",message:`Ests seguro de que deseas eliminar ${w.length} sesin${w.length!==1?"es":""}? Esta accin no se puede deshacer.`,variant:"destructive",onConfirm:async()=>{try{await Wx(w),e(M=>M.filter($=>!w.includes($.id))),C([]),me({isOpen:!0,type:"success",title:"Sesiones eliminadas",message:"Las sesiones se eliminaron correctamente."})}catch(M){console.error("Error bulk deleting:",M),me({isOpen:!0,type:"error",title:"Error",message:"No se pudieron eliminar las sesiones."})}}})},Rr=async M=>{try{await qx(w,M),e($=>$.map(G=>w.includes(G.id)?{...G,folderId:M}:G)),C([]),me({isOpen:!0,type:"success",title:"Sesiones movidas",message:"Las sesiones se movieron correctamente."})}catch($){console.error("Error bulk moving:",$),me({isOpen:!0,type:"error",title:"Error",message:"No se pudieron mover las sesiones."})}},ko=()=>{b([]),P(!0)},br=async()=>{if(console.log("handleSaveBulkTags called",{bulkTags:N,selectedSessions:w}),N.length===0){console.warn("No tags to save"),me({isOpen:!0,type:"warning",title:"Sin etiquetas",message:"Por favor agrega al menos una etiqueta antes de guardar."});return}if(w.length===0){console.warn("No sessions selected"),me({isOpen:!0,type:"warning",title:"Sin sesiones",message:"No hay sesiones seleccionadas."});return}qe(!0);try{console.log("Calling bulkAddTags..."),await Gx(w,N),console.log("bulkAddTags completed, reloading sessions..."),await an(s.uid),console.log("Sessions reloaded"),C([]),P(!1),b([]),me({isOpen:!0,type:"success",title:"Etiquetas agregadas",message:"Las etiquetas se agregaron correctamente."})}catch(M){console.error("Error bulk adding tags:",M),me({isOpen:!0,type:"error",title:"Error",message:`No se pudieron agregar las etiquetas: ${M.message}`})}finally{qe(!1)}};A.useEffect(()=>{localStorage.setItem("dashboard-view",mt)},[mt]);const Ct=A.useMemo(()=>{let M=[...t];if(S==="favorites"?M=M.filter($=>$.isFavorite===!0):S!=="all"&&(M=M.filter($=>$.folderId===S)),U.length>0&&(M=M.filter($=>{const G=$.tags||[];return U.some(ie=>G.includes(ie))})),W.trim()&&(M=zM(W,M,"all")),ae.dateRange!=="all"){const $=new Date,ie={today:24*60*60*1e3,week:7*24*60*60*1e3,month:30*24*60*60*1e3,year:365*24*60*60*1e3}[ae.dateRange];ie&&(M=M.filter(Ke=>{var ut;const lt=(ut=Ke.createdAt)!=null&&ut.toDate?Ke.createdAt.toDate():new Date(Ke.createdAt);return $-lt<=ie}))}return ae.duration!=="all"&&(M=M.filter($=>{const G=$.durationMs/6e4;return ae.duration==="short"?G<15:ae.duration==="medium"?G>=15&&G<=60:ae.duration==="long"?G>60:!0})),ae.minRating>0&&(M=M.filter($=>($.ratingAverage||0)>=ae.minRating)),ae.hasTranscription&&(M=M.filter($=>$.transcription)),ae.hasComments&&(M=M.filter($=>($.commentCount||0)>0)),M.sort(($,G)=>{var ie,Ke,lt,ut,It,ln,On,Ln;switch(Q){case"newest":return(((Ke=(ie=G.createdAt)==null?void 0:ie.toDate)==null?void 0:Ke.call(ie))||new Date(G.createdAt))-(((ut=(lt=$.createdAt)==null?void 0:lt.toDate)==null?void 0:ut.call(lt))||new Date($.createdAt));case"oldest":return(((ln=(It=$.createdAt)==null?void 0:It.toDate)==null?void 0:ln.call(It))||new Date($.createdAt))-(((Ln=(On=G.createdAt)==null?void 0:On.toDate)==null?void 0:Ln.call(On))||new Date(G.createdAt));case"mostViewed":return(G.viewCount||0)-($.viewCount||0);case"topRated":return(G.ratingAverage||0)-($.ratingAverage||0);case"alphabetical":return $.sessionName.localeCompare(G.sessionName);default:return 0}}),M},[t,W,ae,Q,S,U]),En=A.useMemo(()=>BM(t),[t]),Os=A.useMemo(()=>{const M={};return t.forEach($=>{const G=$.folderId||"all";M[G]=(M[G]||0)+1}),M},[t]),_i=A.useMemo(()=>t.filter(M=>M.isFavorite===!0).length,[t]);return p.jsxs("div",{className:"flex h-screen bg-slate-900 text-slate-100 font-sans",children:[p.jsx(qM,{folders:m,selectedFolder:S,onSelectFolder:E,onCreateFolder:()=>{V(null),x(!0)},onEditFolder:vi,onDeleteFolder:Ps,sessionCounts:Os,favoriteCount:_i,isCollapsed:I,onToggleCollapse:()=>_(!I)}),p.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:p.jsxs("div",{className:"p-6 overflow-y-auto h-full",children:[p.jsxs("header",{className:"flex items-center justify-between mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:"Mis Sesiones"}),p.jsx("p",{className:"text-slate-400",children:"Gestiona tus grabaciones y notas"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(pS,{}),p.jsxs(fa,{to:"/new",className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold transition-all shadow-lg shadow-indigo-900/20",children:[p.jsx(im,{className:"w-5 h-5"})," Nueva Sesin"]})]})]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6 bg-slate-800 border border-slate-700 rounded-xl p-4",children:[t.length>0&&p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mr-2",children:[p.jsx("input",{type:"checkbox",checked:w.length===Ct.length&&Ct.length>0,onChange:M=>Je(M.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-slate-900"}),p.jsx("span",{className:"text-sm text-slate-400",children:"Todo"})]}),p.jsx(HM,{value:W,onChange:J}),p.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[p.jsx($M,{view:mt,onViewChange:zt}),p.jsx(KM,{availableTags:En,selectedTags:U,onTagsChange:k}),p.jsx(WM,{filters:ae,onFiltersChange:xt}),p.jsxs("select",{value:Q,onChange:M=>ue(M.target.value),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[p.jsx("option",{value:"newest",children:"Ms reciente"}),p.jsx("option",{value:"oldest",children:"Ms antiguo"}),p.jsx("option",{value:"mostViewed",children:"Ms visto"}),p.jsx("option",{value:"topRated",children:"Mejor calificado"}),p.jsx("option",{value:"alphabetical",children:"Alfabtico"})]})]})]}),(W||U.length>0||Object.values(ae).some(M=>M!=="all"&&M!==0&&M!==!1))&&p.jsxs("div",{className:"mb-4 text-sm text-slate-400",children:[Ct.length," sesin",Ct.length!==1?"es":""," encontrada",Ct.length!==1?"s":""]}),Ct.length===0?p.jsxs("div",{className:"text-center py-20 bg-slate-800 rounded-2xl border border-slate-700",children:[p.jsx("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Cf,{className:"w-8 h-8 text-slate-500 ml-1"})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No se encontraron sesiones"}),p.jsx("p",{className:"text-slate-400 mb-6",children:"Intenta ajustar tus filtros o crea una nueva sesin."}),p.jsx(fa,{to:"/new",className:"text-indigo-400 hover:text-indigo-300 font-medium",children:"Crear una nueva sesin "})]}):p.jsx("div",{className:mt==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3",children:Ct.map(M=>{var $;return p.jsxs("div",{className:`group relative bg-slate-800 hover:bg-slate-750 border rounded-xl p-4 transition-all hover:shadow-lg ${w.includes(M.id)?"border-indigo-500 bg-indigo-500/5":"border-slate-700 hover:border-indigo-500/50"}`,children:[p.jsx("div",{className:"absolute top-4 left-4 z-10",children:p.jsx("input",{type:"checkbox",checked:w.includes(M.id),onChange:G=>Ds(M.id,G.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-slate-900",onClick:G=>G.stopPropagation()})}),p.jsx(fa,{to:`/session/${M.id}`,className:"block pl-8",children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[p.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-lg flex items-center justify-center text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition-colors flex-shrink-0",children:p.jsx(Cf,{className:"w-6 h-6 ml-1"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("h3",{className:"font-semibold text-lg text-white truncate",children:M.sessionName}),p.jsx("button",{onClick:G=>Ns(G,M),className:`p-1 rounded-full hover:bg-slate-700 transition-colors ${M.isFavorite?"text-yellow-400":"text-slate-600 hover:text-yellow-400"}`,children:p.jsx(Fc,{className:"w-4 h-4",fill:M.isFavorite?"currentColor":"none"})})]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-2",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(jA,{className:"w-3.5 h-3.5"}),($=M.createdAt)!=null&&$.toDate?M.createdAt.toDate().toLocaleDateString():new Date(M.createdAt).toLocaleDateString()]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(VE,{className:"w-3.5 h-3.5"}),kr(M.durationMs)]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(tR,{className:"w-3.5 h-3.5"}),M.viewCount||0]}),M.ratingAverage>0&&p.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[p.jsx(dS,{rating:M.ratingAverage,size:14,readOnly:!0}),p.jsxs("span",{className:"text-slate-400",children:["(",M.ratingCount,")"]})]})]}),M.tags&&M.tags.length>0&&p.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:M.tags.map(G=>p.jsxs("span",{className:"px-2 py-0.5 bg-slate-700 text-slate-300 rounded text-xs border border-slate-600",children:["#",G]},G))})]})]}),p.jsxs("div",{className:"flex items-center gap-1",onClick:G=>G.preventDefault(),children:[p.jsx("button",{onClick:async G=>{G.preventDefault(),G.stopPropagation();try{const{getSessionComments:ie}=await Tf(async()=>{const{getSessionComments:It}=await Promise.resolve().then(()=>iV);return{getSessionComments:It}},void 0),Ke=await ie(M.id),{exportSessionToJson:lt}=await Tf(async()=>{const{exportSessionToJson:It}=await import("./exportUtils-Dar7xkeZ.js");return{exportSessionToJson:It}},[]);lt(M,Ke)&&me({isOpen:!0,type:"success",title:"Exportacin exitosa",message:"La sesin se ha descargado correctamente."})}catch(ie){console.error("Export error:",ie),me({isOpen:!0,type:"error",title:"Error de exportacin",message:"No se pudo exportar la sesin."})}},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar a JSON",children:p.jsx(rm,{className:"w-4 h-4"})}),p.jsx("button",{onClick:G=>{G.stopPropagation(),G.preventDefault(),a(M.id),c(M.sessionName),f(M.tags||[])},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Editar",children:p.jsx(sm,{className:"w-4 h-4"})}),p.jsx("button",{onClick:G=>Dn(G,M.id),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Copiar enlace",children:p.jsx(OR,{className:"w-4 h-4"})}),p.jsx("button",{onClick:G=>Ar(G,M),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar",children:p.jsx(Uc,{className:"w-4 h-4"})})]})]})})]},M.id)})})]})}),p.jsx(XM,{selectedCount:w.length,onClearSelection:()=>C([]),onMoveToFolder:Rr,onAddTags:ko,onDelete:Ze,folders:m}),p.jsx(GM,{isOpen:v,onClose:()=>x(!1),onSave:D?Io:Lt,initialData:D}),R&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-700 p-6",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Agregar etiquetas"}),p.jsx("div",{className:"mb-6",children:p.jsx(YM,{tags:N,onChange:b,suggestions:En,placeholder:"Escribe y presiona Enter..."})}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-slate-300 hover:text-white",children:"Cancelar"}),p.jsx("button",{onClick:br,disabled:we||N.length===0,className:`px-4 py-2 rounded-lg font-medium transition-colors ${we||N.length===0?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:we?"Guardando...":"Guardar"})]})]})}),p.jsx(Kx,{isOpen:Te.isOpen,onClose:()=>me({...Te,isOpen:!1}),type:Te.type,title:Te.title,message:Te.message}),p.jsx(Yx,{isOpen:Pe.isOpen,onClose:()=>Ge({...Pe,isOpen:!1}),onConfirm:Pe.onConfirm,onCancel:()=>Ge({...Pe,isOpen:!1}),title:Pe.title,message:Pe.message,variant:Pe.variant})]})};function JM(){return p.jsx(vA,{basename:"/econotas",children:p.jsx("div",{className:"flex flex-col min-h-screen bg-[var(--bg)] text-[var(--text)]",children:p.jsxs(Yk,{children:[p.jsx(Zo,{path:"/",element:p.jsx(QM,{})}),p.jsx(Zo,{path:"/new",element:p.jsx(Sd,{})}),p.jsx(Zo,{path:"/session/:sessionId",element:p.jsx(Sd,{})}),p.jsx(Zo,{path:"/share/:sessionId",element:p.jsx(Sd,{readOnly:!0})})]})})})}Id.createRoot(document.getElementById("root")).render(p.jsx(vn.StrictMode,{children:p.jsx(jM,{children:p.jsx(JM,{})})}));
