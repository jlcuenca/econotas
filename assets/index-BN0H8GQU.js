(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function gC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W_={exports:{}},vc={},q_={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),yC=Symbol.for("react.portal"),vC=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),wC=Symbol.for("react.profiler"),EC=Symbol.for("react.provider"),TC=Symbol.for("react.context"),SC=Symbol.for("react.forward_ref"),CC=Symbol.for("react.suspense"),xC=Symbol.for("react.memo"),IC=Symbol.for("react.lazy"),Fg=Symbol.iterator;function AC(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var G_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K_=Object.assign,Y_={};function no(t,e,n){this.props=t,this.context=e,this.refs=Y_,this.updater=n||G_}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X_(){}X_.prototype=no.prototype;function Qf(t,e,n){this.props=t,this.context=e,this.refs=Y_,this.updater=n||G_}var Jf=Qf.prototype=new X_;Jf.constructor=Qf;K_(Jf,no.prototype);Jf.isPureReactComponent=!0;var zg=Array.isArray,Q_=Object.prototype.hasOwnProperty,Zf={current:null},J_={key:!0,ref:!0,__self:!0,__source:!0};function Z_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Q_.call(e,r)&&!J_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ba,type:t,key:s,ref:o,props:i,_owner:Zf.current}}function RC(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function kC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bg=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kC(""+t.key):e.toString(36)}function tu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ba:case yC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+bh(o,0):r,zg(i)?(n="",t!=null&&(n=t.replace(Bg,"$&/")+"/"),tu(i,e,n,"",function(c){return c})):i!=null&&(ep(i)&&(i=RC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+bh(s,a);o+=tu(s,e,n,u,i)}else if(u=AC(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+bh(s,a++),o+=tu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],i=0;return tu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},nu={transition:null},bC={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:nu,ReactCurrentOwner:Zf};function e0(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=no;le.Fragment=vC;le.Profiler=wC;le.PureComponent=Qf;le.StrictMode=_C;le.Suspense=CC;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bC;le.act=e0;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Q_.call(e,u)&&!J_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ba,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:TC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EC,_context:t},t.Consumer=t};le.createElement=Z_;le.createFactory=function(t){var e=Z_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:SC,render:t}};le.isValidElement=ep;le.lazy=function(t){return{$$typeof:IC,_payload:{_status:-1,_result:t},_init:PC}};le.memo=function(t,e){return{$$typeof:xC,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};le.unstable_act=e0;le.useCallback=function(t,e){return Pt.current.useCallback(t,e)};le.useContext=function(t){return Pt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Pt.current.useEffect(t,e)};le.useId=function(){return Pt.current.useId()};le.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Pt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};le.useRef=function(t){return Pt.current.useRef(t)};le.useState=function(t){return Pt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Pt.current.useTransition()};le.version="18.3.1";q_.exports=le;var P=q_.exports;const an=gC(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=P,DC=Symbol.for("react.element"),OC=Symbol.for("react.fragment"),LC=Object.prototype.hasOwnProperty,VC=NC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MC={key:!0,ref:!0,__self:!0,__source:!0};function t0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LC.call(e,r)&&!MC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:DC,type:t,key:s,ref:o,props:i,_owner:VC.current}}vc.Fragment=OC;vc.jsx=t0;vc.jsxs=t0;W_.exports=vc;var g=W_.exports,Sd={},n0={exports:{}},Yt={},r0={exports:{}},i0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var G=z.length;z.push(Q);e:for(;0<G;){var ie=G-1>>>1,me=z[ie];if(0<i(me,Q))z[ie]=Q,z[G]=me,G=ie;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],G=z.pop();if(G!==Q){z[0]=G;e:for(var ie=0,me=z.length,at=me>>>1;ie<at;){var Se=2*(ie+1)-1,gt=z[Se],yt=Se+1,It=z[yt];if(0>i(gt,G))yt<me&&0>i(It,gt)?(z[ie]=It,z[yt]=G,ie=yt):(z[ie]=gt,z[Se]=G,ie=Se);else if(yt<me&&0>i(It,G))z[ie]=It,z[yt]=G,ie=yt;else break e}}return Q}function i(z,Q){var G=z.sortIndex-Q.sortIndex;return G!==0?G:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,p=3,y=!1,S=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=z)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function D(z){if(A=!1,T(z),!S)if(n(u)!==null)S=!0,H(V);else{var Q=n(c);Q!==null&&Z(D,Q.startTime-z)}}function V(z,Q){S=!1,A&&(A=!1,_(E),E=-1),y=!0;var G=p;try{for(T(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||z&&!b());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var me=ie(f.expirationTime<=Q);Q=t.unstable_now(),typeof me=="function"?f.callback=me:f===n(u)&&r(u),T(Q)}else r(u);f=n(u)}if(f!==null)var at=!0;else{var Se=n(c);Se!==null&&Z(D,Se.startTime-Q),at=!1}return at}finally{f=null,p=G,y=!1}}var U=!1,C=null,E=-1,x=5,R=-1;function b(){return!(t.unstable_now()-R<x)}function N(){if(C!==null){var z=t.unstable_now();R=z;var Q=!0;try{Q=C(!0,z)}finally{Q?k():(U=!1,C=null)}}else U=!1}var k;if(typeof v=="function")k=function(){v(N)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,B=ye.port2;ye.port1.onmessage=N,k=function(){B.postMessage(null)}}else k=function(){I(N,0)};function H(z){C=z,U||(U=!0,k())}function Z(z,Q){E=I(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,H(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var G=p;p=Q;try{return z()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=p;p=z;try{return Q()}finally{p=G}},t.unstable_scheduleCallback=function(z,Q,G){var ie=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ie+G:ie):G=ie,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=G+me,z={id:h++,callback:Q,priorityLevel:z,startTime:G,expirationTime:me,sortIndex:-1},G>ie?(z.sortIndex=G,e(c,z),n(u)===null&&z===n(c)&&(A?(_(E),E=-1):A=!0,Z(D,G-ie))):(z.sortIndex=me,e(u,z),S||y||(S=!0,H(V))),z},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(z){var Q=p;return function(){var G=p;p=Q;try{return z.apply(this,arguments)}finally{p=G}}}})(i0);r0.exports=i0;var jC=r0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=P,Kt=jC;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s0=new Set,pa={};function es(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(pa[t]=e,t=0;t<e.length;t++)s0.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cd=Object.prototype.hasOwnProperty,FC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$g={},Hg={};function zC(t){return Cd.call(Hg,t)?!0:Cd.call($g,t)?!1:FC.test(t)?Hg[t]=!0:($g[t]=!0,!1)}function BC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $C(t,e,n,r){if(e===null||typeof e>"u"||BC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tp=/[\-:]([a-z])/g;function np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tp,np);pt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tp,np);pt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tp,np);pt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rp(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($C(e,n,i,r)&&(n=null),r||i===null?zC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),ws=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),xd=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),a0=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),Id=Symbol.for("react.suspense"),Ad=Symbol.for("react.suspense_list"),op=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),l0=Symbol.for("react.offscreen"),Wg=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=Wg&&t[Wg]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Nh;function Bo(t){if(Nh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nh=e&&e[1]||""}return`
`+Nh+t}var Dh=!1;function Oh(t,e){if(!t||Dh)return"";Dh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Dh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function HC(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=Oh(t.type,!1),t;case 11:return t=Oh(t.type.render,!1),t;case 1:return t=Oh(t.type,!0),t;default:return""}}function Rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Es:return"Fragment";case ws:return"Portal";case xd:return"Profiler";case ip:return"StrictMode";case Id:return"Suspense";case Ad:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a0:return(t.displayName||"Context")+".Consumer";case o0:return(t._context.displayName||"Context")+".Provider";case sp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case op:return e=t.displayName||null,e!==null?e:Rd(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return Rd(t(e))}catch{}}return null}function WC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rd(e);case 8:return e===ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qC(t){var e=u0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rl(t){t._valueTracker||(t._valueTracker=qC(t))}function c0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kd(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h0(t,e){e=e.checked,e!=null&&rp(t,"checked",e,!1)}function Pd(t,e){h0(t,e);var n=ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bd(t,e.type,n):e.hasOwnProperty("defaultValue")&&bd(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bd(t,e,n){(e!=="number"||Iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $o=Array.isArray;function Ds(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ei(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if($o(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ei(n)}}function d0(t,e){var n=ei(e.value),r=ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,p0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GC=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){GC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function m0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function g0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=m0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var KC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Od(t,e){if(e){if(KC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Md=null,Os=null,Ls=null;function Xg(t){if(t=Wa(t)){if(typeof Md!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Sc(e),Md(t.stateNode,t.type,e))}}function y0(t){Os?Ls?Ls.push(t):Ls=[t]:Os=t}function v0(){if(Os){var t=Os,e=Ls;if(Ls=Os=null,Xg(t),e)for(t=0;t<e.length;t++)Xg(e[t])}}function _0(t,e){return t(e)}function w0(){}var Lh=!1;function E0(t,e,n){if(Lh)return t(e,n);Lh=!0;try{return _0(t,e,n)}finally{Lh=!1,(Os!==null||Ls!==null)&&(w0(),v0())}}function ga(t,e){var n=t.stateNode;if(n===null)return null;var r=Sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var jd=!1;if(ir)try{var No={};Object.defineProperty(No,"passive",{get:function(){jd=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{jd=!1}function YC(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Jo=!1,Au=null,Ru=!1,Ud=null,XC={onError:function(t){Jo=!0,Au=t}};function QC(t,e,n,r,i,s,o,a,u){Jo=!1,Au=null,YC.apply(XC,arguments)}function JC(t,e,n,r,i,s,o,a,u){if(QC.apply(this,arguments),Jo){if(Jo){var c=Au;Jo=!1,Au=null}else throw Error(F(198));Ru||(Ru=!0,Ud=c)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qg(t){if(ts(t)!==t)throw Error(F(188))}function ZC(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Qg(i),t;if(s===r)return Qg(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function S0(t){return t=ZC(t),t!==null?C0(t):null}function C0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C0(t);if(e!==null)return e;t=t.sibling}return null}var x0=Kt.unstable_scheduleCallback,Jg=Kt.unstable_cancelCallback,ex=Kt.unstable_shouldYield,tx=Kt.unstable_requestPaint,He=Kt.unstable_now,nx=Kt.unstable_getCurrentPriorityLevel,lp=Kt.unstable_ImmediatePriority,I0=Kt.unstable_UserBlockingPriority,ku=Kt.unstable_NormalPriority,rx=Kt.unstable_LowPriority,A0=Kt.unstable_IdlePriority,_c=null,Nn=null;function ix(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(_c,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:ax,sx=Math.log,ox=Math.LN2;function ax(t){return t>>>=0,t===0?32:31-(sx(t)/ox|0)|0}var Pl=64,bl=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ho(a):(s&=o,s!==0&&(r=Ho(s)))}else o=n&~i,o!==0?r=Ho(o):s!==0&&(r=Ho(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),i=1<<n,r|=t[n],e&=~i;return r}function lx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ux(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=lx(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Fd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R0(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function cx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function up(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function k0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P0,cp,b0,N0,D0,zd=!1,Nl=[],Fr=null,zr=null,Br=null,ya=new Map,va=new Map,Pr=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Do(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wa(e),e!==null&&cp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dx(t,e,n,r,i){switch(e){case"focusin":return Fr=Do(Fr,t,e,n,r,i),!0;case"dragenter":return zr=Do(zr,t,e,n,r,i),!0;case"mouseover":return Br=Do(Br,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ya.set(s,Do(ya.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,va.set(s,Do(va.get(s)||null,t,e,n,r,i)),!0}return!1}function O0(t){var e=Di(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=T0(n),e!==null){t.blockedOn=e,D0(t.priority,function(){b0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return e=Wa(n),e!==null&&cp(e),t.blockedOn=n,!1;e.shift()}return!0}function ey(t,e,n){ru(t)&&n.delete(e)}function fx(){zd=!1,Fr!==null&&ru(Fr)&&(Fr=null),zr!==null&&ru(zr)&&(zr=null),Br!==null&&ru(Br)&&(Br=null),ya.forEach(ey),va.forEach(ey)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,zd||(zd=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,fx)))}function _a(t){function e(i){return Oo(i,t)}if(0<Nl.length){Oo(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fr!==null&&Oo(Fr,t),zr!==null&&Oo(zr,t),Br!==null&&Oo(Br,t),ya.forEach(e),va.forEach(e),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)O0(n),n.blockedOn===null&&Pr.shift()}var Vs=mr.ReactCurrentBatchConfig,bu=!0;function px(t,e,n,r){var i=ve,s=Vs.transition;Vs.transition=null;try{ve=1,hp(t,e,n,r)}finally{ve=i,Vs.transition=s}}function mx(t,e,n,r){var i=ve,s=Vs.transition;Vs.transition=null;try{ve=4,hp(t,e,n,r)}finally{ve=i,Vs.transition=s}}function hp(t,e,n,r){if(bu){var i=Bd(t,e,n,r);if(i===null)qh(t,e,r,Nu,n),Zg(t,r);else if(dx(i,t,e,n,r))r.stopPropagation();else if(Zg(t,r),e&4&&-1<hx.indexOf(t)){for(;i!==null;){var s=Wa(i);if(s!==null&&P0(s),s=Bd(t,e,n,r),s===null&&qh(t,e,r,Nu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else qh(t,e,r,null,n)}}var Nu=null;function Bd(t,e,n,r){if(Nu=null,t=ap(r),t=Di(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nu=t,null}function L0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nx()){case lp:return 1;case I0:return 4;case ku:case rx:return 16;case A0:return 536870912;default:return 16}default:return 16}}var Mr=null,dp=null,iu=null;function V0(){if(iu)return iu;var t,e=dp,n=e.length,r,i="value"in Mr?Mr.value:Mr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return iu=i.slice(t,1<r?1-r:void 0)}function su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function ty(){return!1}function Xt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dl:ty,this.isPropagationStopped=ty,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fp=Xt(ro),Ha=Le({},ro,{view:0,detail:0}),gx=Xt(Ha),Mh,jh,Lo,wc=Le({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(Mh=t.screenX-Lo.screenX,jh=t.screenY-Lo.screenY):jh=Mh=0,Lo=t),Mh)},movementY:function(t){return"movementY"in t?t.movementY:jh}}),ny=Xt(wc),yx=Le({},wc,{dataTransfer:0}),vx=Xt(yx),_x=Le({},Ha,{relatedTarget:0}),Uh=Xt(_x),wx=Le({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),Ex=Xt(wx),Tx=Le({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sx=Xt(Tx),Cx=Le({},ro,{data:0}),ry=Xt(Cx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ix={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ax={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ax[t])?!!e[t]:!1}function pp(){return Rx}var kx=Le({},Ha,{key:function(t){if(t.key){var e=xx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ix[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pp,charCode:function(t){return t.type==="keypress"?su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Px=Xt(kx),bx=Le({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=Xt(bx),Nx=Le({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pp}),Dx=Xt(Nx),Ox=Le({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lx=Xt(Ox),Vx=Le({},wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Xt(Vx),jx=[9,13,27,32],mp=ir&&"CompositionEvent"in window,Zo=null;ir&&"documentMode"in document&&(Zo=document.documentMode);var Ux=ir&&"TextEvent"in window&&!Zo,M0=ir&&(!mp||Zo&&8<Zo&&11>=Zo),sy=" ",oy=!1;function j0(t,e){switch(t){case"keyup":return jx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ts=!1;function Fx(t,e){switch(t){case"compositionend":return U0(e);case"keypress":return e.which!==32?null:(oy=!0,sy);case"textInput":return t=e.data,t===sy&&oy?null:t;default:return null}}function zx(t,e){if(Ts)return t==="compositionend"||!mp&&j0(t,e)?(t=V0(),iu=dp=Mr=null,Ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M0&&e.locale!=="ko"?null:e.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bx[t.type]:e==="textarea"}function F0(t,e,n,r){y0(r),e=Du(e,"onChange"),0<e.length&&(n=new fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,wa=null;function $x(t){Q0(t,0)}function Ec(t){var e=xs(t);if(c0(e))return t}function Hx(t,e){if(t==="change")return e}var z0=!1;if(ir){var Fh;if(ir){var zh="oninput"in document;if(!zh){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),zh=typeof ly.oninput=="function"}Fh=zh}else Fh=!1;z0=Fh&&(!document.documentMode||9<document.documentMode)}function uy(){ea&&(ea.detachEvent("onpropertychange",B0),wa=ea=null)}function B0(t){if(t.propertyName==="value"&&Ec(wa)){var e=[];F0(e,wa,t,ap(t)),E0($x,e)}}function Wx(t,e,n){t==="focusin"?(uy(),ea=e,wa=n,ea.attachEvent("onpropertychange",B0)):t==="focusout"&&uy()}function qx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ec(wa)}function Gx(t,e){if(t==="click")return Ec(e)}function Kx(t,e){if(t==="input"||t==="change")return Ec(e)}function Yx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:Yx;function Ea(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cd.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function cy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hy(t,e){var n=cy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cy(n)}}function $0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function H0(){for(var t=window,e=Iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Iu(t.document)}return e}function gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xx(t){var e=H0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$0(n.ownerDocument.documentElement,n)){if(r!==null&&gp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hy(n,s);var o=hy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qx=ir&&"documentMode"in document&&11>=document.documentMode,Ss=null,$d=null,ta=null,Hd=!1;function dy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hd||Ss==null||Ss!==Iu(r)||(r=Ss,"selectionStart"in r&&gp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&Ea(ta,r)||(ta=r,r=Du($d,"onSelect"),0<r.length&&(e=new fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Bh={},W0={};ir&&(W0=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Tc(t){if(Bh[t])return Bh[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W0)return Bh[t]=e[n];return t}var q0=Tc("animationend"),G0=Tc("animationiteration"),K0=Tc("animationstart"),Y0=Tc("transitionend"),X0=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){X0.set(t,e),es(e,[t])}for(var $h=0;$h<fy.length;$h++){var Hh=fy[$h],Jx=Hh.toLowerCase(),Zx=Hh[0].toUpperCase()+Hh.slice(1);hi(Jx,"on"+Zx)}hi(q0,"onAnimationEnd");hi(G0,"onAnimationIteration");hi(K0,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(Y0,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JC(r,e,void 0,t),t.currentTarget=null}function Q0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;py(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;py(i,a,c),s=u}}}if(Ru)throw t=Ud,Ru=!1,Ud=null,t}function xe(t,e){var n=e[Yd];n===void 0&&(n=e[Yd]=new Set);var r=t+"__bubble";n.has(r)||(J0(e,t,2,!1),n.add(r))}function Wh(t,e,n){var r=0;e&&(r|=4),J0(n,t,r,e)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function Ta(t){if(!t[Ll]){t[Ll]=!0,s0.forEach(function(n){n!=="selectionchange"&&(eI.has(n)||Wh(n,!1,t),Wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ll]||(e[Ll]=!0,Wh("selectionchange",!1,e))}}function J0(t,e,n,r){switch(L0(e)){case 1:var i=px;break;case 4:i=mx;break;default:i=hp}n=i.bind(null,e,n,t),i=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Di(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}E0(function(){var c=s,h=ap(n),f=[];e:{var p=X0.get(t);if(p!==void 0){var y=fp,S=t;switch(t){case"keypress":if(su(n)===0)break e;case"keydown":case"keyup":y=Px;break;case"focusin":S="focus",y=Uh;break;case"focusout":S="blur",y=Uh;break;case"beforeblur":case"afterblur":y=Uh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Dx;break;case q0:case G0:case K0:y=Ex;break;case Y0:y=Lx;break;case"scroll":y=gx;break;case"wheel":y=Mx;break;case"copy":case"cut":case"paste":y=Sx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=iy}var A=(e&4)!==0,I=!A&&t==="scroll",_=A?p!==null?p+"Capture":null:p;A=[];for(var v=c,T;v!==null;){T=v;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,_!==null&&(D=ga(v,_),D!=null&&A.push(Sa(v,D,T)))),I)break;v=v.return}0<A.length&&(p=new y(p,S,null,n,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Vd&&(S=n.relatedTarget||n.fromElement)&&(Di(S)||S[sr]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=c,S=S?Di(S):null,S!==null&&(I=ts(S),S!==I||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=c),y!==S)){if(A=ny,D="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=iy,D="onPointerLeave",_="onPointerEnter",v="pointer"),I=y==null?p:xs(y),T=S==null?p:xs(S),p=new A(D,v+"leave",y,n,h),p.target=I,p.relatedTarget=T,D=null,Di(h)===c&&(A=new A(_,v+"enter",S,n,h),A.target=T,A.relatedTarget=I,D=A),I=D,y&&S)t:{for(A=y,_=S,v=0,T=A;T;T=ms(T))v++;for(T=0,D=_;D;D=ms(D))T++;for(;0<v-T;)A=ms(A),v--;for(;0<T-v;)_=ms(_),T--;for(;v--;){if(A===_||_!==null&&A===_.alternate)break t;A=ms(A),_=ms(_)}A=null}else A=null;y!==null&&my(f,p,y,A,!1),S!==null&&I!==null&&my(f,I,S,A,!0)}}e:{if(p=c?xs(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var V=Hx;else if(ay(p))if(z0)V=Kx;else{V=qx;var U=Wx}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=Gx);if(V&&(V=V(t,c))){F0(f,V,n,h);break e}U&&U(t,p,c),t==="focusout"&&(U=p._wrapperState)&&U.controlled&&p.type==="number"&&bd(p,"number",p.value)}switch(U=c?xs(c):window,t){case"focusin":(ay(U)||U.contentEditable==="true")&&(Ss=U,$d=c,ta=null);break;case"focusout":ta=$d=Ss=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,dy(f,n,h);break;case"selectionchange":if(Qx)break;case"keydown":case"keyup":dy(f,n,h)}var C;if(mp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ts?j0(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(M0&&n.locale!=="ko"&&(Ts||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ts&&(C=V0()):(Mr=h,dp="value"in Mr?Mr.value:Mr.textContent,Ts=!0)),U=Du(c,E),0<U.length&&(E=new ry(E,t,null,n,h),f.push({event:E,listeners:U}),C?E.data=C:(C=U0(n),C!==null&&(E.data=C)))),(C=Ux?Fx(t,n):zx(t,n))&&(c=Du(c,"onBeforeInput"),0<c.length&&(h=new ry("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=C))}Q0(f,e)})}function Sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Du(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ga(t,n),s!=null&&r.unshift(Sa(t,s,i)),s=ga(t,e),s!=null&&r.push(Sa(t,s,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function my(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=ga(n,s),u!=null&&o.unshift(Sa(n,u,a))):i||(u=ga(n,s),u!=null&&o.push(Sa(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tI=/\r\n?/g,nI=/\u0000|\uFFFD/g;function gy(t){return(typeof t=="string"?t:""+t).replace(tI,`
`).replace(nI,"")}function Vl(t,e,n){if(e=gy(e),gy(t)!==e&&n)throw Error(F(425))}function Ou(){}var Wd=null,qd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,iI=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(t){return yy.resolve(null).then(t).catch(sI)}:Kd;function sI(t){setTimeout(function(){throw t})}function Gh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_a(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),kn="__reactFiber$"+io,Ca="__reactProps$"+io,sr="__reactContainer$"+io,Yd="__reactEvents$"+io,oI="__reactListeners$"+io,aI="__reactHandles$"+io;function Di(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vy(t);t!==null;){if(n=t[kn])return n;t=vy(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[kn]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Sc(t){return t[Ca]||null}var Xd=[],Is=-1;function di(t){return{current:t}}function Ae(t){0>Is||(t.current=Xd[Is],Xd[Is]=null,Is--)}function Te(t,e){Is++,Xd[Is]=t.current,t.current=e}var ti={},Ct=di(ti),Vt=di(!1),$i=ti;function Hs(t,e){var n=t.type.contextTypes;if(!n)return ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mt(t){return t=t.childContextTypes,t!=null}function Lu(){Ae(Vt),Ae(Ct)}function _y(t,e,n){if(Ct.current!==ti)throw Error(F(168));Te(Ct,e),Te(Vt,n)}function Z0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,WC(t)||"Unknown",i));return Le({},n,r)}function Vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,$i=Ct.current,Te(Ct,t),Te(Vt,Vt.current),!0}function wy(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Z0(t,e,$i),r.__reactInternalMemoizedMergedChildContext=t,Ae(Vt),Ae(Ct),Te(Ct,t)):Ae(Vt),Te(Vt,n)}var Xn=null,Cc=!1,Kh=!1;function ew(t){Xn===null?Xn=[t]:Xn.push(t)}function lI(t){Cc=!0,ew(t)}function fi(){if(!Kh&&Xn!==null){Kh=!0;var t=0,e=ve;try{var n=Xn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,Cc=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),x0(lp,fi),i}finally{ve=e,Kh=!1}}return null}var As=[],Rs=0,Mu=null,ju=0,Jt=[],Zt=0,Hi=null,Qn=1,Jn="";function Pi(t,e){As[Rs++]=ju,As[Rs++]=Mu,Mu=t,ju=e}function tw(t,e,n){Jt[Zt++]=Qn,Jt[Zt++]=Jn,Jt[Zt++]=Hi,Hi=t;var r=Qn;t=Jn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var s=32-vn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qn=1<<32-vn(e)+i|n<<i|r,Jn=s+t}else Qn=1<<s|n<<i|r,Jn=t}function yp(t){t.return!==null&&(Pi(t,1),tw(t,1,0))}function vp(t){for(;t===Mu;)Mu=As[--Rs],As[Rs]=null,ju=As[--Rs],As[Rs]=null;for(;t===Hi;)Hi=Jt[--Zt],Jt[Zt]=null,Jn=Jt[--Zt],Jt[Zt]=null,Qn=Jt[--Zt],Jt[Zt]=null}var Gt=null,Ht=null,Pe=!1,mn=null;function nw(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Ht=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hi!==null?{id:Qn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Ht=null,!0):!1;default:return!1}}function Qd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jd(t){if(Pe){var e=Ht;if(e){var n=e;if(!Ey(t,e)){if(Qd(t))throw Error(F(418));e=$r(n.nextSibling);var r=Gt;e&&Ey(t,e)?nw(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Gt=t)}}else{if(Qd(t))throw Error(F(418));t.flags=t.flags&-4097|2,Pe=!1,Gt=t}}}function Ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function Ml(t){if(t!==Gt)return!1;if(!Pe)return Ty(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=Ht)){if(Qd(t))throw rw(),Error(F(418));for(;e;)nw(t,e),e=$r(e.nextSibling)}if(Ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Gt?$r(t.stateNode.nextSibling):null;return!0}function rw(){for(var t=Ht;t;)t=$r(t.nextSibling)}function Ws(){Ht=Gt=null,Pe=!1}function _p(t){mn===null?mn=[t]:mn.push(t)}var uI=mr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sy(t){var e=t._init;return e(t._payload)}function iw(t){function e(_,v){if(t){var T=_.deletions;T===null?(_.deletions=[v],_.flags|=16):T.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Gr(_,v),_.index=0,_.sibling=null,_}function s(_,v,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<v?(_.flags|=2,v):T):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,T,D){return v===null||v.tag!==6?(v=td(T,_.mode,D),v.return=_,v):(v=i(v,T),v.return=_,v)}function u(_,v,T,D){var V=T.type;return V===Es?h(_,v,T.props.children,D,T.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rr&&Sy(V)===v.type)?(D=i(v,T.props),D.ref=Vo(_,v,T),D.return=_,D):(D=du(T.type,T.key,T.props,null,_.mode,D),D.ref=Vo(_,v,T),D.return=_,D)}function c(_,v,T,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=nd(T,_.mode,D),v.return=_,v):(v=i(v,T.children||[]),v.return=_,v)}function h(_,v,T,D,V){return v===null||v.tag!==7?(v=ji(T,_.mode,D,V),v.return=_,v):(v=i(v,T),v.return=_,v)}function f(_,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=td(""+v,_.mode,T),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Al:return T=du(v.type,v.key,v.props,null,_.mode,T),T.ref=Vo(_,null,v),T.return=_,T;case ws:return v=nd(v,_.mode,T),v.return=_,v;case Rr:var D=v._init;return f(_,D(v._payload),T)}if($o(v)||bo(v))return v=ji(v,_.mode,T,null),v.return=_,v;jl(_,v)}return null}function p(_,v,T,D){var V=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return V!==null?null:a(_,v,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Al:return T.key===V?u(_,v,T,D):null;case ws:return T.key===V?c(_,v,T,D):null;case Rr:return V=T._init,p(_,v,V(T._payload),D)}if($o(T)||bo(T))return V!==null?null:h(_,v,T,D,null);jl(_,T)}return null}function y(_,v,T,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(T)||null,a(v,_,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Al:return _=_.get(D.key===null?T:D.key)||null,u(v,_,D,V);case ws:return _=_.get(D.key===null?T:D.key)||null,c(v,_,D,V);case Rr:var U=D._init;return y(_,v,T,U(D._payload),V)}if($o(D)||bo(D))return _=_.get(T)||null,h(v,_,D,V,null);jl(v,D)}return null}function S(_,v,T,D){for(var V=null,U=null,C=v,E=v=0,x=null;C!==null&&E<T.length;E++){C.index>E?(x=C,C=null):x=C.sibling;var R=p(_,C,T[E],D);if(R===null){C===null&&(C=x);break}t&&C&&R.alternate===null&&e(_,C),v=s(R,v,E),U===null?V=R:U.sibling=R,U=R,C=x}if(E===T.length)return n(_,C),Pe&&Pi(_,E),V;if(C===null){for(;E<T.length;E++)C=f(_,T[E],D),C!==null&&(v=s(C,v,E),U===null?V=C:U.sibling=C,U=C);return Pe&&Pi(_,E),V}for(C=r(_,C);E<T.length;E++)x=y(C,_,E,T[E],D),x!==null&&(t&&x.alternate!==null&&C.delete(x.key===null?E:x.key),v=s(x,v,E),U===null?V=x:U.sibling=x,U=x);return t&&C.forEach(function(b){return e(_,b)}),Pe&&Pi(_,E),V}function A(_,v,T,D){var V=bo(T);if(typeof V!="function")throw Error(F(150));if(T=V.call(T),T==null)throw Error(F(151));for(var U=V=null,C=v,E=v=0,x=null,R=T.next();C!==null&&!R.done;E++,R=T.next()){C.index>E?(x=C,C=null):x=C.sibling;var b=p(_,C,R.value,D);if(b===null){C===null&&(C=x);break}t&&C&&b.alternate===null&&e(_,C),v=s(b,v,E),U===null?V=b:U.sibling=b,U=b,C=x}if(R.done)return n(_,C),Pe&&Pi(_,E),V;if(C===null){for(;!R.done;E++,R=T.next())R=f(_,R.value,D),R!==null&&(v=s(R,v,E),U===null?V=R:U.sibling=R,U=R);return Pe&&Pi(_,E),V}for(C=r(_,C);!R.done;E++,R=T.next())R=y(C,_,E,R.value,D),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),v=s(R,v,E),U===null?V=R:U.sibling=R,U=R);return t&&C.forEach(function(N){return e(_,N)}),Pe&&Pi(_,E),V}function I(_,v,T,D){if(typeof T=="object"&&T!==null&&T.type===Es&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Al:e:{for(var V=T.key,U=v;U!==null;){if(U.key===V){if(V=T.type,V===Es){if(U.tag===7){n(_,U.sibling),v=i(U,T.props.children),v.return=_,_=v;break e}}else if(U.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Rr&&Sy(V)===U.type){n(_,U.sibling),v=i(U,T.props),v.ref=Vo(_,U,T),v.return=_,_=v;break e}n(_,U);break}else e(_,U);U=U.sibling}T.type===Es?(v=ji(T.props.children,_.mode,D,T.key),v.return=_,_=v):(D=du(T.type,T.key,T.props,null,_.mode,D),D.ref=Vo(_,v,T),D.return=_,_=D)}return o(_);case ws:e:{for(U=T.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(_,v.sibling),v=i(v,T.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=nd(T,_.mode,D),v.return=_,_=v}return o(_);case Rr:return U=T._init,I(_,v,U(T._payload),D)}if($o(T))return S(_,v,T,D);if(bo(T))return A(_,v,T,D);jl(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,T),v.return=_,_=v):(n(_,v),v=td(T,_.mode,D),v.return=_,_=v),o(_)):n(_,v)}return I}var qs=iw(!0),sw=iw(!1),Uu=di(null),Fu=null,ks=null,wp=null;function Ep(){wp=ks=Fu=null}function Tp(t){var e=Uu.current;Ae(Uu),t._currentValue=e}function Zd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ms(t,e){Fu=t,wp=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(wp!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(Fu===null)throw Error(F(308));ks=t,Fu.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var Oi=null;function Sp(t){Oi===null?Oi=[t]:Oi.push(t)}function ow(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sp(e)):(n.next=i.next,i.next=n),e.interleaved=n,or(t,r)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function Cp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,or(t,n)}return i=r.interleaved,i===null?(e.next=e,Sp(r)):(e.next=i.next,i.next=e),r.interleaved=e,or(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,up(t,n)}}function Cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,A=a;switch(p=e,y=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){f=S.call(y,f,p);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,p=typeof S=="function"?S.call(y,f,p):S,p==null)break e;f=Le({},f,p);break e;case 2:kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qi|=o,t.lanes=o,t.memoizedState=f}}function xy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var qa={},Dn=di(qa),xa=di(qa),Ia=di(qa);function Li(t){if(t===qa)throw Error(F(174));return t}function xp(t,e){switch(Te(Ia,e),Te(xa,t),Te(Dn,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dd(e,t)}Ae(Dn),Te(Dn,e)}function Gs(){Ae(Dn),Ae(xa),Ae(Ia)}function lw(t){Li(Ia.current);var e=Li(Dn.current),n=Dd(e,t.type);e!==n&&(Te(xa,t),Te(Dn,n))}function Ip(t){xa.current===t&&(Ae(Dn),Ae(xa))}var Ne=di(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function Ap(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var au=mr.ReactCurrentDispatcher,Xh=mr.ReactCurrentBatchConfig,Wi=0,De=null,Qe=null,st=null,$u=!1,na=!1,Aa=0,cI=0;function vt(){throw Error(F(321))}function Rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function kp(t,e,n,r,i,s){if(Wi=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?pI:mI,t=n(r,i),na){s=0;do{if(na=!1,Aa=0,25<=s)throw Error(F(301));s+=1,st=Qe=null,e.updateQueue=null,au.current=gI,t=n(r,i)}while(na)}if(au.current=Hu,e=Qe!==null&&Qe.next!==null,Wi=0,st=Qe=De=null,$u=!1,e)throw Error(F(300));return t}function Pp(){var t=Aa!==0;return Aa=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?De.memoizedState=st=t:st=st.next=t,st}function un(){if(Qe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=st===null?De.memoizedState:st.next;if(e!==null)st=e,Qe=t;else{if(t===null)throw Error(F(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},st===null?De.memoizedState=st=t:st=st.next=t}return st}function Ra(t,e){return typeof e=="function"?e(t):e}function Qh(t){var e=un(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Wi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,De.lanes|=h,qi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,wn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,qi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jh(t){var e=un(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);wn(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function uw(){}function cw(t,e){var n=De,r=un(),i=e(),s=!wn(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,bp(fw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,ka(9,dw.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(F(349));Wi&30||hw(n,e,i)}return i}function hw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dw(t,e,n,r){e.value=n,e.getSnapshot=r,pw(e)&&mw(t)}function fw(t,e,n){return n(function(){pw(e)&&mw(t)})}function pw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function mw(t){var e=or(t,1);e!==null&&_n(e,t,1,-1)}function Iy(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=fI.bind(null,De,t),[e.memoizedState,t]}function ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gw(){return un().memoizedState}function lu(t,e,n,r){var i=An();De.flags|=t,i.memoizedState=ka(1|e,n,void 0,r===void 0?null:r)}function xc(t,e,n,r){var i=un();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var o=Qe.memoizedState;if(s=o.destroy,r!==null&&Rp(r,o.deps)){i.memoizedState=ka(e,n,s,r);return}}De.flags|=t,i.memoizedState=ka(1|e,n,s,r)}function Ay(t,e){return lu(8390656,8,t,e)}function bp(t,e){return xc(2048,8,t,e)}function yw(t,e){return xc(4,2,t,e)}function vw(t,e){return xc(4,4,t,e)}function _w(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ww(t,e,n){return n=n!=null?n.concat([t]):null,xc(4,4,_w.bind(null,e,t),n)}function Np(){}function Ew(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tw(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sw(t,e,n){return Wi&21?(wn(n,e)||(n=R0(),De.lanes|=n,qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function hI(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{ve=n,Xh.transition=r}}function Cw(){return un().memoizedState}function dI(t,e,n){var r=qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xw(t))Iw(e,n);else if(n=ow(t,e,n,r),n!==null){var i=kt();_n(n,t,r,i),Aw(n,e,r)}}function fI(t,e,n){var r=qr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xw(t))Iw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wn(a,o)){var u=e.interleaved;u===null?(i.next=i,Sp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=ow(t,e,i,r),n!==null&&(i=kt(),_n(n,t,r,i),Aw(n,e,r))}}function xw(t){var e=t.alternate;return t===De||e!==null&&e===De}function Iw(t,e){na=$u=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Aw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,up(t,n)}}var Hu={readContext:ln,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},pI={readContext:ln,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Ay,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,_w.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=An();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dI.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:Iy,useDebugValue:Np,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=Iy(!1),e=t[0];return t=hI.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=An();if(Pe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),ot===null)throw Error(F(349));Wi&30||hw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ay(fw.bind(null,r,s,t),[t]),r.flags|=2048,ka(9,dw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=An(),e=ot.identifierPrefix;if(Pe){var n=Jn,r=Qn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mI={readContext:ln,useCallback:Ew,useContext:ln,useEffect:bp,useImperativeHandle:ww,useInsertionEffect:yw,useLayoutEffect:vw,useMemo:Tw,useReducer:Qh,useRef:gw,useState:function(){return Qh(Ra)},useDebugValue:Np,useDeferredValue:function(t){var e=un();return Sw(e,Qe.memoizedState,t)},useTransition:function(){var t=Qh(Ra)[0],e=un().memoizedState;return[t,e]},useMutableSource:uw,useSyncExternalStore:cw,useId:Cw,unstable_isNewReconciler:!1},gI={readContext:ln,useCallback:Ew,useContext:ln,useEffect:bp,useImperativeHandle:ww,useInsertionEffect:yw,useLayoutEffect:vw,useMemo:Tw,useReducer:Jh,useRef:gw,useState:function(){return Jh(Ra)},useDebugValue:Np,useDeferredValue:function(t){var e=un();return Qe===null?e.memoizedState=t:Sw(e,Qe.memoizedState,t)},useTransition:function(){var t=Jh(Ra)[0],e=un().memoizedState;return[t,e]},useMutableSource:uw,useSyncExternalStore:cw,useId:Cw,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ic={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=qr(t),s=tr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(_n(e,t,i,r),ou(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=qr(t),s=tr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(_n(e,t,i,r),ou(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=qr(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(_n(e,t,r,n),ou(e,t,r))}};function Ry(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(i,s):!0}function Rw(t,e,n){var r=!1,i=ti,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=Mt(e)?$i:Ct.current,r=e.contextTypes,s=(r=r!=null)?Hs(t,i):ti),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ic,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ky(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ic.enqueueReplaceState(e,e.state,null)}function tf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=Mt(e)?$i:Ct.current,i.context=Hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ef(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ic.enqueueReplaceState(i,i.state,null),zu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e){try{var n="",r=e;do n+=HC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yI=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qu||(qu=!0,ff=r),nf(t,e)},n}function Pw(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){nf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nf(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Py(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=bI.bind(null,t,e,n),e.then(t,t))}function by(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ny(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var vI=mr.ReactCurrentOwner,Lt=!1;function Rt(t,e,n,r){e.child=t===null?sw(e,null,n,r):qs(e,t.child,n,r)}function Dy(t,e,n,r,i){n=n.render;var s=e.ref;return Ms(e,i),r=kp(t,e,n,r,s,i),n=Pp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Pe&&n&&yp(e),e.flags|=1,Rt(t,e,r,i),e.child)}function Oy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,bw(t,e,s,r,i)):(t=du(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(o,r)&&t.ref===e.ref)return ar(t,e,i)}return e.flags|=1,t=Gr(s,r),t.ref=e.ref,t.return=e,e.child=t}function bw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ea(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,ar(t,e,i)}return rf(t,e,n,r,i)}function Nw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(bs,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(bs,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(bs,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(bs,$t),$t|=r;return Rt(t,e,i,n),e.child}function Dw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rf(t,e,n,r,i){var s=Mt(n)?$i:Ct.current;return s=Hs(e,s),Ms(e,i),n=kp(t,e,n,r,s,i),r=Pp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Pe&&r&&yp(e),e.flags|=1,Rt(t,e,n,i),e.child)}function Ly(t,e,n,r,i){if(Mt(n)){var s=!0;Vu(e)}else s=!1;if(Ms(e,i),e.stateNode===null)uu(t,e),Rw(e,n,r),tf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=Mt(n)?$i:Ct.current,c=Hs(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&ky(e,o,r,c),kr=!1;var p=e.memoizedState;o.state=p,zu(e,r,o,i),u=e.memoizedState,a!==r||p!==u||Vt.current||kr?(typeof h=="function"&&(ef(e,n,h,r),u=e.memoizedState),(a=kr||Ry(e,n,a,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ln(u):(u=Mt(n)?$i:Ct.current,u=Hs(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==u)&&ky(e,o,r,u),kr=!1,p=e.memoizedState,o.state=p,zu(e,r,o,i);var S=e.memoizedState;a!==f||p!==S||Vt.current||kr?(typeof y=="function"&&(ef(e,n,y,r),S=e.memoizedState),(c=kr||Ry(e,n,c,r,p,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return sf(t,e,n,r,s,i)}function sf(t,e,n,r,i,s){Dw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&wy(e,n,!1),ar(t,e,s);r=e.stateNode,vI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,s),e.child=qs(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&wy(e,n,!0),e.child}function Ow(t){var e=t.stateNode;e.pendingContext?_y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_y(t,e.context,!1),xp(t,e.containerInfo)}function Vy(t,e,n,r,i){return Ws(),_p(i),e.flags|=256,Rt(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function af(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lw(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Ne,i&1),t===null)return Jd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kc(o,r,0,null),t=ji(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=af(n),e.memoizedState=of,t):Dp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _I(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gr(a,s):(s=ji(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?af(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=of,r}return s=t.child,t=s.sibling,r=Gr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&_p(r),qs(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _I(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zh(Error(F(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kc({mode:"visible",children:r.children},i,0,null),s=ji(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=af(o),e.memoizedState=of,s);if(!(e.mode&1))return Ul(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(F(419)),r=Zh(s,r,void 0),Ul(t,e,o,r)}if(a=(o&t.childLanes)!==0,Lt||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,or(t,i),_n(r,t,i,-1))}return Up(),r=Zh(Error(F(421))),Ul(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=$r(i.nextSibling),Gt=e,Pe=!0,mn=null,t!==null&&(Jt[Zt++]=Qn,Jt[Zt++]=Jn,Jt[Zt++]=Hi,Qn=t.id,Jn=t.overflow,Hi=e),e=Dp(e,r.children),e.flags|=4096,e)}function My(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zd(t.return,e,n)}function ed(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&My(t,n,e);else if(t.tag===19)My(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ed(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ed(e,!0,n,null,s);break;case"together":ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wI(t,e,n){switch(e.tag){case 3:Ow(e),Ws();break;case 5:lw(e);break;case 1:Mt(e.type)&&Vu(e);break;case 4:xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Uu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Lw(t,e,n):(Te(Ne,Ne.current&1),t=ar(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Nw(t,e,n)}return ar(t,e,n)}var Mw,lf,jw,Uw;Mw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lf=function(){};jw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Li(Dn.current);var s=null;switch(n){case"input":i=kd(t,i),r=kd(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Nd(t,i),r=Nd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ou)}Od(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&xe("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Uw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EI(t,e,n){var r=e.pendingProps;switch(vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Mt(e.type)&&Lu(),_t(e),null;case 3:return r=e.stateNode,Gs(),Ae(Vt),Ae(Ct),Ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(gf(mn),mn=null))),lf(t,e),_t(e),null;case 5:Ip(e);var i=Li(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)jw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return _t(e),null}if(t=Li(Dn.current),Ml(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[Ca]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<Wo.length;i++)xe(Wo[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":qg(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":Kg(r,s),xe("invalid",r)}Od(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),i=["children",""+a]):pa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Rl(r),Gg(r,s,!0);break;case"textarea":Rl(r),Yg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ou)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[Ca]=r,Mw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ld(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wo.length;i++)xe(Wo[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":qg(t,r),i=kd(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Kg(t,r),i=Nd(t,r),xe("invalid",t);break;default:i=r}Od(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?g0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&p0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ma(t,u):typeof u=="number"&&ma(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xe("scroll",t):u!=null&&rp(t,s,u,o))}switch(n){case"input":Rl(t),Gg(t,r,!1);break;case"textarea":Rl(t),Yg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ei(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ds(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ds(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)Uw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Li(Ia.current),Li(Dn.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(s=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return _t(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Ht!==null&&e.mode&1&&!(e.flags&128))rw(),Ws(),e.flags|=98560,s=!1;else if(s=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[kn]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else mn!==null&&(gf(mn),mn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Je===0&&(Je=3):Up())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Gs(),lf(t,e),t===null&&Ta(e.stateNode.containerInfo),_t(e),null;case 10:return Tp(e.type._context),_t(e),null;case 17:return Mt(e.type)&&Lu(),_t(e),null;case 19:if(Ae(Ne),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mo(s,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bu(t),o!==null){for(e.flags|=128,Mo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>Ys&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return _t(e),null}else 2*He()-s.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Ne.current,Te(Ne,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return jp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function TI(t,e){switch(vp(e),e.tag){case 1:return Mt(e.type)&&Lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),Ae(Vt),Ae(Ct),Ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ip(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return Gs(),null;case 10:return Tp(e.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var Fl=!1,Tt=!1,SI=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function uf(t,e,n){try{n()}catch(r){je(t,e,r)}}var jy=!1;function CI(t,e){if(Wd=bu,t=H0(),gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(u=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:t,selectionRange:n},bu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,I=S.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:fn(e.type,A),I);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(D){je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return S=jy,jy=!1,S}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&uf(e,n,s)}i=i.next}while(i!==r)}}function Ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fw(t){var e=t.alternate;e!==null&&(t.alternate=null,Fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ca],delete e[Yd],delete e[oI],delete e[aI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zw(t){return t.tag===5||t.tag===3||t.tag===4}function Uy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(r!==4&&(t=t.child,t!==null))for(hf(t,e,n),t=t.sibling;t!==null;)hf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var ut=null,pn=!1;function Ir(t,e,n){for(n=n.child;n!==null;)Bw(t,e,n),n=n.sibling}function Bw(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:Tt||Ps(n,e);case 6:var r=ut,i=pn;ut=null,Ir(t,e,n),ut=r,pn=i,ut!==null&&(pn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(pn?(t=ut,n=n.stateNode,t.nodeType===8?Gh(t.parentNode,n):t.nodeType===1&&Gh(t,n),_a(t)):Gh(ut,n.stateNode));break;case 4:r=ut,i=pn,ut=n.stateNode.containerInfo,pn=!0,Ir(t,e,n),ut=r,pn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uf(n,e,o),i=i.next}while(i!==r)}Ir(t,e,n);break;case 1:if(!Tt&&(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,Ir(t,e,n),Tt=r):Ir(t,e,n);break;default:Ir(t,e,n)}}function Fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SI),e.forEach(function(r){var i=DI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,pn=!1;break e;case 3:ut=a.stateNode.containerInfo,pn=!0;break e;case 4:ut=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(ut===null)throw Error(F(160));Bw(s,o,i),ut=null,pn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$w(e,t),e=e.sibling}function $w(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),In(t),r&4){try{ra(3,t,t.return),Ac(3,t)}catch(A){je(t,t.return,A)}try{ra(5,t,t.return)}catch(A){je(t,t.return,A)}}break;case 1:dn(e,t),In(t),r&512&&n!==null&&Ps(n,n.return);break;case 5:if(dn(e,t),In(t),r&512&&n!==null&&Ps(n,n.return),t.flags&32){var i=t.stateNode;try{ma(i,"")}catch(A){je(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&h0(i,s),Ld(a,o);var c=Ld(a,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?g0(i,f):h==="dangerouslySetInnerHTML"?p0(i,f):h==="children"?ma(i,f):rp(i,h,f,c)}switch(a){case"input":Pd(i,s);break;case"textarea":d0(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Ds(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ds(i,!!s.multiple,s.defaultValue,!0):Ds(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ca]=s}catch(A){je(t,t.return,A)}}break;case 6:if(dn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){je(t,t.return,A)}}break;case 3:if(dn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(A){je(t,t.return,A)}break;case 4:dn(e,t),In(t);break;case 13:dn(e,t),In(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vp=He())),r&4&&Fy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,dn(e,t),Tt=c):dn(e,t),In(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(f=X=h;X!==null;){switch(p=X,y=p.child,p.tag){case 0:case 11:case 14:case 15:ra(4,p,p.return);break;case 1:Ps(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){je(r,n,A)}}break;case 5:Ps(p,p.return);break;case 22:if(p.memoizedState!==null){By(f);continue}}y!==null?(y.return=p,X=y):By(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=m0("display",o))}catch(A){je(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){je(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dn(e,t),In(t),r&4&&Fy(t);break;case 21:break;default:dn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ma(i,""),r.flags&=-33);var s=Uy(t);df(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Uy(t);hf(t,a,o);break;default:throw Error(F(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xI(t,e,n){X=t,Hw(t)}function Hw(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Tt;a=Fl;var c=Tt;if(Fl=o,(Tt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?$y(i):u!==null?(u.return=o,X=u):$y(i);for(;s!==null;)X=s,Hw(s),s=s.sibling;X=i,Fl=a,Tt=c}zy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):zy(t)}}function zy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_a(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Tt||e.flags&512&&cf(e)}catch(p){je(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function By(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function $y(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ac(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){je(e,i,u)}}var s=e.return;try{cf(e)}catch(u){je(e,s,u)}break;case 5:var o=e.return;try{cf(e)}catch(u){je(e,o,u)}}}catch(u){je(e,e.return,u)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var II=Math.ceil,Wu=mr.ReactCurrentDispatcher,Op=mr.ReactCurrentOwner,sn=mr.ReactCurrentBatchConfig,pe=0,ot=null,Ge=null,dt=0,$t=0,bs=di(0),Je=0,Pa=null,qi=0,Rc=0,Lp=0,ia=null,Dt=null,Vp=0,Ys=1/0,Yn=null,qu=!1,ff=null,Wr=null,zl=!1,jr=null,Gu=0,sa=0,pf=null,cu=-1,hu=0;function kt(){return pe&6?He():cu!==-1?cu:cu=He()}function qr(t){return t.mode&1?pe&2&&dt!==0?dt&-dt:uI.transition!==null?(hu===0&&(hu=R0()),hu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:L0(t.type)),t):1}function _n(t,e,n,r){if(50<sa)throw sa=0,pf=null,Error(F(185));$a(t,n,r),(!(pe&2)||t!==ot)&&(t===ot&&(!(pe&2)&&(Rc|=n),Je===4&&br(t,dt)),jt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Ys=He()+500,Cc&&fi()))}function jt(t,e){var n=t.callbackNode;ux(t,e);var r=Pu(t,t===ot?dt:0);if(r===0)n!==null&&Jg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jg(n),e===1)t.tag===0?lI(Hy.bind(null,t)):ew(Hy.bind(null,t)),iI(function(){!(pe&6)&&fi()}),n=null;else{switch(k0(r)){case 1:n=lp;break;case 4:n=I0;break;case 16:n=ku;break;case 536870912:n=A0;break;default:n=ku}n=Jw(n,Ww.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ww(t,e){if(cu=-1,hu=0,pe&6)throw Error(F(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Pu(t,t===ot?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ku(t,r);else{e=r;var i=pe;pe|=2;var s=Gw();(ot!==t||dt!==e)&&(Yn=null,Ys=He()+500,Mi(t,e));do try{kI();break}catch(a){qw(t,a)}while(!0);Ep(),Wu.current=s,pe=i,Ge!==null?e=0:(ot=null,dt=0,e=Je)}if(e!==0){if(e===2&&(i=Fd(t),i!==0&&(r=i,e=mf(t,i))),e===1)throw n=Pa,Mi(t,0),br(t,r),jt(t,He()),n;if(e===6)br(t,r);else{if(i=t.current.alternate,!(r&30)&&!AI(i)&&(e=Ku(t,r),e===2&&(s=Fd(t),s!==0&&(r=s,e=mf(t,s))),e===1))throw n=Pa,Mi(t,0),br(t,r),jt(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:bi(t,Dt,Yn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=Vp+500-He(),10<e)){if(Pu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kd(bi.bind(null,t,Dt,Yn),e);break}bi(t,Dt,Yn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*II(r/1960))-r,10<r){t.timeoutHandle=Kd(bi.bind(null,t,Dt,Yn),r);break}bi(t,Dt,Yn);break;case 5:bi(t,Dt,Yn);break;default:throw Error(F(329))}}}return jt(t,He()),t.callbackNode===n?Ww.bind(null,t):null}function mf(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=Ku(t,e),t!==2&&(e=Dt,Dt=n,e!==null&&gf(e)),t}function gf(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function AI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~Lp,e&=~Rc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function Hy(t){if(pe&6)throw Error(F(327));js();var e=Pu(t,0);if(!(e&1))return jt(t,He()),null;var n=Ku(t,e);if(t.tag!==0&&n===2){var r=Fd(t);r!==0&&(e=r,n=mf(t,r))}if(n===1)throw n=Pa,Mi(t,0),br(t,e),jt(t,He()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bi(t,Dt,Yn),jt(t,He()),null}function Mp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Ys=He()+500,Cc&&fi())}}function Gi(t){jr!==null&&jr.tag===0&&!(pe&6)&&js();var e=pe;pe|=1;var n=sn.transition,r=ve;try{if(sn.transition=null,ve=1,t)return t()}finally{ve=r,sn.transition=n,pe=e,!(pe&6)&&fi()}}function jp(){$t=bs.current,Ae(bs)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rI(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lu();break;case 3:Gs(),Ae(Vt),Ae(Ct),Ap();break;case 5:Ip(r);break;case 4:Gs();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:Tp(r.type._context);break;case 22:case 23:jp()}n=n.return}if(ot=t,Ge=t=Gr(t.current,null),dt=$t=e,Je=0,Pa=null,Lp=Rc=qi=0,Dt=ia=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Oi=null}return t}function qw(t,e){do{var n=Ge;try{if(Ep(),au.current=Hu,$u){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$u=!1}if(Wi=0,st=Qe=De=null,na=!1,Aa=0,Op.current=null,n===null||n.return===null){Je=1,Pa=e,Ge=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=dt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=by(o);if(y!==null){y.flags&=-257,Ny(y,o,a,s,e),y.mode&1&&Py(s,c,e),e=y,u=c;var S=e.updateQueue;if(S===null){var A=new Set;A.add(u),e.updateQueue=A}else S.add(u);break e}else{if(!(e&1)){Py(s,c,e),Up();break e}u=Error(F(426))}}else if(Pe&&a.mode&1){var I=by(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Ny(I,o,a,s,e),_p(Ks(u,a));break e}}s=u=Ks(u,a),Je!==4&&(Je=2),ia===null?ia=[s]:ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=kw(s,u,e);Cy(s,_);break e;case 1:a=u;var v=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Wr===null||!Wr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=Pw(s,a,e);Cy(s,D);break e}}s=s.return}while(s!==null)}Yw(n)}catch(V){e=V,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Gw(){var t=Wu.current;return Wu.current=Hu,t===null?Hu:t}function Up(){(Je===0||Je===3||Je===2)&&(Je=4),ot===null||!(qi&268435455)&&!(Rc&268435455)||br(ot,dt)}function Ku(t,e){var n=pe;pe|=2;var r=Gw();(ot!==t||dt!==e)&&(Yn=null,Mi(t,e));do try{RI();break}catch(i){qw(t,i)}while(!0);if(Ep(),pe=n,Wu.current=r,Ge!==null)throw Error(F(261));return ot=null,dt=0,Je}function RI(){for(;Ge!==null;)Kw(Ge)}function kI(){for(;Ge!==null&&!ex();)Kw(Ge)}function Kw(t){var e=Qw(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?Yw(t):Ge=e,Op.current=null}function Yw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TI(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ge=null;return}}else if(n=EI(n,e,$t),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Je===0&&(Je=5)}function bi(t,e,n){var r=ve,i=sn.transition;try{sn.transition=null,ve=1,PI(t,e,n,r)}finally{sn.transition=i,ve=r}return null}function PI(t,e,n,r){do js();while(jr!==null);if(pe&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cx(t,s),t===ot&&(Ge=ot=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,Jw(ku,function(){return js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var o=ve;ve=1;var a=pe;pe|=4,Op.current=null,CI(t,n),$w(n,t),Xx(qd),bu=!!Wd,qd=Wd=null,t.current=n,xI(n),tx(),pe=a,ve=o,sn.transition=s}else t.current=n;if(zl&&(zl=!1,jr=t,Gu=i),s=t.pendingLanes,s===0&&(Wr=null),ix(n.stateNode),jt(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qu)throw qu=!1,t=ff,ff=null,t;return Gu&1&&t.tag!==0&&js(),s=t.pendingLanes,s&1?t===pf?sa++:(sa=0,pf=t):sa=0,fi(),null}function js(){if(jr!==null){var t=k0(Gu),e=sn.transition,n=ve;try{if(sn.transition=null,ve=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,Gu=0,pe&6)throw Error(F(331));var i=pe;for(pe|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:ra(8,h,s)}var f=h.child;if(f!==null)f.return=h,X=f;else for(;X!==null;){h=X;var p=h.sibling,y=h.return;if(Fw(h),h===c){X=null;break}if(p!==null){p.return=y,X=p;break}X=y}}}var S=s.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ra(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,X=_;break e}X=s.return}}var v=t.current;for(X=v;X!==null;){o=X;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,X=T;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ac(9,a)}}catch(V){je(a,a.return,V)}if(a===o){X=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,X=D;break e}X=a.return}}if(pe=i,fi(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(_c,t)}catch{}r=!0}return r}finally{ve=n,sn.transition=e}}return!1}function Wy(t,e,n){e=Ks(n,e),e=kw(t,e,1),t=Hr(t,e,1),e=kt(),t!==null&&($a(t,1,e),jt(t,e))}function je(t,e,n){if(t.tag===3)Wy(t,t,n);else for(;e!==null;){if(e.tag===3){Wy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=Ks(n,t),t=Pw(e,t,1),e=Hr(e,t,1),t=kt(),e!==null&&($a(e,1,t),jt(e,t));break}}e=e.return}}function bI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(dt&n)===n&&(Je===4||Je===3&&(dt&130023424)===dt&&500>He()-Vp?Mi(t,0):Lp|=n),jt(t,e)}function Xw(t,e){e===0&&(t.mode&1?(e=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):e=1);var n=kt();t=or(t,e),t!==null&&($a(t,e,n),jt(t,n))}function NI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xw(t,n)}function DI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Xw(t,n)}var Qw;Qw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,wI(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Pe&&e.flags&1048576&&tw(e,ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uu(t,e),t=e.pendingProps;var i=Hs(e,Ct.current);Ms(e,n),i=kp(null,e,r,t,i,n);var s=Pp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mt(r)?(s=!0,Vu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cp(e),i.updater=Ic,e.stateNode=i,i._reactInternals=e,tf(e,r,t,n),e=sf(null,e,r,!0,s,n)):(e.tag=0,Pe&&s&&yp(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=LI(r),t=fn(r,t),i){case 0:e=rf(null,e,r,t,n);break e;case 1:e=Ly(null,e,r,t,n);break e;case 11:e=Dy(null,e,r,t,n);break e;case 14:e=Oy(null,e,r,fn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),rf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Ly(t,e,r,i,n);case 3:e:{if(Ow(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,aw(t,e),zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ks(Error(F(423)),e),e=Vy(t,e,r,n,i);break e}else if(r!==i){i=Ks(Error(F(424)),e),e=Vy(t,e,r,n,i);break e}else for(Ht=$r(e.stateNode.containerInfo.firstChild),Gt=e,Pe=!0,mn=null,n=sw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),r===i){e=ar(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return lw(e),t===null&&Jd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Gd(r,i)?o=null:s!==null&&Gd(r,s)&&(e.flags|=32),Dw(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&Jd(e),null;case 13:return Lw(t,e,n);case 4:return xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),Dy(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(Uu,r._currentValue),r._currentValue=o,s!==null)if(wn(s.value,o)){if(s.children===i.children&&!Vt.current){e=ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=tr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Zd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Zd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ms(e,n),i=ln(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=fn(r,e.pendingProps),i=fn(r.type,i),Oy(t,e,r,i,n);case 15:return bw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fn(r,i),uu(t,e),e.tag=1,Mt(r)?(t=!0,Vu(e)):t=!1,Ms(e,n),Rw(e,r,i),tf(e,r,i,n),sf(null,e,r,!0,t,n);case 19:return Vw(t,e,n);case 22:return Nw(t,e,n)}throw Error(F(156,e.tag))};function Jw(t,e){return x0(t,e)}function OI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,r){return new OI(t,e,n,r)}function Fp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LI(t){if(typeof t=="function")return Fp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sp)return 11;if(t===op)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function du(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Es:return ji(n.children,i,s,e);case ip:o=8,i|=8;break;case xd:return t=nn(12,n,e,i|2),t.elementType=xd,t.lanes=s,t;case Id:return t=nn(13,n,e,i),t.elementType=Id,t.lanes=s,t;case Ad:return t=nn(19,n,e,i),t.elementType=Ad,t.lanes=s,t;case l0:return kc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o0:o=10;break e;case a0:o=9;break e;case sp:o=11;break e;case op:o=14;break e;case Rr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ji(t,e,n,r){return t=nn(7,t,r,e),t.lanes=n,t}function kc(t,e,n,r){return t=nn(22,t,r,e),t.elementType=l0,t.lanes=n,t.stateNode={isHidden:!1},t}function td(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function nd(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zp(t,e,n,r,i,s,o,a,u){return t=new VI(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cp(s),t}function MI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Zw(t){if(!t)return ti;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Mt(n))return Z0(t,n,e)}return e}function eE(t,e,n,r,i,s,o,a,u){return t=zp(n,r,!0,t,i,s,o,a,u),t.context=Zw(null),n=t.current,r=kt(),i=qr(n),s=tr(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,$a(t,i,r),jt(t,r),t}function Pc(t,e,n,r){var i=e.current,s=kt(),o=qr(i);return n=Zw(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,o),t!==null&&(_n(t,i,o,s),ou(t,i,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bp(t,e){qy(t,e),(t=t.alternate)&&qy(t,e)}function jI(){return null}var tE=typeof reportError=="function"?reportError:function(t){console.error(t)};function $p(t){this._internalRoot=t}bc.prototype.render=$p.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Pc(t,e,null,null)};bc.prototype.unmount=$p.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gi(function(){Pc(null,t,null,null)}),e[sr]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=N0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&O0(t)}};function Hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gy(){}function UI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Yu(o);s.call(c)}}var o=eE(e,r,t,0,null,!1,!1,"",Gy);return t._reactRootContainer=o,t[sr]=o.current,Ta(t.nodeType===8?t.parentNode:t),Gi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Yu(u);a.call(c)}}var u=zp(t,0,!1,null,null,!1,!1,"",Gy);return t._reactRootContainer=u,t[sr]=u.current,Ta(t.nodeType===8?t.parentNode:t),Gi(function(){Pc(e,u,n,r)}),u}function Dc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Yu(o);a.call(u)}}Pc(e,o,t,i)}else o=UI(n,e,t,i,r);return Yu(o)}P0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(up(e,n|1),jt(e,He()),!(pe&6)&&(Ys=He()+500,fi()))}break;case 13:Gi(function(){var r=or(t,1);if(r!==null){var i=kt();_n(r,t,1,i)}}),Bp(t,1)}};cp=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=kt();_n(e,t,134217728,n)}Bp(t,134217728)}};b0=function(t){if(t.tag===13){var e=qr(t),n=or(t,e);if(n!==null){var r=kt();_n(n,t,e,r)}Bp(t,e)}};N0=function(){return ve};D0=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Md=function(t,e,n){switch(e){case"input":if(Pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Sc(r);if(!i)throw Error(F(90));c0(r),Pd(r,i)}}}break;case"textarea":d0(t,n);break;case"select":e=n.value,e!=null&&Ds(t,!!n.multiple,e,!1)}};_0=Mp;w0=Gi;var FI={usingClientEntryPoint:!1,Events:[Wa,xs,Sc,y0,v0,Mp]},jo={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zI={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S0(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||jI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{_c=Bl.inject(zI),Nn=Bl}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FI;Yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hp(e))throw Error(F(200));return MI(t,e,null,n)};Yt.createRoot=function(t,e){if(!Hp(t))throw Error(F(299));var n=!1,r="",i=tE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zp(t,1,!1,null,null,n,!1,r,i),t[sr]=e.current,Ta(t.nodeType===8?t.parentNode:t),new $p(e)};Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=S0(e),t=t===null?null:t.stateNode,t};Yt.flushSync=function(t){return Gi(t)};Yt.hydrate=function(t,e,n){if(!Nc(e))throw Error(F(200));return Dc(null,t,e,!0,n)};Yt.hydrateRoot=function(t,e,n){if(!Hp(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=tE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eE(e,null,t,1,n??null,i,!1,s,o),t[sr]=e.current,Ta(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bc(e)};Yt.render=function(t,e,n){if(!Nc(e))throw Error(F(200));return Dc(null,t,e,!1,n)};Yt.unmountComponentAtNode=function(t){if(!Nc(t))throw Error(F(40));return t._reactRootContainer?(Gi(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};Yt.unstable_batchedUpdates=Mp;Yt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Dc(t,e,n,!1,r)};Yt.version="18.3.1-next-f1338f8080-20240426";function nE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nE)}catch(t){console.error(t)}}nE(),n0.exports=Yt;var BI=n0.exports,Ky=BI;Sd.createRoot=Ky.createRoot,Sd.hydrateRoot=Ky.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Yy="popstate";function $I(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return yf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ba(i)}return WI(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function En(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HI(){return Math.random().toString(36).substring(2,10)}function Xy(t,e){return{usr:t.state,key:t.key,idx:e}}function yf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?so(e):e,state:n,key:e&&e.key||r||HI()}}function ba({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WI(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let I=h(),_=I==null?null:I-c;c=I,u&&u({action:a,location:A.location,delta:_})}function p(I,_){a="PUSH";let v=yf(A.location,I,_);c=h()+1;let T=Xy(v,c),D=A.createHref(v);try{o.pushState(T,"",D)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(D)}s&&u&&u({action:a,location:A.location,delta:1})}function y(I,_){a="REPLACE";let v=yf(A.location,I,_);c=h();let T=Xy(v,c),D=A.createHref(v);o.replaceState(T,"",D),s&&u&&u({action:a,location:A.location,delta:0})}function S(I){return qI(I)}let A={get action(){return a},get location(){return t(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Yy,f),u=I,()=>{i.removeEventListener(Yy,f),u=null}},createHref(I){return e(i,I)},createURL:S,encodeLocation(I){let _=S(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(I){return o.go(I)}};return A}function qI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ba(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function rE(t,e,n="/"){return GI(t,e,n,!1)}function GI(t,e,n,r){let i=typeof e=="string"?so(e):e,s=lr(i.pathname||"/",n);if(s==null)return null;let o=iE(t);KI(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=sA(s);a=rA(o[u],c,r)}return a}function iE(t,e=[],n=[],r="",i=!1){let s=(o,a,u=i,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;Oe(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=nr([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(Oe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),iE(o.children,e,p,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:tA(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,a);else for(let c of sE(o.path))s(o,a,!0,c)}),e}function sE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function KI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var YI=/^:[\w-]+$/,XI=3,QI=2,JI=1,ZI=10,eA=-2,Qy=t=>t==="*";function tA(t,e){let n=t.split("/"),r=n.length;return n.some(Qy)&&(r+=eA),e&&(r+=QI),n.filter(i=>!Qy(i)).reduce((i,s)=>i+(YI.test(s)?XI:s===""?JI:ZI),r)}function nA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rA(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Xu({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Xu({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:nr([s,f.pathname]),pathnameBase:cA(nr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=nr([s,f.pathnameBase]))}return o}function Xu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let S=a[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[p];return f&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iA(t,e=!1,n=!0){En(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return En(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function lr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aA=t=>oA.test(t);function lA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?so(t):t,s;if(n)if(aA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),En(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=Jy(n.substring(1),"/"):s=Jy(n,e)}else s=e;return{pathname:s,search:hA(r),hash:dA(i)}}function Jy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function oE(t){let e=uA(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function aE(t,e,n,r=!1){let i;typeof t=="string"?i=so(t):(i={...t},Oe(!i.pathname||!i.pathname.includes("?"),rd("?","pathname","search",i)),Oe(!i.pathname||!i.pathname.includes("#"),rd("#","pathname","hash",i)),Oe(!i.search||!i.search.includes("#"),rd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let u=lA(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var nr=t=>t.join("/").replace(/\/\/+/g,"/"),cA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lE=["POST","PUT","PATCH","DELETE"];new Set(lE);var pA=["GET",...lE];new Set(pA);var oo=P.createContext(null);oo.displayName="DataRouter";var Oc=P.createContext(null);Oc.displayName="DataRouterState";P.createContext(!1);var uE=P.createContext({isTransitioning:!1});uE.displayName="ViewTransition";var mA=P.createContext(new Map);mA.displayName="Fetchers";var gA=P.createContext(null);gA.displayName="Await";var Bn=P.createContext(null);Bn.displayName="Navigation";var Ga=P.createContext(null);Ga.displayName="Location";var $n=P.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var Wp=P.createContext(null);Wp.displayName="RouteError";function yA(t,{relative:e}={}){Oe(Ka(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Bn),{hash:i,pathname:s,search:o}=Ya(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:nr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Ka(){return P.useContext(Ga)!=null}function ns(){return Oe(Ka(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ga).location}var cE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hE(t){P.useContext(Bn).static||P.useLayoutEffect(t)}function dE(){let{isDataRoute:t}=P.useContext($n);return t?bA():vA()}function vA(){Oe(Ka(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(oo),{basename:e,navigator:n}=P.useContext(Bn),{matches:r}=P.useContext($n),{pathname:i}=ns(),s=JSON.stringify(oE(r)),o=P.useRef(!1);return hE(()=>{o.current=!0}),P.useCallback((u,c={})=>{if(En(o.current,cE),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=aE(u,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:nr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}P.createContext(null);function _A(){let{matches:t}=P.useContext($n),e=t[t.length-1];return e?e.params:{}}function Ya(t,{relative:e}={}){let{matches:n}=P.useContext($n),{pathname:r}=ns(),i=JSON.stringify(oE(n));return P.useMemo(()=>aE(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function wA(t,e){return fE(t,e)}function fE(t,e,n,r,i){var v;Oe(Ka(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(Bn),{matches:o}=P.useContext($n),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let T=f&&f.path||"";pE(c,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let p=ns(),y;if(e){let T=typeof e=="string"?so(e):e;Oe(h==="/"||((v=T.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${T.pathname}" was given in the \`location\` prop.`),y=T}else y=p;let S=y.pathname||"/",A=S;if(h!=="/"){let T=h.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(T.length).join("/")}let I=rE(t,{pathname:A});En(f||I!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),En(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=xA(I&&I.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:nr([h,s.encodeLocation?s.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:nr([h,s.encodeLocation?s.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),o,n,r,i);return e&&_?P.createElement(Ga.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function EA(){let t=PA(),e=fA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,o)}var TA=P.createElement(EA,null),SA=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement($n.Provider,{value:this.props.routeContext},P.createElement(Wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CA({routeContext:t,match:e,children:n}){let r=P.useContext(oo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement($n.Provider,{value:t},n)}function xA(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Oe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let a=!1,u=-1;if(n)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=n,S=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||S){a=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let c=n&&r?(h,f)=>{var p,y;r(h,{location:n.location,params:((y=(p=n.matches)==null?void 0:p[0])==null?void 0:y.params)??{},errorInfo:f})}:void 0;return s.reduceRight((h,f,p)=>{let y,S=!1,A=null,I=null;n&&(y=o&&f.route.id?o[f.route.id]:void 0,A=f.route.errorElement||TA,a&&(u<0&&p===0?(pE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,I=null):u===p&&(S=!0,I=f.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,p+1)),v=()=>{let T;return y?T=A:S?T=I:f.route.Component?T=P.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=h,P.createElement(CA,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?P.createElement(SA,{location:n.location,revalidation:n.revalidation,component:A,error:y,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:c}):v()},null)}function qp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IA(t){let e=P.useContext(oo);return Oe(e,qp(t)),e}function AA(t){let e=P.useContext(Oc);return Oe(e,qp(t)),e}function RA(t){let e=P.useContext($n);return Oe(e,qp(t)),e}function Gp(t){let e=RA(t),n=e.matches[e.matches.length-1];return Oe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kA(){return Gp("useRouteId")}function PA(){var r;let t=P.useContext(Wp),e=AA("useRouteError"),n=Gp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function bA(){let{router:t}=IA("useNavigate"),e=Gp("useNavigate"),n=P.useRef(!1);return hE(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{En(n.current,cE),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Zy={};function pE(t,e,n){!e&&!Zy[t]&&(Zy[t]=!0,En(!1,n))}P.memo(NA);function NA({routes:t,future:e,state:n,unstable_onError:r}){return fE(t,void 0,n,r,e)}function qo(t){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DA({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Oe(!Ka(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=so(n));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=n,y=P.useMemo(()=>{let S=lr(u,o);return S==null?null:{location:{pathname:S,search:c,hash:h,state:f,key:p},navigationType:r}},[o,u,c,h,f,p,r]);return En(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:P.createElement(Bn.Provider,{value:a},P.createElement(Ga.Provider,{children:e,value:y}))}function OA({children:t,location:e}){return wA(vf(t),e)}function vf(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){n.push.apply(n,vf(r.props.children,s));return}Oe(r.type===qo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vf(r.props.children,s)),n.push(o)}),n}var fu="get",pu="application/x-www-form-urlencoded";function Lc(t){return t!=null&&typeof t.tagName=="string"}function LA(t){return Lc(t)&&t.tagName.toLowerCase()==="button"}function VA(t){return Lc(t)&&t.tagName.toLowerCase()==="form"}function MA(t){return Lc(t)&&t.tagName.toLowerCase()==="input"}function jA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UA(t,e){return t.button===0&&(!e||e==="_self")&&!jA(t)}var $l=null;function FA(){if($l===null)try{new FormData(document.createElement("form"),0),$l=!1}catch{$l=!0}return $l}var zA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function id(t){return t!=null&&!zA.has(t)?(En(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pu}"`),null):t}function BA(t,e){let n,r,i,s,o;if(VA(t)){let a=t.getAttribute("action");r=a?lr(a,e):null,n=t.getAttribute("method")||fu,i=id(t.getAttribute("enctype"))||pu,s=new FormData(t)}else if(LA(t)||MA(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?lr(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||fu,i=id(t.getAttribute("formenctype"))||id(a.getAttribute("enctype"))||pu,s=new FormData(a,t),!FA()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,f)}}else{if(Lc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fu,r=null,i=pu,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $A(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&lr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function HA(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WA(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function qA(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await HA(s,n);return o.links?o.links():[]}return[]}));return XA(r.flat(1).filter(WA).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ev(t,e,n,r,i,s){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var h;return n[c].pathname!==u.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):s==="data"?e.filter((u,c)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function GA(t,e,{includeHydrateFallback:n}={}){return KA(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function KA(t){return[...new Set(t)]}function YA(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function XA(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(YA(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function mE(){let t=P.useContext(oo);return Kp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function QA(){let t=P.useContext(Oc);return Kp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Yp=P.createContext(void 0);Yp.displayName="FrameworkContext";function gE(){let t=P.useContext(Yp);return Kp(t,"You must render this element inside a <HydratedRouter> element"),t}function JA(t,e){let n=P.useContext(Yp),[r,i]=P.useState(!1),[s,o]=P.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=_=>{_.forEach(v=>{o(v.isIntersecting)})},I=new IntersectionObserver(A,{threshold:.5});return p.current&&I.observe(p.current),()=>{I.disconnect()}}},[t]),P.useEffect(()=>{if(r){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[r]);let y=()=>{i(!0)},S=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:Uo(a,y),onBlur:Uo(u,S),onMouseEnter:Uo(c,y),onMouseLeave:Uo(h,S),onTouchStart:Uo(f,y)}]:[!1,p,{}]}function Uo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ZA({page:t,...e}){let{router:n}=mE(),r=P.useMemo(()=>rE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(tR,{page:t,matches:r,...e}):null}function eR(t){let{manifest:e,routeModules:n}=gE(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return qA(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function tR({page:t,matches:e,...n}){let r=ns(),{manifest:i,routeModules:s}=gE(),{basename:o}=mE(),{loaderData:a,matches:u}=QA(),c=P.useMemo(()=>ev(t,e,u,i,r,"data"),[t,e,u,i,r]),h=P.useMemo(()=>ev(t,e,u,i,r,"assets"),[t,e,u,i,r]),f=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,A=!1;if(e.forEach(_=>{var T;let v=i.routes[_.route.id];!v||!v.hasLoader||(!c.some(D=>D.route.id===_.route.id)&&_.route.id in a&&((T=s[_.route.id])!=null&&T.shouldRevalidate)||v.hasClientLoader?A=!0:S.add(_.route.id))}),S.size===0)return[];let I=$A(t,o,"data");return A&&S.size>0&&I.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[I.pathname+I.search]},[o,a,r,i,c,e,t,s]),p=P.useMemo(()=>GA(h,i),[h,i]),y=eR(h);return P.createElement(P.Fragment,null,f.map(S=>P.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),p.map(S=>P.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),y.map(({key:S,link:A})=>P.createElement("link",{key:S,nonce:n.nonce,...A})))}function nR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yE&&(window.__reactRouterVersion="7.9.6")}catch{}function rR({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=$I({window:n,v5Compat:!0}));let i=r.current,[s,o]=P.useState({action:i.action,location:i.location}),a=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(a),[i,a]),P.createElement(DA,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var vE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oa=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},y){let{basename:S}=P.useContext(Bn),A=typeof c=="string"&&vE.test(c),I,_=!1;if(typeof c=="string"&&A&&(I=c,yE))try{let x=new URL(window.location.href),R=c.startsWith("//")?new URL(x.protocol+c):new URL(c),b=lr(R.pathname,S);R.origin===x.origin&&b!=null?c=b+R.search+R.hash:_=!0}catch{En(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=yA(c,{relative:i}),[T,D,V]=JA(r,p),U=aR(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:f});function C(x){e&&e(x),x.defaultPrevented||U(x)}let E=P.createElement("a",{...p,...V,href:I||v,onClick:_||s?e:C,ref:nR(y,D),target:u,"data-discover":!A&&n==="render"?"true":void 0});return T&&!A?P.createElement(P.Fragment,null,E,P.createElement(ZA,{page:v})):E});oa.displayName="Link";var iR=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...c},h){let f=Ya(o,{relative:c.relative}),p=ns(),y=P.useContext(Oc),{navigator:S,basename:A}=P.useContext(Bn),I=y!=null&&dR(f)&&a===!0,_=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,v=p.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(v=v.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&A&&(T=lr(T,A)||T);const D=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let V=v===_||!i&&v.startsWith(_)&&v.charAt(D)==="/",U=T!=null&&(T===_||!i&&T.startsWith(_)&&T.charAt(_.length)==="/"),C={isActive:V,isPending:U,isTransitioning:I},E=V?e:void 0,x;typeof r=="function"?x=r(C):x=[r,V?"active":null,U?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(C):s;return P.createElement(oa,{...c,"aria-current":E,className:x,ref:h,style:R,to:o,viewTransition:a},typeof u=="function"?u(C):u)});iR.displayName="NavLink";var sR=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=fu,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},y)=>{let S=cR(),A=hR(a,{relative:c}),I=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&vE.test(a),v=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let D=T.nativeEvent.submitter,V=(D==null?void 0:D.getAttribute("formmethod"))||o;S(D||T.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:f})};return P.createElement("form",{ref:y,method:I,action:A,onSubmit:r?u:v,...p,"data-discover":!_&&t==="render"?"true":void 0})});sR.displayName="Form";function oR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _E(t){let e=P.useContext(oo);return Oe(e,oR(t)),e}function aR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=dE(),u=ns(),c=Ya(t,{relative:s});return P.useCallback(h=>{if(UA(h,e)){h.preventDefault();let f=n!==void 0?n:ba(u)===ba(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,c,n,r,e,t,i,s,o])}var lR=0,uR=()=>`__${String(++lR)}__`;function cR(){let{router:t}=_E("useSubmit"),{basename:e}=P.useContext(Bn),n=kA();return P.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:c}=BA(r,e);if(i.navigate===!1){let h=i.fetcherKey||uR();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function hR(t,{relative:e}={}){let{basename:n}=P.useContext(Bn),r=P.useContext($n);Oe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ya(t||".",{relative:e})},o=ns();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:nr([n,s.pathname])),ba(s)}function dR(t,{relative:e}={}){let n=P.useContext(uE);Oe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_E("useViewTransitionState"),i=Ya(t,{relative:e});if(!n.isTransitioning)return!1;let s=lr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=lr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Xu(i.pathname,o)!=null||Xu(i.pathname,s)!=null}const fR=()=>{const[t,e]=P.useState(()=>{const r=localStorage.getItem("theme");return r||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});P.useEffect(()=>{document.documentElement.dataset.theme=t,localStorage.setItem("theme",t)},[t]);const n=()=>e(r=>r==="light"?"dark":"light");return g.jsx("button",{onClick:n,className:"p-2 rounded-full bg-[var(--bg-card)] border border-[var(--border)] hover:bg-[var(--accent)] transition-colors","aria-label":"Toggle light/dark theme",children:t==="light"?"":""})},pR="modulepreload",mR=function(t){return"/econotas/"+t},tv={},_f=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=mR(u),u in tv)return;tv[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":pR,c||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),nv=t=>{const e=yR(t);return e.charAt(0).toUpperCase()+e.slice(1)},wE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),vR=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _R={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>P.createElement("svg",{ref:u,..._R,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wE("lucide",i),...!s&&!vR(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>P.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=P.forwardRef(({className:r,...i},s)=>P.createElement(wR,{ref:s,iconNode:e,className:wE(`lucide-${gR(nv(t))}`,`lucide-${t}`,r),...i}));return n.displayName=nv(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],TR=ae("arrow-left",ER);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],CR=ae("calendar",SR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xp=ae("check",xR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],AR=ae("chevron-down",IR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kR=ae("chevron-right",RR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bR=ae("circle-alert",PR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DR=ae("circle-check-big",NR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EE=ae("clock",OR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qp=ae("download",LR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],MR=ae("eraser",VR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qu=ae("file-text",jR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],FR=ae("funnel",UR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],BR=ae("info",zR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],HR=ae("layout-grid",$R);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],qR=ae("list",WR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],KR=ae("maximize-2",GR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ju=ae("message-square",YR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],rv=ae("mic",XR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],JR=ae("moon",QR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],TE=ae("palette",ZR);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],tk=ae("pause",ek);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],rk=ae("pen-tool",nk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],SE=ae("pen",ik);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mu=ae("play",sk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],CE=ae("plus",ok);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],xE=ae("rotate-ccw",ak);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],uk=ae("rotate-cw",lk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hk=ae("save",ck);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],IE=ae("search",dk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pk=ae("share-2",fk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],gk=ae("sliders-horizontal",mk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vk=ae("square",yk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],AE=ae("star",_k);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ek=ae("sun",wk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],RE=ae("trash-2",Tk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kE=ae("triangle-alert",Sk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pi=ae("x",Ck);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ik=ae("zoom-in",xk);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Rk=ae("zoom-out",Ak),kk=()=>{};var iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Pk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Pk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new bk;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nk=function(t){const e=PE(t);return bE.encodeByteArray(e,!0)},Zu=function(t){return Nk(t).replace(/\./g,"")},NE=function(t){try{return bE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=()=>Dk().__FIREBASE_DEFAULTS__,Lk=()=>{if(typeof process>"u"||typeof iv>"u")return;const t=iv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Vk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NE(t[1]);return e&&JSON.parse(e)},Vc=()=>{try{return kk()||Ok()||Lk()||Vk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DE=t=>{var e,n;return(n=(e=Vc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OE=t=>{const e=DE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LE=()=>{var t;return(t=Vc())==null?void 0:t.config},VE=t=>{var e;return(e=Vc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zu(JSON.stringify(n)),Zu(JSON.stringify(o)),""].join(".")}const aa={};function jk(){const t={prod:[],emulator:[]};for(const e of Object.keys(aa))aa[e]?t.emulator.push(e):t.prod.push(e);return t}function Uk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sv=!1;function Zp(t,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||aa[t]===e||aa[t]||sv)return;aa[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=jk().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{sv=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=Uk(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),I=document.getElementById(A)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;a(T),h(I,A);const D=c();u(v,_),T.append(v,S,I,D),document.body.appendChild(T)}s?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function zk(){var e;const t=(e=Vc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $k(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wk(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qk(){return!zk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gk(){try{return typeof indexedDB=="object"}catch{return!1}}function Kk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Yk,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Xk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hn(i,a,r)}}function Xk(t,e){return t.replace(Qk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Qk=/\{\$([^}]+)}/g;function Jk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ov(s)&&ov(o)){if(!Ki(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ov(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zk(t,e){const n=new eP(t,e);return n.subscribe.bind(n)}class eP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sd),i.error===void 0&&(i.error=sd),i.complete===void 0&&(i.complete=sd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class ni{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Mk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iP(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rP(t){return t===Ni?void 0:t}function iP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const oP={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},aP=ue.INFO,lP={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},uP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class em{constructor(e){this.name=e,this._logLevel=aP,this._logHandler=uP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const cP=(t,e)=>e.some(n=>t instanceof n);let av,lv;function hP(){return av||(av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dP(){return lv||(lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,wf=new WeakMap,UE=new WeakMap,od=new WeakMap,tm=new WeakMap;function fP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function pP(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mP(t){Ef=t(Ef)}function gP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ad(this),e,...n);return UE.set(r,e.sort?e.sort():[e]),Kr(r)}:dP().includes(t)?function(...e){return t.apply(ad(this),e),Kr(jE.get(this))}:function(...e){return Kr(t.apply(ad(this),e))}}function yP(t){return typeof t=="function"?gP(t):(t instanceof IDBTransaction&&pP(t),cP(t,hP())?new Proxy(t,Ef):t)}function Kr(t){if(t instanceof IDBRequest)return fP(t);if(od.has(t))return od.get(t);const e=yP(t);return e!==t&&(od.set(t,e),tm.set(e,t)),e}const ad=t=>tm.get(t);function vP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kr(o.result),u.oldVersion,u.newVersion,Kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const _P=["get","getKey","getAll","getAllKeys","count"],wP=["put","add","delete","clear"],ld=new Map;function uv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ld.get(e))return ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=wP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_P.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return ld.set(e,s),s}mP(t=>({...t,get:(e,n,r)=>uv(e,n)||t.get(e,n,r),has:(e,n)=>!!uv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tf="@firebase/app",cv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new em("@firebase/app"),SP="@firebase/app-compat",CP="@firebase/analytics-compat",xP="@firebase/analytics",IP="@firebase/app-check-compat",AP="@firebase/app-check",RP="@firebase/auth",kP="@firebase/auth-compat",PP="@firebase/database",bP="@firebase/data-connect",NP="@firebase/database-compat",DP="@firebase/functions",OP="@firebase/functions-compat",LP="@firebase/installations",VP="@firebase/installations-compat",MP="@firebase/messaging",jP="@firebase/messaging-compat",UP="@firebase/performance",FP="@firebase/performance-compat",zP="@firebase/remote-config",BP="@firebase/remote-config-compat",$P="@firebase/storage",HP="@firebase/storage-compat",WP="@firebase/firestore",qP="@firebase/ai",GP="@firebase/firestore-compat",KP="firebase",YP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",XP={[Tf]:"fire-core",[SP]:"fire-core-compat",[xP]:"fire-analytics",[CP]:"fire-analytics-compat",[AP]:"fire-app-check",[IP]:"fire-app-check-compat",[RP]:"fire-auth",[kP]:"fire-auth-compat",[PP]:"fire-rtdb",[bP]:"fire-data-connect",[NP]:"fire-rtdb-compat",[DP]:"fire-fn",[OP]:"fire-fn-compat",[LP]:"fire-iid",[VP]:"fire-iid-compat",[MP]:"fire-fcm",[jP]:"fire-fcm-compat",[UP]:"fire-perf",[FP]:"fire-perf-compat",[zP]:"fire-rc",[BP]:"fire-rc-compat",[$P]:"fire-gcs",[HP]:"fire-gcs-compat",[WP]:"fire-fst",[GP]:"fire-fst-compat",[qP]:"fire-vertex","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,QP=new Map,Cf=new Map;function hv(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yi(t){const e=t.name;if(Cf.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Cf.set(e,t);for(const n of ec.values())hv(n,t);for(const n of QP.values())hv(n,t);return!0}function Mc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Xa("app","Firebase",JP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=YP;function FE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Sf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=LE()),!n)throw Yr.create("no-options");const s=ec.get(i);if(s){if(Ki(n,s.options)&&Ki(r,s.config))return s;throw Yr.create("duplicate-app",{appName:i})}const o=new sP(i);for(const u of Cf.values())o.addComponent(u);const a=new ZP(n,r,o);return ec.set(i,a),a}function nm(t=Sf){const e=ec.get(t);if(!e&&t===Sf&&LE())return FE();if(!e)throw Yr.create("no-app",{appName:t});return e}function On(t,e,n){let r=XP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(o.join(" "));return}Yi(new ni(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firebase-heartbeat-database",tb=1,Na="firebase-heartbeat-store";let ud=null;function zE(){return ud||(ud=vP(eb,tb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Na)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),ud}async function nb(t){try{const n=(await zE()).transaction(Na),r=await n.objectStore(Na).get(BE(t));return await n.done,r}catch(e){if(e instanceof Hn)ur.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function dv(t,e){try{const r=(await zE()).transaction(Na,"readwrite");await r.objectStore(Na).put(e,BE(t)),await r.done}catch(n){if(n instanceof Hn)ur.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function BE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=1024,ib=30;class sb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ab(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>ib){const o=lb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fv(),{heartbeatsToSend:r,unsentEntries:i}=ob(this._heartbeatsCache.heartbeats),s=Zu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ur.warn(n),""}}}function fv(){return new Date().toISOString().substring(0,10)}function ob(t,e=rb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ab{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gk()?Kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pv(t){return Zu(JSON.stringify({version:2,heartbeats:t})).length}function lb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){Yi(new ni("platform-logger",e=>new EP(e),"PRIVATE")),Yi(new ni("heartbeat",e=>new sb(e),"PRIVATE")),On(Tf,cv,t),On(Tf,cv,"esm2020"),On("fire-js","")}ub("");var cb="firebase",hb="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(cb,hb,"app");function $E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const db=$E,HE=new Xa("auth","Firebase",$E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new em("@firebase/auth");function fb(t,...e){tc.logLevel<=ue.WARN&&tc.warn(`Auth (${rs}): ${t}`,...e)}function gu(t,...e){tc.logLevel<=ue.ERROR&&tc.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,...e){throw rm(t,...e)}function Ln(t,...e){return rm(t,...e)}function WE(t,e,n){const r={...db(),[e]:n};return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return WE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HE.create(t,...e)}function te(t,e,...n){if(!t)throw rm(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gu(e),new Error(e)}function hr(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pb(){return mv()==="http:"||mv()==="https:"}function mv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pb()||$k()||"connection"in navigator)?navigator.onLine:!0}function gb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=Fk()||Hk()}get(){return mb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e){hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_b=new Ja(3e4,6e4);function jc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ao(t,e,n,r,i={}){return GE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Qa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return Bk()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&mi(t.emulatorConfig.host)&&(c.credentials="include"),qE.fetch()(await YE(t,t.config.apiHost,n,a),c)})}async function GE(t,e,n){t._canInitEmulator=!1;const r={...yb,...e};try{const i=new wb(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Hl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WE(t,h,c);cr(t,h)}}catch(i){if(i instanceof Hn)throw i;cr(t,"network-request-failed",{message:String(i)})}}async function KE(t,e,n,r,i={}){const s=await ao(t,e,n,r,i);return"mfaPendingCredential"in s&&cr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function YE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?im(t.config,i):`${t.config.apiScheme}://${i}`;return vb.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class wb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ln(this.auth,"network-request-failed")),_b.get())})}}function Hl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ln(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e){return ao(t,"POST","/v1/accounts:delete",e)}async function nc(t,e){return ao(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tb(t,e=!1){const n=We(t),r=await n.getIdToken(e),i=sm(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:la(cd(i.auth_time)),issuedAtTime:la(cd(i.iat)),expirationTime:la(cd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cd(t){return Number(t)*1e3}function sm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gu("JWT malformed, contained fewer than 3 sections"),null;try{const i=NE(n);return i?JSON.parse(i):(gu("Failed to decode base64 JWT payload"),null)}catch(i){return gu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gv(t){const e=sm(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&Sb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Sb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Da(t,nc(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?XE(i.providerUserInfo):[],o=Ib(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new If(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function xb(t){const e=We(t);await rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ib(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(t,e){const n=await GE(t,{},async()=>{const r=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await YE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&mi(t.emulatorConfig.host)&&(u.credentials="include"),qE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Rb(t,e){return ao(t,"POST","/v2/accounts:revokeToken",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=gv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Ab(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Us;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Cb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new If(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Da(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tb(this,e)}reload(){return xb(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Da(this,Eb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:S,stsTokenManager:A}=n;te(f&&A,e,"internal-error");const I=Us.fromJSON(this.name,A);te(typeof f=="string",e,"internal-error"),Ar(r,e.name),Ar(i,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof y=="boolean",e,"internal-error"),Ar(s,e.name),Ar(o,e.name),Ar(a,e.name),Ar(u,e.name),Ar(c,e.name),Ar(h,e.name);const _=new yn({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:I,createdAt:c,lastLoginAt:h});return S&&Array.isArray(S)&&(_.providerData=S.map(v=>({...v}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Us;i.updateFromServerResponse(n);const s=new yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Us;a.updateFromIdToken(r);const u=new yn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new If(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new Map;function er(t){hr(t instanceof Function,"Expected a class definition");let e=yv.get(t);return e?(hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QE.type="NONE";const vv=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yu(this.userKey,i.apiKey,s),this.fullPersistenceKey=yu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nc(this.auth,{idToken:e}).catch(()=>{});return n?yn._fromGetAccountInfoResponse(this.auth,n,e):null}return yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fs(er(vv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||er(vv);const o=yu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await nc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await yn._fromGetAccountInfoResponse(e,p,h)}else f=yn._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fs(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Fs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r1(e))return"Blackberry";if(i1(e))return"Webos";if(ZE(e))return"Safari";if((e.includes("chrome/")||e1(e))&&!e.includes("edge/"))return"Chrome";if(n1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function JE(t=xt()){return/firefox\//i.test(t)}function ZE(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e1(t=xt()){return/crios\//i.test(t)}function t1(t=xt()){return/iemobile/i.test(t)}function n1(t=xt()){return/android/i.test(t)}function r1(t=xt()){return/blackberry/i.test(t)}function i1(t=xt()){return/webos/i.test(t)}function om(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kb(t=xt()){var e;return om(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Pb(){return Wk()&&document.documentMode===10}function s1(t=xt()){return om(t)||n1(t)||i1(t)||r1(t)||/windows phone/i.test(t)||t1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e=[]){let n;switch(t){case"Browser":n=_v(xt());break;case"Worker":n=`${_v(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(t,e={}){return ao(t,"GET","/v2/passwordPolicy",jc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=6;class Ob{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Db,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new bb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nc(this,{idToken:e}),r=await yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Xr(this));const n=e?We(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nb(this),n=new Ob(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Rb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&er(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&fb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uc(t){return We(t)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zk(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vb(t){am=t}function Mb(t){return am.loadJS(t)}function jb(){return am.gapiScript}function Ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e){const n=Mc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ki(s,e??{}))return i;cr(i,"already-initialized")}return n.initialize({options:e})}function zb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Bb(t,e,n){const r=Uc(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=a1(e),{host:o,port:a}=$b(e),u=a===null?"":`:${a}`,c={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ki(c,r.config.emulator)&&Ki(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(o)?(Jp(`${s}//${o}${u}`),Zp("Auth",!0)):Hb()}function a1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $b(t){const e=a1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ev(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ev(o)}}}function Ev(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Hb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e){return KE(t,"POST","/v1/accounts:signInWithIdp",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="http://localhost";class Xi extends l1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Xi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zs(e,n)}buildRequest(){const e={requestUri:Wb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends u1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Za{constructor(){super("facebook.com")}static credential(e){return Xi._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xi._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Za{constructor(){super("github.com")}static credential(e){return Xi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Za{constructor(){super("twitter.com")}static credential(e,n){return Xi._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(t,e){return KE(t,"POST","/v1/accounts:signUp",jc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await yn._fromIdTokenResponse(e,r,i),o=Tv(r);return new ri({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Tv(r);return new ri({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(t){var i;if(en(t.app))return Promise.reject(Xr(t));const e=Uc(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new ri({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await qb(e,{returnSecureToken:!0}),r=await ri._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends Hn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ic(e,n,r,i)}}function c1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(t,s,e,r):s})}async function Kb(t,e,n=!1){const r=await Da(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ri._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t,e,n=!1){const{auth:r}=t;if(en(r.app))return Promise.reject(Xr(r));const i="reauthenticate";try{const s=await Da(t,c1(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=sm(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),ri._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&cr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t,e,n=!1){if(en(t.app))return Promise.reject(Xr(t));const r="signIn",i=await c1(t,r,e),s=await ri._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Qb(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function Jb(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function Zb(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}const sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=1e3,t2=10;class d1 extends h1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=s1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Pb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,t2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},e2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}d1.type="LOCAL";const n2=d1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1 extends h1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f1.type="SESSION";const p1=f1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Fc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await r2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=lm("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function s2(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function o2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function l2(){return m1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firebaseLocalStorageDb",u2=1,oc="firebaseLocalStorage",y1="fbase_key";class el{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zc(t,e){return t.transaction([oc],e?"readwrite":"readonly").objectStore(oc)}function c2(){const t=indexedDB.deleteDatabase(g1);return new el(t).toPromise()}function Af(){const t=indexedDB.open(g1,u2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(oc,{keyPath:y1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(oc)?e(r):(r.close(),await c2(),e(await Af()))})})}async function Sv(t,e,n){const r=zc(t,!0).put({[y1]:e,value:n});return new el(r).toPromise()}async function h2(t,e){const n=zc(t,!1).get(e),r=await new el(n).toPromise();return r===void 0?null:r.value}function Cv(t,e){const n=zc(t,!0).delete(e);return new el(n).toPromise()}const d2=800,f2=3;class v1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>f2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(l2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await o2(),!this.activeServiceWorker)return;this.sender=new i2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await Sv(e,sc,"1"),await Cv(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zc(i,!1).getAll();return new el(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v1.type="LOCAL";const p2=v1;new Ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){return e?er(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends l1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g2(t){return Xb(t.auth,new um(t),t.bypassAuthState)}function y2(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Yb(n,new um(t),t.bypassAuthState)}async function v2(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),Kb(n,new um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g2;case"linkViaPopup":case"linkViaRedirect":return v2;case"reauthViaPopup":case"reauthViaRedirect":return y2;default:cr(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Ja(2e3,1e4);class Ns extends _1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_2.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="pendingRedirect",vu=new Map;class E2 extends _1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vu.get(this.auth._key());if(!e){try{const r=await T2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vu.set(this.auth._key(),e)}return this.bypassAuthState||vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T2(t,e){const n=x2(e),r=C2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function S2(t,e){vu.set(t._key(),e)}function C2(t){return er(t._redirectPersistence)}function x2(t){return yu(w2,t.config.apiKey,t.name)}async function I2(t,e,n=!1){if(en(t.app))return Promise.reject(Xr(t));const r=Uc(t),i=m2(r,e),o=await new E2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=10*60*1e3;class R2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!w1(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ln(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(xv(e))}saveEventToCache(e){this.cachedEventUids.add(xv(e)),this.lastProcessedEventTime=Date.now()}}function xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e={}){return ao(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N2=/^https?/;async function D2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P2(t);for(const n of e)try{if(O2(n))return}catch{}cr(t,"unauthorized-domain")}function O2(t){const e=xf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!N2.test(n))return!1;if(b2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=new Ja(3e4,6e4);function Iv(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V2(t){return new Promise((e,n)=>{var i,s,o;function r(){Iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iv(),n(Ln(t,"network-request-failed"))},timeout:L2.get()})}if((s=(i=Vn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Vn().gapi)!=null&&o.load)r();else{const a=Ub("iframefcb");return Vn()[a]=()=>{gapi.load?r():n(Ln(t,"network-request-failed"))},Mb(`${jb()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw _u=null,e})}let _u=null;function M2(t){return _u=_u||V2(t),_u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new Ja(5e3,15e3),U2="__/auth/iframe",F2="emulator/auth/iframe",z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $2(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?im(e,F2):`https://${t.config.authDomain}/${U2}`,r={apiKey:e.apiKey,appName:t.name,v:rs},i=B2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qa(r).slice(1)}`}async function H2(t){const e=await M2(t),n=Vn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:$2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ln(t,"network-request-failed"),a=Vn().setTimeout(()=>{s(o)},j2.get());function u(){Vn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q2=500,G2=600,K2="_blank",Y2="http://localhost";class Av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X2(t,e,n,r=q2,i=G2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...W2,width:r.toString(),height:i.toString(),top:s,left:o},c=xt().toLowerCase();n&&(a=e1(c)?K2:n),JE(c)&&(e=e||Y2,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,S])=>`${p}${y}=${S},`,"");if(kb(c)&&a!=="_self")return Q2(e||"",a),new Av(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new Av(f)}function Q2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="__/auth/handler",Z2="emulator/auth/handler",eN=encodeURIComponent("fac");async function Rv(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rs,eventId:i};if(e instanceof u1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Jk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Za){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${eN}=${encodeURIComponent(u)}`:"";return`${tN(t)}?${Qa(a).slice(1)}${c}`}function tN({config:t}){return t.emulator?im(t,Z2):`https://${t.authDomain}/${J2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="webStorageSupport";class nN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p1,this._completeRedirectFn=I2,this._overrideRedirectResult=S2}async _openPopup(e,n,r,i){var o;hr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Rv(e,n,r,xf(),i);return X2(e,s,lm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Rv(e,n,r,xf(),i);return s2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H2(e),r=new R2(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hd,{type:hd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[hd];s!==void 0&&n(!!s),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return s1()||ZE()||om()}}const rN=nN;var kv="@firebase/auth",Pv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oN(t){Yi(new ni("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o1(t)},c=new Lb(r,i,s,u);return zb(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yi(new ni("auth-internal",e=>{const n=Uc(e.getProvider("auth").getImmediate());return(r=>new iN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(kv,Pv,sN(t)),On(kv,Pv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=5*60,lN=VE("authIdTokenMaxAge")||aN;let bv=null;const uN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lN)return;const i=n==null?void 0:n.token;bv!==i&&(bv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function cN(t=nm()){const e=Mc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Fb(t,{popupRedirectResolver:rN,persistence:[p2,n2,p1]}),r=VE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=uN(s.toString());Jb(n,o,()=>o(n.currentUser)),Qb(n,a=>o(a))}}const i=DE("auth");return i&&Bb(n,`http://${i}`),n}function hN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Vb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ln("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oN("Browser");var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,E1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function x(){}x.prototype=E.prototype,C.F=E.prototype,C.prototype=new x,C.prototype.constructor=C,C.D=function(R,b,N){for(var k=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)k[ye-2]=arguments[ye];return E.prototype[b].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,E,x){x||(x=0);const R=Array(16);if(typeof E=="string")for(var b=0;b<16;++b)R[b]=E.charCodeAt(x++)|E.charCodeAt(x++)<<8|E.charCodeAt(x++)<<16|E.charCodeAt(x++)<<24;else for(b=0;b<16;++b)R[b]=E[x++]|E[x++]<<8|E[x++]<<16|E[x++]<<24;E=C.g[0],x=C.g[1],b=C.g[2];let N=C.g[3],k;k=E+(N^x&(b^N))+R[0]+3614090360&4294967295,E=x+(k<<7&4294967295|k>>>25),k=N+(b^E&(x^b))+R[1]+3905402710&4294967295,N=E+(k<<12&4294967295|k>>>20),k=b+(x^N&(E^x))+R[2]+606105819&4294967295,b=N+(k<<17&4294967295|k>>>15),k=x+(E^b&(N^E))+R[3]+3250441966&4294967295,x=b+(k<<22&4294967295|k>>>10),k=E+(N^x&(b^N))+R[4]+4118548399&4294967295,E=x+(k<<7&4294967295|k>>>25),k=N+(b^E&(x^b))+R[5]+1200080426&4294967295,N=E+(k<<12&4294967295|k>>>20),k=b+(x^N&(E^x))+R[6]+2821735955&4294967295,b=N+(k<<17&4294967295|k>>>15),k=x+(E^b&(N^E))+R[7]+4249261313&4294967295,x=b+(k<<22&4294967295|k>>>10),k=E+(N^x&(b^N))+R[8]+1770035416&4294967295,E=x+(k<<7&4294967295|k>>>25),k=N+(b^E&(x^b))+R[9]+2336552879&4294967295,N=E+(k<<12&4294967295|k>>>20),k=b+(x^N&(E^x))+R[10]+4294925233&4294967295,b=N+(k<<17&4294967295|k>>>15),k=x+(E^b&(N^E))+R[11]+2304563134&4294967295,x=b+(k<<22&4294967295|k>>>10),k=E+(N^x&(b^N))+R[12]+1804603682&4294967295,E=x+(k<<7&4294967295|k>>>25),k=N+(b^E&(x^b))+R[13]+4254626195&4294967295,N=E+(k<<12&4294967295|k>>>20),k=b+(x^N&(E^x))+R[14]+2792965006&4294967295,b=N+(k<<17&4294967295|k>>>15),k=x+(E^b&(N^E))+R[15]+1236535329&4294967295,x=b+(k<<22&4294967295|k>>>10),k=E+(b^N&(x^b))+R[1]+4129170786&4294967295,E=x+(k<<5&4294967295|k>>>27),k=N+(x^b&(E^x))+R[6]+3225465664&4294967295,N=E+(k<<9&4294967295|k>>>23),k=b+(E^x&(N^E))+R[11]+643717713&4294967295,b=N+(k<<14&4294967295|k>>>18),k=x+(N^E&(b^N))+R[0]+3921069994&4294967295,x=b+(k<<20&4294967295|k>>>12),k=E+(b^N&(x^b))+R[5]+3593408605&4294967295,E=x+(k<<5&4294967295|k>>>27),k=N+(x^b&(E^x))+R[10]+38016083&4294967295,N=E+(k<<9&4294967295|k>>>23),k=b+(E^x&(N^E))+R[15]+3634488961&4294967295,b=N+(k<<14&4294967295|k>>>18),k=x+(N^E&(b^N))+R[4]+3889429448&4294967295,x=b+(k<<20&4294967295|k>>>12),k=E+(b^N&(x^b))+R[9]+568446438&4294967295,E=x+(k<<5&4294967295|k>>>27),k=N+(x^b&(E^x))+R[14]+3275163606&4294967295,N=E+(k<<9&4294967295|k>>>23),k=b+(E^x&(N^E))+R[3]+4107603335&4294967295,b=N+(k<<14&4294967295|k>>>18),k=x+(N^E&(b^N))+R[8]+1163531501&4294967295,x=b+(k<<20&4294967295|k>>>12),k=E+(b^N&(x^b))+R[13]+2850285829&4294967295,E=x+(k<<5&4294967295|k>>>27),k=N+(x^b&(E^x))+R[2]+4243563512&4294967295,N=E+(k<<9&4294967295|k>>>23),k=b+(E^x&(N^E))+R[7]+1735328473&4294967295,b=N+(k<<14&4294967295|k>>>18),k=x+(N^E&(b^N))+R[12]+2368359562&4294967295,x=b+(k<<20&4294967295|k>>>12),k=E+(x^b^N)+R[5]+4294588738&4294967295,E=x+(k<<4&4294967295|k>>>28),k=N+(E^x^b)+R[8]+2272392833&4294967295,N=E+(k<<11&4294967295|k>>>21),k=b+(N^E^x)+R[11]+1839030562&4294967295,b=N+(k<<16&4294967295|k>>>16),k=x+(b^N^E)+R[14]+4259657740&4294967295,x=b+(k<<23&4294967295|k>>>9),k=E+(x^b^N)+R[1]+2763975236&4294967295,E=x+(k<<4&4294967295|k>>>28),k=N+(E^x^b)+R[4]+1272893353&4294967295,N=E+(k<<11&4294967295|k>>>21),k=b+(N^E^x)+R[7]+4139469664&4294967295,b=N+(k<<16&4294967295|k>>>16),k=x+(b^N^E)+R[10]+3200236656&4294967295,x=b+(k<<23&4294967295|k>>>9),k=E+(x^b^N)+R[13]+681279174&4294967295,E=x+(k<<4&4294967295|k>>>28),k=N+(E^x^b)+R[0]+3936430074&4294967295,N=E+(k<<11&4294967295|k>>>21),k=b+(N^E^x)+R[3]+3572445317&4294967295,b=N+(k<<16&4294967295|k>>>16),k=x+(b^N^E)+R[6]+76029189&4294967295,x=b+(k<<23&4294967295|k>>>9),k=E+(x^b^N)+R[9]+3654602809&4294967295,E=x+(k<<4&4294967295|k>>>28),k=N+(E^x^b)+R[12]+3873151461&4294967295,N=E+(k<<11&4294967295|k>>>21),k=b+(N^E^x)+R[15]+530742520&4294967295,b=N+(k<<16&4294967295|k>>>16),k=x+(b^N^E)+R[2]+3299628645&4294967295,x=b+(k<<23&4294967295|k>>>9),k=E+(b^(x|~N))+R[0]+4096336452&4294967295,E=x+(k<<6&4294967295|k>>>26),k=N+(x^(E|~b))+R[7]+1126891415&4294967295,N=E+(k<<10&4294967295|k>>>22),k=b+(E^(N|~x))+R[14]+2878612391&4294967295,b=N+(k<<15&4294967295|k>>>17),k=x+(N^(b|~E))+R[5]+4237533241&4294967295,x=b+(k<<21&4294967295|k>>>11),k=E+(b^(x|~N))+R[12]+1700485571&4294967295,E=x+(k<<6&4294967295|k>>>26),k=N+(x^(E|~b))+R[3]+2399980690&4294967295,N=E+(k<<10&4294967295|k>>>22),k=b+(E^(N|~x))+R[10]+4293915773&4294967295,b=N+(k<<15&4294967295|k>>>17),k=x+(N^(b|~E))+R[1]+2240044497&4294967295,x=b+(k<<21&4294967295|k>>>11),k=E+(b^(x|~N))+R[8]+1873313359&4294967295,E=x+(k<<6&4294967295|k>>>26),k=N+(x^(E|~b))+R[15]+4264355552&4294967295,N=E+(k<<10&4294967295|k>>>22),k=b+(E^(N|~x))+R[6]+2734768916&4294967295,b=N+(k<<15&4294967295|k>>>17),k=x+(N^(b|~E))+R[13]+1309151649&4294967295,x=b+(k<<21&4294967295|k>>>11),k=E+(b^(x|~N))+R[4]+4149444226&4294967295,E=x+(k<<6&4294967295|k>>>26),k=N+(x^(E|~b))+R[11]+3174756917&4294967295,N=E+(k<<10&4294967295|k>>>22),k=b+(E^(N|~x))+R[2]+718787259&4294967295,b=N+(k<<15&4294967295|k>>>17),k=x+(N^(b|~E))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.v=function(C,E){E===void 0&&(E=C.length);const x=E-this.blockSize,R=this.C;let b=this.h,N=0;for(;N<E;){if(b==0)for(;N<=x;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<E;)if(R[b++]=C.charCodeAt(N++),b==this.blockSize){i(this,R),b=0;break}}else for(;N<E;)if(R[b++]=C[N++],b==this.blockSize){i(this,R),b=0;break}}this.h=b,this.o+=E},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;E=this.o*8;for(var x=C.length-8;x<C.length;++x)C[x]=E&255,E/=256;for(this.v(C),C=Array(16),E=0,x=0;x<4;++x)for(let R=0;R<32;R+=8)C[E++]=this.g[x]>>>R&255;return C};function s(C,E){var x=a;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=E(C)}function o(C,E){this.h=E;const x=[];let R=!0;for(let b=C.length-1;b>=0;b--){const N=C[b]|0;R&&N==E||(x[b]=N,R=!1)}this.g=x}var a={};function u(C){return-128<=C&&C<128?s(C,function(E){return new o([E|0],E<0?-1:0)}):new o([C|0],C<0?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(C<0)return I(c(-C));const E=[];let x=1;for(let R=0;C>=x;R++)E[R]=C/x|0,x*=4294967296;return new o(E,0)}function h(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return I(h(C.substring(1),E));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=c(Math.pow(E,8));let R=f;for(let N=0;N<C.length;N+=8){var b=Math.min(8,C.length-N);const k=parseInt(C.substring(N,N+b),E);b<8?(b=c(Math.pow(E,b)),R=R.j(b).add(c(k))):(R=R.j(x),R=R.add(c(k)))}return R}var f=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-I(this).m();let C=0,E=1;for(let x=0;x<this.g.length;x++){const R=this.i(x);C+=(R>=0?R:4294967296+R)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(A(this))return"-"+I(this).toString(C);const E=c(Math.pow(C,6));var x=this;let R="";for(;;){const b=D(x,E).g;x=_(x,b.j(E));let N=((x.g.length>0?x.g[0]:x.h)>>>0).toString(C);if(x=b,S(x))return N+R;for(;N.length<6;)N="0"+N;R=N+R}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(let E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function A(C){return C.h==-1}t.l=function(C){return C=_(this,C),A(C)?-1:S(C)?0:1};function I(C){const E=C.g.length,x=[];for(let R=0;R<E;R++)x[R]=~C.g[R];return new o(x,~C.h).add(p)}t.abs=function(){return A(this)?I(this):this},t.add=function(C){const E=Math.max(this.g.length,C.g.length),x=[];let R=0;for(let b=0;b<=E;b++){let N=R+(this.i(b)&65535)+(C.i(b)&65535),k=(N>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);R=k>>>16,N&=65535,k&=65535,x[b]=k<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function _(C,E){return C.add(I(E))}t.j=function(C){if(S(this)||S(C))return f;if(A(this))return A(C)?I(this).j(I(C)):I(I(this).j(C));if(A(C))return I(this.j(I(C)));if(this.l(y)<0&&C.l(y)<0)return c(this.m()*C.m());const E=this.g.length+C.g.length,x=[];for(var R=0;R<2*E;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(let b=0;b<C.g.length;b++){const N=this.i(R)>>>16,k=this.i(R)&65535,ye=C.i(b)>>>16,B=C.i(b)&65535;x[2*R+2*b]+=k*B,v(x,2*R+2*b),x[2*R+2*b+1]+=N*B,v(x,2*R+2*b+1),x[2*R+2*b+1]+=k*ye,v(x,2*R+2*b+1),x[2*R+2*b+2]+=N*ye,v(x,2*R+2*b+2)}for(C=0;C<E;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=E;C<2*E;C++)x[C]=0;return new o(x,0)};function v(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function T(C,E){this.g=C,this.h=E}function D(C,E){if(S(E))throw Error("division by zero");if(S(C))return new T(f,f);if(A(C))return E=D(I(C),E),new T(I(E.g),I(E.h));if(A(E))return E=D(C,I(E)),new T(I(E.g),E.h);if(C.g.length>30){if(A(C)||A(E))throw Error("slowDivide_ only works with positive integers.");for(var x=p,R=E;R.l(C)<=0;)x=V(x),R=V(R);var b=U(x,1),N=U(R,1);for(R=U(R,2),x=U(x,2);!S(R);){var k=N.add(R);k.l(C)<=0&&(b=b.add(x),N=k),R=U(R,1),x=U(x,1)}return E=_(C,b.j(E)),new T(b,E)}for(b=f;C.l(E)>=0;){for(x=Math.max(1,Math.floor(C.m()/E.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),N=c(x),k=N.j(E);A(k)||k.l(C)>0;)x-=R,N=c(x),k=N.j(E);S(N)&&(N=p),b=b.add(N),C=_(C,k)}return new T(b,C)}t.B=function(C){return D(this,C).h},t.and=function(C){const E=Math.max(this.g.length,C.g.length),x=[];for(let R=0;R<E;R++)x[R]=this.i(R)&C.i(R);return new o(x,this.h&C.h)},t.or=function(C){const E=Math.max(this.g.length,C.g.length),x=[];for(let R=0;R<E;R++)x[R]=this.i(R)|C.i(R);return new o(x,this.h|C.h)},t.xor=function(C){const E=Math.max(this.g.length,C.g.length),x=[];for(let R=0;R<E;R++)x[R]=this.i(R)^C.i(R);return new o(x,this.h^C.h)};function V(C){const E=C.g.length+1,x=[];for(let R=0;R<E;R++)x[R]=C.i(R)<<1|C.i(R-1)>>>31;return new o(x,C.h)}function U(C,E){const x=E>>5;E%=32;const R=C.g.length-x,b=[];for(let N=0;N<R;N++)b[N]=E>0?C.i(N+x)>>>E|C.i(N+x+1)<<32-E:C.i(N+x);return new o(b,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,E1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Qr=o}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,Go,S1,wu,Rf,C1,x1,I1;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var m=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var O=l[w];if(!(O in m))break e;m=m[O]}l=l[l.length-1],w=m[l],d=d(w),d!=w&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(d){var m=[],w;for(w in d)Object.prototype.hasOwnProperty.call(d,w)&&m.push([w,d[w]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function u(l,d,m){return l.call.apply(l.bind,arguments)}function c(l,d,m){return c=u,c.apply(null,arguments)}function h(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function f(l,d){function m(){}m.prototype=d.prototype,l.Z=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(w,O,L){for(var W=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)W[oe-2]=arguments[oe];return d.prototype[O].apply(w,W)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function y(l){const d=l.length;if(d>0){const m=Array(d);for(let w=0;w<d;w++)m[w]=l[w];return m}return[]}function S(l,d){for(let w=1;w<arguments.length;w++){const O=arguments[w];var m=typeof O;if(m=m!="object"?m:O?Array.isArray(O)?"array":m:"null",m=="array"||m=="object"&&typeof O.length=="number"){m=l.length||0;const L=O.length||0;l.length=m+L;for(let W=0;W<L;W++)l[m+W]=O[W]}else l.push(O)}}class A{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function I(l){o.setTimeout(()=>{throw l},0)}function _(){var l=C;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class v{constructor(){this.h=this.g=null}add(d,m){const w=T.get();w.set(d,m),this.h?this.h.next=w:this.g=w,this.h=w}}var T=new A(()=>new D,l=>l.reset());class D{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let V,U=!1,C=new v,E=()=>{const l=Promise.resolve(void 0);V=()=>{l.then(x)}};function x(){for(var l;l=_();){try{l.h.call(l.g)}catch(m){I(m)}var d=T;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}U=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,d),o.removeEventListener("test",m,d)}catch{}return l}();function k(l){return/^[\s\xa0]*$/.test(l)}function ye(l,d){b.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}f(ye,b),ye.prototype.init=function(l,d){const m=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),H=0;function Z(l,d,m,w,O){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!w,this.ha=O,this.key=++H,this.da=this.fa=!1}function z(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Q(l,d,m){for(const w in l)d.call(m,l[w],w,l)}function G(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function ie(l){const d={};for(const m in l)d[m]=l[m];return d}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(l,d){let m,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(m in w)l[m]=w[m];for(let L=0;L<me.length;L++)m=me[L],Object.prototype.hasOwnProperty.call(w,m)&&(l[m]=w[m])}}function Se(l){this.src=l,this.g={},this.h=0}Se.prototype.add=function(l,d,m,w,O){const L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);const W=yt(l,d,w,O);return W>-1?(d=l[W],m||(d.fa=!1)):(d=new Z(d,this.src,L,!!w,O),d.fa=m,l.push(d)),d};function gt(l,d){const m=d.type;if(m in l.g){var w=l.g[m],O=Array.prototype.indexOf.call(w,d,void 0),L;(L=O>=0)&&Array.prototype.splice.call(w,O,1),L&&(z(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function yt(l,d,m,w){for(let O=0;O<l.length;++O){const L=l[O];if(!L.da&&L.listener==d&&L.capture==!!m&&L.ha==w)return O}return-1}var It="closure_lm_"+(Math.random()*1e6|0),gr={};function cn(l,d,m,w,O){if(Array.isArray(d)){for(let L=0;L<d.length;L++)cn(l,d[L],m,w,O);return null}return m=yo(m),l&&l[B]?l.J(d,m,a(w)?!!w.capture:!1,O):os(l,d,m,!1,w,O)}function os(l,d,m,w,O,L){if(!d)throw Error("Invalid event type");const W=a(O)?!!O.capture:!!O;let oe=mo(l);if(oe||(l[It]=oe=new Se(l)),m=oe.add(d,m,w,W,L),m.proxy)return m;if(w=yr(),m.proxy=w,w.src=l,w.listener=m,l.addEventListener)N||(O=W),O===void 0&&(O=!1),l.addEventListener(d.toString(),w,O);else if(l.attachEvent)l.attachEvent(cl(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function yr(){function l(m){return d.call(l.src,l.listener,m)}const d=ph;return l}function as(l,d,m,w,O){if(Array.isArray(d))for(var L=0;L<d.length;L++)as(l,d[L],m,w,O);else w=a(w)?!!w.capture:!!w,m=yo(m),l&&l[B]?(l=l.i,L=String(d).toString(),L in l.g&&(d=l.g[L],m=yt(d,m,w,O),m>-1&&(z(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete l.g[L],l.h--)))):l&&(l=mo(l))&&(d=l.g[d.toString()],l=-1,d&&(l=yt(d,m,w,O)),(m=l>-1?d[l]:null)&&Ft(m))}function Ft(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[B])gt(d.i,l);else{var m=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(m,w,l.capture):d.detachEvent?d.detachEvent(cl(m),w):d.addListener&&d.removeListener&&d.removeListener(w),(m=mo(d))?(gt(m,l),m.h==0&&(m.src=null,d[It]=null)):z(l)}}}function cl(l){return l in gr?gr[l]:gr[l]="on"+l}function ph(l,d){if(l.da)l=!0;else{d=new ye(d,this);const m=l.listener,w=l.ha||l.src;l.fa&&Ft(l),l=m.call(w,d)}return l}function mo(l){return l=l[It],l instanceof Se?l:null}var go="__closure_events_fn_"+(Math.random()*1e9>>>0);function yo(l){return typeof l=="function"?l:(l[go]||(l[go]=function(d){return l.handleEvent(d)}),l[go])}function et(){R.call(this),this.i=new Se(this),this.M=this,this.G=null}f(et,R),et.prototype[B]=!0,et.prototype.removeEventListener=function(l,d,m,w){as(this,l,d,m,w)};function tt(l,d){var m,w=l.G;if(w)for(m=[];w;w=w.G)m.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new b(d,l);else if(d instanceof b)d.target=d.target||l;else{var O=d;d=new b(w,l),at(d,O)}O=!0;let L,W;if(m)for(W=m.length-1;W>=0;W--)L=d.g=m[W],O=ls(L,w,!0,d)&&O;if(L=d.g=l,O=ls(L,w,!0,d)&&O,O=ls(L,w,!1,d)&&O,m)for(W=0;W<m.length;W++)L=d.g=m[W],O=ls(L,w,!1,d)&&O}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var l=this.i;for(const d in l.g){const m=l.g[d];for(let w=0;w<m.length;w++)z(m[w]);delete l.g[d],l.h--}}this.G=null},et.prototype.J=function(l,d,m,w){return this.i.add(String(l),d,!1,m,w)},et.prototype.K=function(l,d,m,w){return this.i.add(String(l),d,!0,m,w)};function ls(l,d,m,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let O=!0;for(let L=0;L<d.length;++L){const W=d[L];if(W&&!W.da&&W.capture==m){const oe=W.listener,Xe=W.ha||W.src;W.fa&&gt(l.i,W),O=oe.call(Xe,w)!==!1&&O}}return O&&!w.defaultPrevented}function mh(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(l,d||0)}function us(l){l.g=mh(()=>{l.g=null,l.i&&(l.i=!1,us(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class wi extends R{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:us(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(l){R.call(this),this.h=l,this.g={}}f(vr,R);var vo=[];function hl(l){Q(l.g,function(d,m){this.g.hasOwnProperty(m)&&Ft(d)},l),l.g={}}vr.prototype.N=function(){vr.Z.N.call(this),hl(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=o.JSON.stringify,Wn=o.JSON.parse,_o=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Be(){}function _r(){}var qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hn(){b.call(this,"d")}f(hn,b);function Ei(){b.call(this,"c")}f(Ei,b);var Gn={},wo=null;function Ti(){return wo=wo||new et}Gn.Ia="serverreachability";function dl(l){b.call(this,Gn.Ia,l)}f(dl,b);function Si(l){const d=Ti();tt(d,new dl(d))}Gn.STAT_EVENT="statevent";function fl(l,d){b.call(this,Gn.STAT_EVENT,l),this.stat=d}f(fl,b);function nt(l){const d=Ti();tt(d,new fl(d,l))}Gn.Ja="timingevent";function cs(l,d){b.call(this,Gn.Ja,l),this.size=d}f(cs,b);function Qt(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},d)}function Ci(){this.g=!0}Ci.prototype.ua=function(){this.g=!1};function gh(l,d,m,w,O,L){l.info(function(){if(l.g)if(L){var W="",oe=L.split("&");for(let _e=0;_e<oe.length;_e++){var Xe=oe[_e].split("=");if(Xe.length>1){const rt=Xe[0];Xe=Xe[1];const xn=rt.split("_");W=xn.length>=2&&xn[1]=="type"?W+(rt+"="+Xe+"&"):W+(rt+"=redacted&")}}}else W=null;else W=L;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+d+`
`+m+`
`+W})}function yh(l,d,m,w,O,L,W){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+d+`
`+m+`
`+L+" "+W})}function wr(l,d,m,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+pl(l,m)+(w?" "+w:"")})}function vh(l,d){l.info(function(){return"TIMEOUT: "+d})}Ci.prototype.info=function(){};function pl(l,d){if(!l.g)return d;if(!d)return null;try{const L=JSON.parse(d);if(L){for(l=0;l<L.length;l++)if(Array.isArray(L[l])){var m=L[l];if(!(m.length<2)){var w=m[1];if(Array.isArray(w)&&!(w.length<1)){var O=w[0];if(O!="noop"&&O!="stop"&&O!="close")for(let W=1;W<w.length;W++)w[W]=""}}}}return lt(L)}catch{return d}}var hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gl;function ds(){}f(ds,Be),ds.prototype.g=function(){return new XMLHttpRequest},gl=new ds;function $(l){return encodeURIComponent(String(l))}function K(l){var d=1;l=l.split(":");const m=[];for(;d>0&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function se(l,d,m,w){this.j=l,this.i=d,this.l=m,this.S=w||1,this.V=new vr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var Re={},be={};function xi(l,d,m){l.M=1,l.A=vl(Cn(d)),l.u=m,l.R=!0,Kn(l,null)}function Kn(l,d){l.F=Date.now(),yl(l),l.B=Cn(l.A);var m=l.B,w=l.S;Array.isArray(w)||(w=[String(w)]),vg(m.i,"t",w),l.C=0,m=l.j.L,l.h=new de,l.g=Vg(l.j,m?d:null,!l.u),l.P>0&&(l.O=new wi(c(l.Y,l,l.g),l.P)),d=l.V,m=l.g,w=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(vo[0]=O.toString()),O=vo);for(let L=0;L<O.length;L++){const W=cn(m,O[L],w||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=l.J?ie(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Si(),gh(l.i,l.v,l.B,l.l,l.S,l.u)}se.prototype.ba=function(l){l=l.target;const d=this.O;d&&Sr(l)==3?d.j():this.Y(l)},se.prototype.Y=function(l){try{if(l==this.g)e:{const oe=Sr(this.g),Xe=this.g.ya(),_e=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||xg(this.g)))){this.K||oe!=4||Xe==7||(Xe==8||_e<=0?Si(3):Si(2)),wh(this);var d=this.g.ca();this.X=d;var m=_h(this);if(this.o=d==200,yh(this.i,this.v,this.B,this.l,this.S,oe,d),this.o){if(this.U&&!this.L){t:{if(this.g){var w,O=this.g;if((w=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(w)){var L=w;break t}}L=null}if(l=L)wr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Eh(this,l);else{this.o=!1,this.m=3,nt(12),Ii(this),Eo(this);break e}}if(this.R){l=!0;let rt;for(;!this.K&&this.C<m.length;)if(rt=eC(this,m),rt==be){oe==4&&(this.m=4,nt(14),l=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Re){this.m=4,nt(15),wr(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else wr(this.i,this.l,rt,null),Eh(this,rt);if(og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||m.length!=0||this.h.h||(this.m=1,nt(16),l=!1),this.o=this.o&&l,!l)wr(this.i,this.l,m,"[Invalid Chunked Response]"),Ii(this),Eo(this);else if(m.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),kh(W),W.P=!0,nt(11))}}else wr(this.i,this.l,m,null),Eh(this,m);oe==4&&Ii(this),this.o&&!this.K&&(oe==4?Ng(this.j,this):(this.o=!1,yl(this)))}else pC(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,nt(12)):(this.m=0,nt(13)),Ii(this),Eo(this)}}}catch{}finally{}};function _h(l){if(!og(l))return l.g.la();const d=xg(l.g);if(d==="")return"";let m="";const w=d.length,O=Sr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ii(l),Eo(l),"";l.h.i=new o.TextDecoder}for(let L=0;L<w;L++)l.h.h=!0,m+=l.h.i.decode(d[L],{stream:!(O&&L==w-1)});return d.length=0,l.h.g+=m,l.C=0,l.h.g}function og(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function eC(l,d){var m=l.C,w=d.indexOf(`
`,m);return w==-1?be:(m=Number(d.substring(m,w)),isNaN(m)?Re:(w+=1,w+m>d.length?be:(d=d.slice(w,w+m),l.C=w+m,d)))}se.prototype.cancel=function(){this.K=!0,Ii(this)};function yl(l){l.T=Date.now()+l.H,ag(l,l.H)}function ag(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Qt(c(l.aa,l),d)}function wh(l){l.D&&(o.clearTimeout(l.D),l.D=null)}se.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(vh(this.i,this.B),this.M!=2&&(Si(),nt(17)),Ii(this),this.m=2,Eo(this)):ag(this,this.T-l)};function Eo(l){l.j.I==0||l.K||Ng(l.j,l)}function Ii(l){wh(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,hl(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function Eh(l,d){try{var m=l.j;if(m.I!=0&&(m.g==l||Th(m.h,l))){if(!l.L&&Th(m.h,l)&&m.I==3){try{var w=m.Ba.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)Sl(m),El(m);else break e;Rh(m),nt(18)}}else m.xa=O[1],0<m.xa-m.K&&O[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Qt(c(m.Va,m),6e3));cg(m.h)<=1&&m.ta&&(m.ta=void 0)}else Ri(m,11)}else if((l.L||m.g==l)&&Sl(m),!k(d))for(O=m.Ba.g.parse(d),d=0;d<O.length;d++){let _e=O[d];const rt=_e[0];if(!(rt<=m.K))if(m.K=rt,_e=_e[1],m.I==2)if(_e[0]=="c"){m.M=_e[1],m.ba=_e[2];const xn=_e[3];xn!=null&&(m.ka=xn,m.j.info("VER="+m.ka));const ki=_e[4];ki!=null&&(m.za=ki,m.j.info("SVER="+m.za));const Cr=_e[5];Cr!=null&&typeof Cr=="number"&&Cr>0&&(w=1.5*Cr,m.O=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const xr=l.g;if(xr){const xl=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var L=w.h;L.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Sh(L,L.h),L.h=null))}if(w.G){const Ph=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ph&&(w.wa=Ph,Ce(w.J,w.G,Ph))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),w=m;var W=l;if(w.na=Lg(w,w.L?w.ba:null,w.W),W.L){hg(w.h,W);var oe=W,Xe=w.O;Xe&&(oe.H=Xe),oe.D&&(wh(oe),yl(oe)),w.g=W}else Pg(w);m.i.length>0&&Tl(m)}else _e[0]!="stop"&&_e[0]!="close"||Ri(m,7);else m.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Ri(m,7):Ah(m):_e[0]!="noop"&&m.l&&m.l.qa(_e),m.A=0)}}Si(4)}catch{}}var tC=class{constructor(l,d){this.g=l,this.map=d}};function lg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ug(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cg(l){return l.h?1:l.g?l.g.size:0}function Th(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Sh(l,d){l.g?l.g.add(d):l.h=d}function hg(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}lg.prototype.cancel=function(){if(this.i=dg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.G);return d}return y(l.i)}var fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nC(l,d){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const w=l[m].indexOf("=");let O,L=null;w>=0?(O=l[m].substring(0,w),L=l[m].substring(w+1)):O=l[m],d(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Er(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof Er?(this.l=l.l,To(this,l.j),this.o=l.o,this.g=l.g,So(this,l.u),this.h=l.h,Ch(this,_g(l.i)),this.m=l.m):l&&(d=String(l).match(fg))?(this.l=!1,To(this,d[1]||"",!0),this.o=Co(d[2]||""),this.g=Co(d[3]||"",!0),So(this,d[4]),this.h=Co(d[5]||"",!0),Ch(this,d[6]||"",!0),this.m=Co(d[7]||"")):(this.l=!1,this.i=new Io(null,this.l))}Er.prototype.toString=function(){const l=[];var d=this.j;d&&l.push(xo(d,pg,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(xo(d,pg,!0),"@"),l.push($(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(xo(m,m.charAt(0)=="/"?sC:iC,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",xo(m,aC)),l.join("")},Er.prototype.resolve=function(l){const d=Cn(this);let m=!!l.j;m?To(d,l.j):m=!!l.o,m?d.o=l.o:m=!!l.g,m?d.g=l.g:m=l.u!=null;var w=l.h;if(m)So(d,l.u);else if(m=!!l.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var O=d.h.lastIndexOf("/");O!=-1&&(w=d.h.slice(0,O+1)+w)}if(O=w,O==".."||O==".")w="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){w=O.lastIndexOf("/",0)==0,O=O.split("/");const L=[];for(let W=0;W<O.length;){const oe=O[W++];oe=="."?w&&W==O.length&&L.push(""):oe==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),w&&W==O.length&&L.push("")):(L.push(oe),w=!0)}w=L.join("/")}else w=O}return m?d.h=w:m=l.i.toString()!=="",m?Ch(d,_g(l.i)):m=!!l.m,m&&(d.m=l.m),d};function Cn(l){return new Er(l)}function To(l,d,m){l.j=m?Co(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function So(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function Ch(l,d,m){d instanceof Io?(l.i=d,lC(l.i,l.l)):(m||(d=xo(d,oC)),l.i=new Io(d,l.l))}function Ce(l,d,m){l.i.set(d,m)}function vl(l){return Ce(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Co(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,rC),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rC(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var pg=/[#\/\?@]/g,iC=/[#\?:]/g,sC=/[#\?]/g,oC=/[#\?@]/g,aC=/#/g;function Io(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ai(l){l.g||(l.g=new Map,l.h=0,l.i&&nC(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Io.prototype,t.add=function(l,d){Ai(this),this.i=null,l=fs(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function mg(l,d){Ai(l),d=fs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function gg(l,d){return Ai(l),d=fs(l,d),l.g.has(d)}t.forEach=function(l,d){Ai(this),this.g.forEach(function(m,w){m.forEach(function(O){l.call(d,O,w,this)},this)},this)};function yg(l,d){Ai(l);let m=[];if(typeof d=="string")gg(l,d)&&(m=m.concat(l.g.get(fs(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)m=m.concat(l[d]);return m}t.set=function(l,d){return Ai(this),this.i=null,l=fs(this,l),gg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=yg(this,l),l.length>0?String(l[0]):d):d};function vg(l,d,m){mg(l,d),m.length>0&&(l.i=null,l.g.set(fs(l,d),y(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(let w=0;w<d.length;w++){var m=d[w];const O=$(m);m=yg(this,m);for(let L=0;L<m.length;L++){let W=O;m[L]!==""&&(W+="="+$(m[L])),l.push(W)}}return this.i=l.join("&")};function _g(l){const d=new Io;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function fs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function lC(l,d){d&&!l.j&&(Ai(l),l.i=null,l.g.forEach(function(m,w){const O=w.toLowerCase();w!=O&&(mg(this,w),vg(this,O,m))},l)),l.j=d}function uC(l,d){const m=new Ci;if(o.Image){const w=new Image;w.onload=h(Tr,m,"TestLoadImage: loaded",!0,d,w),w.onerror=h(Tr,m,"TestLoadImage: error",!1,d,w),w.onabort=h(Tr,m,"TestLoadImage: abort",!1,d,w),w.ontimeout=h(Tr,m,"TestLoadImage: timeout",!1,d,w),o.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function cC(l,d){const m=new Ci,w=new AbortController,O=setTimeout(()=>{w.abort(),Tr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(L=>{clearTimeout(O),L.ok?Tr(m,"TestPingServer: ok",!0,d):Tr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Tr(m,"TestPingServer: error",!1,d)})}function Tr(l,d,m,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(m)}catch{}}function hC(){this.g=new _o}function xh(l){this.i=l.Sb||null,this.h=l.ab||!1}f(xh,Be),xh.prototype.g=function(){return new _l(this.i,this.h)};function _l(l,d){et.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(_l,et),t=_l.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,Ro(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function wg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Ao(this):Ro(this),this.readyState==3&&wg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Ao(this))},t.Na=function(l){this.g&&(this.response=l,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Ro(l)}t.setRequestHeader=function(l,d){this.A.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Eg(l){let d="";return Q(l,function(m,w){d+=w,d+=":",d+=m,d+=`\r
`}),d}function Ih(l,d,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=Eg(m),typeof l=="string"?m!=null&&$(m):Ce(l,d,m))}function Me(l){et.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Me,et);var dC=/^https?$/i,fC=["POST","PUT"];t=Me.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,d,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gl.g(),this.g.onreadystatechange=p(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(L){Tg(this,L);return}if(l=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)m.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())m.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(fC,d,void 0)>=0)||w||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of m)this.g.setRequestHeader(L,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(L){Tg(this,L)}};function Tg(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,Sg(l),wl(l)}function Sg(l){l.A||(l.A=!0,tt(l,"complete"),tt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,tt(this,"complete"),tt(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Cg(this):this.Xa())},t.Xa=function(){Cg(this)};function Cg(l){if(l.h&&typeof s<"u"){if(l.v&&Sr(l)==4)setTimeout(l.Ca.bind(l),0);else if(tt(l,"readystatechange"),Sr(l)==4){l.h=!1;try{const L=l.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var w;if(w=L===0){let W=String(l.D).match(fg)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),w=!dC.test(W?W.toLowerCase():"")}m=w}if(m)tt(l,"complete"),tt(l,"success");else{l.o=6;try{var O=Sr(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",Sg(l)}}finally{wl(l)}}}}function wl(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,d||tt(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Wn(d)}};function xg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pC(l){const d={};l=(l.g&&Sr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(k(l[w]))continue;var m=K(l[w]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=d[O]||[];d[O]=L,L.push(m)}G(d,function(w){return w.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ko(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function Ig(l){this.za=0,this.i=[],this.j=new Ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ko("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ko("baseRetryDelayMs",5e3,l),this.Za=ko("retryDelaySeedMs",1e4,l),this.Ta=ko("forwardChannelMaxRetries",2,l),this.va=ko("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new lg(l&&l.concurrentRequestLimit),this.Ba=new hC,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ig.prototype,t.ka=8,t.I=1,t.connect=function(l,d,m,w){nt(0),this.W=l,this.H=d||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.J=Lg(this,null,this.W),Tl(this)};function Ah(l){if(Ag(l),l.I==3){var d=l.V++,m=Cn(l.J);if(Ce(m,"SID",l.M),Ce(m,"RID",d),Ce(m,"TYPE","terminate"),Po(l,m),d=new se(l,l.j,d),d.M=2,d.A=vl(Cn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=d.A,m=!0),m||(d.g=Vg(d.j,null),d.g.ea(d.A)),d.F=Date.now(),yl(d)}Og(l)}function El(l){l.g&&(kh(l),l.g.cancel(),l.g=null)}function Ag(l){El(l),l.v&&(o.clearTimeout(l.v),l.v=null),Sl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Tl(l){if(!ug(l.h)&&!l.m){l.m=!0;var d=l.Ea;V||E(),U||(V(),U=!0),C.add(d,l),l.D=0}}function mC(l,d){return cg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Qt(c(l.Ea,l,d),Dg(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const O=new se(this,this.j,l);let L=this.o;if(this.U&&(L?(L=ie(L),at(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=kg(this,O,d),m=Cn(this.J),Ce(m,"RID",l),Ce(m,"CVER",22),this.G&&Ce(m,"X-HTTP-Session-Id",this.G),Po(this,m),L&&(this.R?d="headers="+$(Eg(L))+"&"+d:this.u&&Ih(m,this.u,L)),Sh(this.h,O),this.Ra&&Ce(m,"TYPE","init"),this.S?(Ce(m,"$req",d),Ce(m,"SID","null"),O.U=!0,xi(O,m,null)):xi(O,m,d),this.I=2}}else this.I==3&&(l?Rg(this,l):this.i.length==0||ug(this.h)||Rg(this))};function Rg(l,d){var m;d?m=d.l:m=l.V++;const w=Cn(l.J);Ce(w,"SID",l.M),Ce(w,"RID",m),Ce(w,"AID",l.K),Po(l,w),l.u&&l.o&&Ih(w,l.u,l.o),m=new se(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),d&&(l.i=d.G.concat(l.i)),d=kg(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Sh(l.h,m),xi(m,w,d)}function Po(l,d){l.H&&Q(l.H,function(m,w){Ce(d,w,m)}),l.l&&Q({},function(m,w){Ce(d,w,m)})}function kg(l,d,m){m=Math.min(l.i.length,m);const w=l.l?c(l.l.Ka,l.l,l):null;e:{var O=l.i;let oe=-1;for(;;){const Xe=["count="+m];oe==-1?m>0?(oe=O[0].g,Xe.push("ofs="+oe)):oe=0:Xe.push("ofs="+oe);let _e=!0;for(let rt=0;rt<m;rt++){var L=O[rt].g;const xn=O[rt].map;if(L-=oe,L<0)oe=Math.max(0,O[rt].g-100),_e=!1;else try{L="req"+L+"_"||"";try{var W=xn instanceof Map?xn:Object.entries(xn);for(const[ki,Cr]of W){let xr=Cr;a(Cr)&&(xr=lt(Cr)),Xe.push(L+ki+"="+encodeURIComponent(xr))}}catch(ki){throw Xe.push(L+"type="+encodeURIComponent("_badmap")),ki}}catch{w&&w(xn)}}if(_e){W=Xe.join("&");break e}}W=void 0}return l=l.i.splice(0,m),d.G=l,W}function Pg(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;V||E(),U||(V(),U=!0),C.add(d,l),l.A=0}}function Rh(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Qt(c(l.Da,l),Dg(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,bg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Qt(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nt(10),El(this),bg(this))};function kh(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function bg(l){l.g=new se(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=Cn(l.na);Ce(d,"RID","rpc"),Ce(d,"SID",l.M),Ce(d,"AID",l.K),Ce(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ce(d,"TO",l.ia),Ce(d,"TYPE","xmlhttp"),Po(l,d),l.u&&l.o&&Ih(d,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=vl(Cn(d)),m.u=null,m.R=!0,Kn(m,l)}t.Va=function(){this.C!=null&&(this.C=null,El(this),Rh(this),nt(19))};function Sl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Ng(l,d){var m=null;if(l.g==d){Sl(l),kh(l),l.g=null;var w=2}else if(Th(l.h,d))m=d.G,hg(l.h,d),w=1;else return;if(l.I!=0){if(d.o)if(w==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var O=l.D;w=Ti(),tt(w,new cs(w,m)),Tl(l)}else Pg(l);else if(O=d.m,O==3||O==0&&d.X>0||!(w==1&&mC(l,d)||w==2&&Rh(l)))switch(m&&m.length>0&&(d=l.h,d.i=d.i.concat(m)),O){case 1:Ri(l,5);break;case 4:Ri(l,10);break;case 3:Ri(l,6);break;default:Ri(l,2)}}}function Dg(l,d){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*d}function Ri(l,d){if(l.j.info("Error code "+d),d==2){var m=c(l.bb,l),w=l.Ua;const O=!w;w=new Er(w||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||To(w,"https"),vl(w),O?uC(w.toString(),m):cC(w.toString(),m)}else nt(2);l.I=0,l.l&&l.l.pa(d),Og(l),Ag(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Og(l){if(l.I=0,l.ja=[],l.l){const d=dg(l.h);(d.length!=0||l.i.length!=0)&&(S(l.ja,d),S(l.ja,l.i),l.h.i.length=0,y(l.i),l.i.length=0),l.l.oa()}}function Lg(l,d,m){var w=m instanceof Er?Cn(m):new Er(m);if(w.g!="")d&&(w.g=d+"."+w.g),So(w,w.u);else{var O=o.location;w=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;const L=new Er(null);w&&To(L,w),d&&(L.g=d),O&&So(L,O),m&&(L.h=m),w=L}return m=l.G,d=l.wa,m&&d&&Ce(w,m,d),Ce(w,"VER",l.ka),Po(l,w),w}function Vg(l,d,m){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new Me(new xh({ab:m})):new Me(l.ma),d.Fa(l.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mg(){}t=Mg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cl(){}Cl.prototype.g=function(l,d){return new zt(l,d)};function zt(l,d){et.call(this),this.g=new Ig(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!k(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!k(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new ps(this)}f(zt,et),zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ah(this.g)},zt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=lt(l),l=m);d.i.push(new tC(d.Ya++,l)),d.I==3&&Tl(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ah(this.g),delete this.g,zt.Z.N.call(this)};function jg(l){hn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}f(jg,hn);function Ug(){Ei.call(this),this.status=1}f(Ug,Ei);function ps(l){this.g=l}f(ps,Mg),ps.prototype.ra=function(){tt(this.g,"a")},ps.prototype.qa=function(l){tt(this.g,new jg(l))},ps.prototype.pa=function(l){tt(this.g,new Ug)},ps.prototype.oa=function(){tt(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,I1=function(){return new Cl},x1=function(){return Ti()},C1=Gn,Rf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,wu=hs,ml.COMPLETE="complete",S1=ml,_r.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",et.prototype.listen=et.prototype.J,Go=_r,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,T1=Me}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore",Ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new em("@firebase/firestore");function gs(){return Qi.logLevel}function Y(t,...e){if(Qi.logLevel<=ue.DEBUG){const n=e.map(cm);Qi.debug(`Firestore (${lo}): ${t}`,...n)}}function dr(t,...e){if(Qi.logLevel<=ue.ERROR){const n=e.map(cm);Qi.error(`Firestore (${lo}): ${t}`,...n)}}function Xs(t,...e){if(Qi.logLevel<=ue.WARN){const n=e.map(cm);Qi.warn(`Firestore (${lo}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,A1(t,r,n)}function A1(t,e,n){let r=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dr(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||A1(e,i,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class fN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pN{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new R1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class mN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Lv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=vN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function kf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return dd(i)===dd(s)?ce(i,s):dd(i)?1:-1}return ce(t.length,e.length)}const _N=55296,wN=57343;function dd(t){const e=t.charCodeAt(0);return e>=_N&&e<=wN}function Qs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="__name__";class Rn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Rn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=Rn.isNumericId(e),i=Rn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Rn.extractNumericId(e).compare(Rn.extractNumericId(n)):kf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class Ee extends Rn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const EN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Rn{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return EN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vv}static keyField(){return new ht([Vv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ee.fromString(e))}static fromName(e){return new J(Ee.fromString(e).popFirst(5))}static empty(){return new J(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TN(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mv(t){if(!J.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jv(t){if(J.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t,e){const n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!P1(t))throw new q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=-62135596800,Fv=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Fv);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Uv)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fv}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:Ye("string",Ie._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ie(0,0))}static max(){return new ne(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function SN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new ii(i,J.empty(),e)}function CN(t){return new ii(t.readTime,t.key,Oa)}class ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ii(ne.min(),J.empty(),Oa)}static max(){return new ii(ne.max(),J.empty(),Oa)}}function xN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==IN)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function RN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$c.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-1;function Hc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function kN(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="";function PN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zv(e)),e=bN(t.get(n),e);return zv(e)}function bN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case b1:n+="";break;default:n+=s}}return n}function zv(t){return t+b1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function N1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class $v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new Ze(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new D1("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const NN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=NN.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oi(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="server_timestamp",L1="__type__",V1="__previous_value__",M1="__local_write_time__";function fm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[L1])==null?void 0:r.stringValue)===O1}function Wc(t){const e=t.mapValue.fields[V1];return fm(e)?Wc(e):e}function La(t){const e=si(t.mapValue.fields[M1].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i,s,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const lc="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||lc}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===lc}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="__type__",ON="__max__",Gl={mapValue:{}},U1="__vector__",uc="value";function ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fm(t)?4:VN(t)?9007199254740991:LN(t)?10:11:ee(28295,{value:t})}function zn(t,e){if(t===e)return!0;const n=ai(t);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return La(t).isEqual(La(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=si(i.timestampValue),a=si(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return oi(i.bytesValue).isEqual(oi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=$e(i.doubleValue),a=$e(s.doubleValue);return o===a?ac(o)===ac(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Bv(o)!==Bv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!zn(o[u],a[u])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function Ma(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function Js(t,e){if(t===e)return 0;const n=ai(t),r=ai(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=$e(s.integerValue||s.doubleValue),u=$e(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Hv(t.timestampValue,e.timestampValue);case 4:return Hv(La(t),La(e));case 5:return kf(t.stringValue,e.stringValue);case 6:return function(s,o){const a=oi(s),u=oi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ce(a[c],u[c]);if(h!==0)return h}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce($e(s.latitude),$e(o.latitude));return a!==0?a:ce($e(s.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,S,A;const a=s.fields||{},u=o.fields||{},c=(p=a[uc])==null?void 0:p.arrayValue,h=(y=u[uc])==null?void 0:y.arrayValue,f=ce(((S=c==null?void 0:c.values)==null?void 0:S.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:Wv(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gl.mapValue&&o===Gl.mapValue)return 0;if(s===Gl.mapValue)return 1;if(o===Gl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=kf(u[f],h[f]);if(p!==0)return p;const y=Js(a[u[f]],c[h[f]]);if(y!==0)return y}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{he:n})}}function Hv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=si(t),r=si(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Wv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Js(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Zs(t){return Pf(t)}function Pf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=si(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Pf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Pf(n.fields[o])}`;return i+"}"}(t.mapValue):ee(61005,{value:t})}function Eu(t){switch(ai(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wc(t);return e?16+Eu(e):16;case 5:return 2*t.stringValue.length;case 6:return oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Eu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return gi(r.fields,(s,o)=>{i+=s.length+Eu(o)}),i}(t.mapValue);default:throw ee(13486,{value:t})}}function qv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bf(t){return!!t&&"integerValue"in t}function pm(t){return!!t&&"arrayValue"in t}function Gv(t){return!!t&&"nullValue"in t}function Kv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tu(t){return!!t&&"mapValue"in t}function LN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[j1])==null?void 0:r.stringValue)===U1}function ua(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ua(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(t.arrayValue.values[n]);return e}return{...t}}function VN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ON}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ua(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ot(ua(this.value))}}function F1(t){const e=[];return gi(t.fields,(n,r)=>{const i=new ht([n]);if(Tu(r)){const s=F1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,ne.min(),ne.min(),ne.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,i){return new St(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new St(e,2,n,ne.min(),ne.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,ne.min(),ne.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.position=e,this.inclusive=n}}function Yv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Js(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function MN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{}class Ke extends z1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UN(e,n,r):n==="array-contains"?new BN(e,r):n==="in"?new $N(e,r):n==="not-in"?new HN(e,r):n==="array-contains-any"?new WN(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FN(e,r):new zN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Js(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends z1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Tn(e,n)}matches(e){return B1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B1(t){return t.op==="and"}function $1(t){return jN(t)&&B1(t)}function jN(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function Nf(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Zs(t.value);if($1(t))return t.filters.map(e=>Nf(e)).join(",");{const e=t.filters.map(n=>Nf(n)).join(",");return`${t.op}(${e})`}}function H1(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&H1(o,i.filters[a]),!0):!1}(t,e):void ee(19439)}function W1(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Zs(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(W1).join(" ,")+"}"}(t):"Filter"}class UN extends Ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class FN extends Ke{constructor(e,n){super(e,"in",n),this.keys=q1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zN extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=q1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function q1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class BN extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pm(n)&&Ma(n.arrayValue,this.value)}}class $N extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ma(this.value.arrayValue,n)}}class HN extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ma(this.value.arrayValue,n)}}class WN extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Qv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new qN(t,e,n,r,i,s,o)}function mm(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zs(r)).join(",")),e.Te=n}return e.Te}function gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xv(t.startAt,e.startAt)&&Xv(t.endAt,e.endAt)}function Df(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GN(t,e,n,r,i,s,o,a){return new ho(t,e,n,r,i,s,o,a)}function qc(t){return new ho(t)}function Jv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G1(t){return t.collectionGroup!==null}function ca(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(ht.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ja(s,r))}),n.has(ht.keyField().canonicalString())||e.Ie.push(new ja(ht.keyField(),r))}return e.Ie}function Mn(t){const e=re(t);return e.Ee||(e.Ee=KN(e,ca(t))),e.Ee}function KN(t,e){if(t.limitType==="F")return Qv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ja(i.field,s)});const n=t.endAt?new cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cc(t.startAt.position,t.startAt.inclusive):null;return Qv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Of(t,e){const n=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lf(t,e,n){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gc(t,e){return gm(Mn(t),Mn(e))&&t.limitType===e.limitType}function K1(t){return`${mm(Mn(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>W1(i)).join(", ")}]`),Hc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zs(i)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function Kc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ca(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=Yv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ca(r),i)||r.endAt&&!function(o,a,u){const c=Yv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ca(r),i))}(t,e)}function YN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y1(t){return(e,n)=>{let r=!1;for(const i of ca(t)){const s=XN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XN(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Js(u,c):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return N1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Ve(J.comparator);function fr(){return QN}const X1=new Ve(J.comparator);function Ko(...t){let e=X1;for(const n of t)e=e.insert(n.key,n);return e}function Q1(t){let e=X1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return ha()}function J1(){return ha()}function ha(){return new is(t=>t.toString(),(t,e)=>t.isEqual(e))}const JN=new Ve(J.comparator),ZN=new Ze(J.comparator);function he(...t){let e=ZN;for(const n of t)e=e.add(n);return e}const eD=new Ze(ce);function tD(){return eD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function Z1(t){return{integerValue:""+t}}function eT(t,e){return kN(e)?Z1(e):ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function nD(t,e,n){return t instanceof hc?function(i,s){const o={fields:{[L1]:{stringValue:O1},[M1]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fm(s)&&(s=Wc(s)),s&&(o.fields[V1]=s),{mapValue:o}}(n,e):t instanceof Ua?nT(t,e):t instanceof Fa?rT(t,e):function(i,s){const o=tT(i,s),a=Zv(o)+Zv(i.Ae);return bf(o)&&bf(i.Ae)?Z1(a):ym(i.serializer,a)}(t,e)}function rD(t,e,n){return t instanceof Ua?nT(t,e):t instanceof Fa?rT(t,e):n}function tT(t,e){return t instanceof za?function(r){return bf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hc extends Yc{}class Ua extends Yc{constructor(e){super(),this.elements=e}}function nT(t,e){const n=iT(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Fa extends Yc{constructor(e){super(),this.elements=e}}function rT(t,e){let n=iT(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class za extends Yc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Zv(t){return $e(t.integerValue||t.doubleValue)}function iT(t){return pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.field=e,this.transform=n}}function sD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ua&&i instanceof Ua||r instanceof Fa&&i instanceof Fa?Qs(r.elements,i.elements,zn):r instanceof za&&i instanceof za?zn(r.Ae,i.Ae):r instanceof hc&&i instanceof hc}(t.transform,e.transform)}class oD{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xc{}function sT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vm(t.key,on.none()):new nl(t.key,t.data,on.none());{const n=t.data,r=Ot.empty();let i=new Ze(ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yi(t.key,r,new Wt(i.toArray()),on.none())}}function aD(t,e,n){t instanceof nl?function(i,s,o){const a=i.value.clone(),u=t_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yi?function(i,s,o){if(!Su(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=t_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(oT(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n,r){return t instanceof nl?function(s,o,a,u){if(!Su(s.precondition,o))return a;const c=s.value.clone(),h=n_(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof yi?function(s,o,a,u){if(!Su(s.precondition,o))return a;const c=n_(s.fieldTransforms,u,o),h=o.data;return h.setAll(oT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Su(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=tT(r.transform,i||null);s!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,s))}return n||null}function e_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qs(r,i,(s,o)=>sD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Xc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yi extends Xc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function t_(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rD(o,a,n[i]))}return r}function n_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nD(s,o,e))}return r}class vm extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uD extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=J1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=sT(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,r)=>e_(n,r))&&Qs(this.baseMutations,e.baseMutations,(n,r)=>e_(n,r))}}class _m{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return JN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _m(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,fe;function fD(t){switch(t){case M.OK:return ee(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function aT(t){if(t===void 0)return dr("GRPC error has no .code"),M.UNKNOWN;switch(t){case qe.OK:return M.OK;case qe.CANCELLED:return M.CANCELLED;case qe.UNKNOWN:return M.UNKNOWN;case qe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case qe.INTERNAL:return M.INTERNAL;case qe.UNAVAILABLE:return M.UNAVAILABLE;case qe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case qe.NOT_FOUND:return M.NOT_FOUND;case qe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case qe.ABORTED:return M.ABORTED;case qe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case qe.DATA_LOSS:return M.DATA_LOSS;default:return ee(39323,{code:t})}}(fe=qe||(qe={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Qr([4294967295,4294967295],0);function r_(t){const e=pD().encode(t),n=new E1;return n.update(e),new Uint8Array(n.digest())}function i_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([i,s],0)]}class wm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Qr.fromNumber(r)));return i.compare(mD)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=r_(e),[r,i]=i_(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new wm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=r_(e),[r,i]=i_(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qc(ne.min(),i,new Ve(ce),fr(),he())}}class rl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class lT{constructor(e,n){this.targetId=e,this.Ce=n}}class uT{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class s_{constructor(){this.ve=0,this.Fe=o_(),this.Me=mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new rl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=o_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gD{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ve(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Df(s))if(r===0){const o=new J(s.path);this.et(n,o,St.newNoDocument(o,ne.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=oi(r).toUint8Array()}catch(u){if(u instanceof D1)return Xs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new wm(o,i,s)}catch(u){return Xs(u instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Df(a.target)){const u=new J(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,St.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=he();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Qc(e,n,this.Ye,this.je,r);return this.je=fr(),this.Je=Kl(),this.He=Kl(),this.Ye=new Ve(ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new s_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new s_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kl(){return new Ve(J.comparator)}function o_(){return new Ve(J.comparator)}const yD={asc:"ASCENDING",desc:"DESCENDING"},vD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"};class wD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vf(t,e){return t.useProto3Json||Hc(e)?e:{value:e}}function dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ED(t,e){return dc(t,e.toTimestamp())}function jn(t){return ge(!!t,49232),ne.fromTimestamp(function(n){const r=si(n);return new Ie(r.seconds,r.nanos)}(t))}function Em(t,e){return Mf(t,e).canonicalString()}function Mf(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hT(t){const e=Ee.fromString(t);return ge(gT(e),10190,{key:e.toString()}),e}function jf(t,e){return Em(t.databaseId,e.path)}function fd(t,e){const n=hT(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(fT(n))}function dT(t,e){return Em(t.databaseId,e)}function TD(t){const e=hT(t);return e.length===4?Ee.emptyPath():fT(e)}function Uf(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fT(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function a_(t,e,n){return{name:jf(t,e),fields:n.value.mapValue.fields}}function SD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ge(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?M.UNKNOWN:aT(c.code);return new q(h,c.message||"")}(o);n=new uT(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fd(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ne.min(),a=new Ot({mapValue:{fields:r.document.fields}}),u=St.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Cu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fd(t,r.document),s=r.readTime?jn(r.readTime):ne.min(),o=St.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Cu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fd(t,r.document),s=r.removedTargetIds||[];n=new Cu([],s,i,null)}else{if(!("filter"in e))return ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dD(i,s),a=r.targetId;n=new lT(a,o)}}return n}function CD(t,e){let n;if(e instanceof nl)n={update:a_(t,e.key,e.value)};else if(e instanceof vm)n={delete:jf(t,e.key)};else if(e instanceof yi)n={update:a_(t,e.key,e.data),updateMask:DD(e.fieldMask)};else{if(!(e instanceof uD))return ee(16599,{Vt:e.type});n={verify:jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof za)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ED(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(t,e.precondition)),n}function xD(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(ne.min())&&(o=jn(s)),new oD(o,i.transformResults||[])}(n,e))):[]}function ID(t,e){return{documents:[dT(t,e.path)]}}function AD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dT(t,i);const s=function(c){if(c.length!==0)return mT(Tn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:vs(p.field),direction:PD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function RD(t){let e=TD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=pT(f);return p instanceof Tn&&$1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(S){return new ja(_s(S.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Hc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,y=f.values||[];return new cc(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,y=f.values||[];return new cc(y,p)}(n.endAt)),GN(e,i,o,s,a,"F",u,c)}function kD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_s(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_s(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_s(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_s(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(_s(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>pT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function PD(t){return yD[t]}function bD(t){return vD[t]}function ND(t){return _D[t]}function vs(t){return{fieldPath:t.canonicalString()}}function _s(t){return ht.fromServerFormat(t.fieldPath)}function mT(t){return t instanceof Ke?function(n){if(n.op==="=="){if(Kv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Gv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Gv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:bD(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(i=>mT(i));return r.length===1?r[0]:{compositeFilter:{op:ND(n.op),filters:r}}}(t):ee(54877,{filter:t})}function DD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.yt=e}}function LD(t){const e=RD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Cn=new MD}addToCollectionParentIndex(e,n){return this.Cn.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ii.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class MD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yT=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(yT,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="LruGarbageCollector",jD=1048576;function c_([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class UD{constructor(e){this.Ir=e,this.buffer=new Ze(c_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();c_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(u_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?Y(u_,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)})}}class zD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve($c.ce);const r=new UD(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(l_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),gs()<=ue.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function BD(t,e){return new zD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.changes=new is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&da(r.mutation,i,Wt.empty(),Ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ko();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fr();const o=ha(),a=function(){return ha()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof yi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),da(h.mutation,c,h.mutation.getFieldMask(),Ie.now())):o.set(c.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new HD(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ha();let i=new Ve((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=J1();h.forEach(p=>{if(!s.has(p)){const y=sT(n.get(p),r.get(p));y!==null&&f.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Vi());let a=Oa,u=s;return o.next(c=>j.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,he())).next(h=>({batchId:a,changes:Q1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Ko();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ko();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,u=>{const c=function(f,p){return new ho(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,St.newInvalidDocument(h)))});let a=Ko();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&da(h.mutation,c,Wt.empty(),Ie.now()),Kc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:LD(i.bundledQuery),readTime:jn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.overlays=new Ve(J.comparator),this.qr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vi();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Vi(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Vi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Vi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hD(n,r));let s=this.qr.get(n);s===void 0&&(s=he(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.Qr=new Ze(it.$r),this.Ur=new Ze(it.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new it(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Ee([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Ee([])),r=new it(n,e),i=new it(n,e+1);let s=he();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(it.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?dm:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ce);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new it(new J(s),0);let a=new Ze(ce);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Yr)),!0)},o),j.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new it(n,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.ri=e,this.docs=function(){return new Ve(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fr();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||xN(CN(h),r)<=0||(i.has(h.key)||Kc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee(9500)}ii(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QD(this)}getSize(e){return j.resolve(this.size)}}class QD extends $D{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.persistence=e,this.si=new is(n=>mm(n),gm),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Tm,this.targetCount=0,this.ai=eo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Pr(n),j.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.ui={},this.overlays={},this.ci=new $c(0),this.li=!1,this.li=!0,this.hi=new KD,this.referenceDelegate=e(this),this.Pi=new JD(this),this.indexManager=new VD,this.remoteDocumentCache=function(i){return new XD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new OD(n),this.Ii=new qD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new YD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new ZD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class ZD extends AN{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Tm,this.Vi=null}static mi(e){return new Sm(e)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class fc{constructor(e,n){this.persistence=e,this.pi=new is(r=>PN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=BD(this,n)}static mi(e,n){return new fc(e,n)}Ei(){}di(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return j.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),j.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Eu(e.data.value)),n}br(e,n,r){return j.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Cm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qk()?8:RN(xt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new e4;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(gs()<=ue.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(gs()<=ue.DEBUG&&Y("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gs()<=ue.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):j.resolve())}ys(e,n){if(Jv(n))return j.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lf(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,Lf(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return Jv(n)||i.isEqual(ne.min())?j.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?j.resolve(null):(gs()<=ue.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(n)),this.vs(e,o,n,SN(i,Oa)).next(a=>a))})}Ds(e,n){let r=new Ze(Y1(e));return n.forEach((i,s)=>{Kc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return gs()<=ue.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",ys(n)),this.ps.getDocumentsMatchingQuery(e,n,ii.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="LocalStore",n4=3e8;class r4{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ve(ce),this.xs=new is(s=>mm(s),gm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function i4(t,e,n,r){return new r4(t,e,n,r)}async function _T(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=he();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function s4(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,p=f.keys();let y=j.resolve();return p.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(A=>{const I=c.docVersions.get(S);ge(I!==null,48541),A.version.compareTo(I)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wT(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function o4(t,e){const n=re(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(mt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(A,I,_){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=n4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let u=fr(),c=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(a4(s,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(ne.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=i,s))}function a4(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Y(xm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:i}})}function l4(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=dm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u4(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ff(t,e,n){const r=re(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!co(o))throw o;Y(xm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function h_(t,e,n){const r=re(t);let i=ne.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=re(u),p=f.xs.get(h);return p!==void 0?j.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)}(r,o,Mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:he())).next(a=>(c4(r,YN(e),a),{documents:a,Qs:s})))}function c4(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class d_{constructor(){this.activeTargetIds=tD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h4{constructor(){this.Mo=new d_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="ConnectivityMonitor";class p_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(f_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(f_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function zf(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="RestConnection",f4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class p4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===lc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=zf(),a=this.zo(e,n.toUriEncodedString());Y(pd,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:c}=new URL(a),h=mi(c);return this.Jo(e,a,u,r,h).then(f=>(Y(pd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Xs(pd,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=f4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class g4 extends p4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=zf();return new Promise((a,u)=>{const c=new T1;c.setWithCredentials(!0),c.listenOnce(S1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wu.NO_ERROR:const f=c.getResponseJson();Y(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case wu.TIMEOUT:Y(wt,`RPC '${e}' ${o} timed out`),u(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case wu.HTTP_ERROR:const p=c.getStatus();if(Y(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const A=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(S.status);u(new q(A,S.message))}else u(new q(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new q(M.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);Y(wt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){const i=zf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I1(),a=x1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Y(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let p=!1,y=!1;const S=new m4({Yo:I=>{y?Y(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(Y(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Y(wt,`RPC '${e}' stream ${i} sending:`,I),f.send(I))},Zo:()=>f.close()}),A=(I,_,v)=>{I.listen(_,T=>{try{v(T)}catch(D){setTimeout(()=>{throw D},0)}})};return A(f,Go.EventType.OPEN,()=>{y||(Y(wt,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),A(f,Go.EventType.CLOSE,()=>{y||(y=!0,Y(wt,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(f))}),A(f,Go.EventType.ERROR,I=>{y||(y=!0,Xs(wt,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),S.a_(new q(M.UNAVAILABLE,"The operation could not be completed")))}),A(f,Go.EventType.MESSAGE,I=>{var _;if(!y){const v=I.data[0];ge(!!v,16349);const T=v,D=(T==null?void 0:T.error)||((_=T[0])==null?void 0:_.error);if(D){Y(wt,`RPC '${e}' stream ${i} received error:`,D);const V=D.status;let U=function(x){const R=qe[x];if(R!==void 0)return aT(R)}(V),C=D.message;U===void 0&&(U=M.INTERNAL,C="Unknown error status: "+V+" with message "+D.message),y=!0,S.a_(new q(U,C)),f.close()}else Y(wt,`RPC '${e}' stream ${i} received:`,v),S.u_(v)}}),A(a,C1.STAT_EVENT,I=>{I.stat===Rf.PROXY?Y(wt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Rf.NOPROXY&&Y(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return new wD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="PersistentStream";class TT{constructor(e,n,r,i,s,o,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ET(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(m_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(m_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y4 extends TT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=SD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?jn(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Uf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Df(u)?{documents:ID(s,u)}:{query:AD(s,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cT(s,o.resumeToken);const c=Vf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=dc(s,o.snapshotVersion.toTimestamp());const c=Vf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Uf(this.serializer),n.removeTarget=e,this.q_(n)}}class v4 extends TT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xD(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Uf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CD(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{}class w4 extends _4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Mf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(M.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Mf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class E4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dr(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="RemoteStore";class T4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ss(this)&&(Y(Ji,"Restarting streams for network reachability change."),await async function(u){const c=re(u);c.Ea.add(4),await il(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Zc(c)}(this))})}),this.Ra=new E4(r,i)}}async function Zc(t){if(ss(t))for(const e of t.da)await e(!0)}async function il(t){for(const e of t.da)await e(!1)}function ST(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),km(n)?Rm(n):fo(n).O_()&&Am(n,e))}function Im(t,e){const n=re(t),r=fo(n);n.Ia.delete(e),r.O_()&&CT(n,e),n.Ia.size===0&&(r.O_()?r.L_():ss(n)&&n.Ra.set("Unknown"))}function Am(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).Y_(e)}function CT(t,e){t.Va.Ue(e),fo(t).Z_(e)}function Rm(t){t.Va=new gD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Ra.ua()}function km(t){return ss(t)&&!fo(t).x_()&&t.Ia.size>0}function ss(t){return re(t).Ea.size===0}function xT(t){t.Va=void 0}async function S4(t){t.Ra.set("Online")}async function C4(t){t.Ia.forEach((e,n)=>{Am(t,e)})}async function x4(t,e){xT(t),km(t)?(t.Ra.ha(e),Rm(t)):t.Ra.set("Unknown")}async function I4(t,e,n){if(t.Ra.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){Y(Ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pc(t,r)}else if(e instanceof Cu?t.Va.Ze(e):e instanceof lT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await wT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),CT(s,u);const f=new Ur(h.target,u,c,h.sequenceNumber);Am(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y(Ji,"Failed to raise snapshot:",r),await pc(t,r)}}async function pc(t,e,n){if(!co(e))throw e;t.Ea.add(1),await il(t),t.Ra.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Ji,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Zc(t)})}function IT(t,e){return e().catch(n=>pc(t,n,e))}async function eh(t){const e=re(t),n=li(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dm;for(;A4(e);)try{const i=await l4(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,R4(e,i)}catch(i){await pc(e,i)}AT(e)&&RT(e)}function A4(t){return ss(t)&&t.Ta.length<10}function R4(t,e){t.Ta.push(e);const n=li(t);n.O_()&&n.X_&&n.ea(e.mutations)}function AT(t){return ss(t)&&!li(t).x_()&&t.Ta.length>0}function RT(t){li(t).start()}async function k4(t){li(t).ra()}async function P4(t){const e=li(t);for(const n of t.Ta)e.ea(n.mutations)}async function b4(t,e,n){const r=t.Ta.shift(),i=_m.from(r,e,n);await IT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await eh(t)}async function N4(t,e){e&&li(t).X_&&await async function(r,i){if(function(o){return fD(o)&&o!==M.ABORTED}(i.code)){const s=r.Ta.shift();li(r).B_(),await IT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await eh(r)}}(t,e),AT(t)&&RT(t)}async function g_(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Y(Ji,"RemoteStore received new credentials");const r=ss(n);n.Ea.add(3),await il(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Zc(n)}async function D4(t,e){const n=re(t);e?(n.Ea.delete(2),await Zc(n)):e||(n.Ea.add(2),await il(n),n.Ra.set("Unknown"))}function fo(t){return t.ma||(t.ma=function(n,r,i){const s=re(n);return s.sa(),new y4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:S4.bind(null,t),t_:C4.bind(null,t),r_:x4.bind(null,t),H_:I4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),km(t)?Rm(t):t.Ra.set("Unknown")):(await t.ma.stop(),xT(t))})),t.ma}function li(t){return t.fa||(t.fa=function(n,r,i){const s=re(n);return s.sa(),new v4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:k4.bind(null,t),r_:N4.bind(null,t),ta:P4.bind(null,t),na:b4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await eh(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Ji,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Pm(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(dr("AsyncQueue",`${e}: ${t}`),co(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(e){return new Bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ko(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.ga=new Ve(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class to{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new to(e,n,Bs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class L4{constructor(){this.queries=v_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=v_(),s.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new q(M.ABORTED,"Firestore shutting down"))}}function v_(){return new is(t=>K1(t),Gc)}async function Nm(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new O4,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=bm(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Om(n)}async function Dm(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V4(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Om(n)}function M4(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Om(t){t.Ca.forEach(e=>{e.next()})}var Bf,__;(__=Bf||(Bf={})).Ma="default",__.Cache="cache";class Lm{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class j4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=Y1(e),this.tu=new Bs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new y_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),y=Kc(this.query,f)?f:null,S=!!p&&this.mutatedKeys.has(p.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;p&&y?p.data.isEqual(y.data)?S!==A&&(r.track({type:3,doc:y}),I=!0):this.su(p,y)||(r.track({type:2,doc:y}),I=!0,(u&&this.eu(y,u)>0||c&&this.eu(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),I=!0):p&&!y&&(r.track({type:1,doc:p}),I=!0,(u||c)&&(a=!0)),I&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,S){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:I})}};return A(y)-A(S)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new to(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new y_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new PT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new kT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vm="SyncEngine";class U4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class F4{constructor(e){this.key=e,this.hu=!1}}class z4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new is(a=>K1(a),Gc),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(J.comparator),this.Au=new Map,this.Ru=new Tm,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B4(t,e,n=!0){const r=VT(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await bT(r,e,n,!0),i}async function $4(t,e){const n=VT(t);await bT(n,e,!0,!1)}async function bT(t,e,n,r){const i=await u4(t.localStore,Mn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await H4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ST(t.remoteStore,i),a}async function H4(t,e,n,r,i){t.pu=(f,p,y)=>async function(A,I,_,v){let T=I.view.ru(_);T.Cs&&(T=await h_(A.localStore,I.query,!1).then(({documents:C})=>I.view.ru(C,T)));const D=v&&v.targetChanges.get(I.targetId),V=v&&v.targetMismatches.get(I.targetId)!=null,U=I.view.applyChanges(T,A.isPrimaryClient,D,V);return E_(A,I.targetId,U.au),U.snapshot}(t,f,p,y);const s=await h_(t.localStore,e,!0),o=new j4(e,s.Qs),a=o.ru(s.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);E_(t,n,c.au);const h=new U4(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function W4(t,e,n){const r=re(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Gc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ff(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),$f(r,i.targetId)}).catch(uo)):($f(r,i.targetId),await Ff(r.localStore,i.targetId,!0))}async function q4(t,e){const n=re(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function G4(t,e,n){const r=eO(t);try{const i=await function(o,a){const u=re(o),c=Ie.now(),h=a.reduce((y,S)=>y.add(S.key),he());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=fr(),A=he();return u.Ns.getEntries(y,h).next(I=>{S=I,S.forEach((_,v)=>{v.isValidDocument()||(A=A.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(I=>{f=I;const _=[];for(const v of a){const T=lD(v,f.get(v.key).overlayedDocument);T!=null&&_.push(new yi(v.key,T,F1(T.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,_,a)}).next(I=>{p=I;const _=I.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(y,I.batchId,_)})}).then(()=>({batchId:p.batchId,changes:Q1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ve(ce)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await sl(r,i.changes),await eh(r.remoteStore)}catch(i){const s=bm(i,"Failed to persist write");n.reject(s)}}async function NT(t,e){const n=re(t);try{const r=await o4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ge(o.hu,14607):i.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await sl(n,r,e)}catch(r){await uo(r)}}function w_(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=re(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)}),c&&Om(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K4(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ve(J.comparator);o=o.insert(s,St.newNoDocument(s,ne.min()));const a=he().add(s),u=new Qc(ne.min(),new Map,new Ve(ce),o,a);await NT(r,u),r.du=r.du.remove(s),r.Au.delete(e),Mm(r)}else await Ff(r.localStore,e,!1).then(()=>$f(r,e,n)).catch(uo)}async function Y4(t,e){const n=re(t),r=e.batch.batchId;try{const i=await s4(n.localStore,e);OT(n,r,null),DT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sl(n,i)}catch(i){await uo(i)}}async function X4(t,e,n){const r=re(t);try{const i=await function(o,a){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(ge(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);OT(r,e,n),DT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sl(r,i)}catch(i){await uo(i)}}function DT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function OT(t,e,n){const r=re(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $f(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||LT(t,r)})}function LT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Im(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Mm(t))}function E_(t,e,n){for(const r of n)r instanceof kT?(t.Ru.addReference(r.key,e),Q4(t,r)):r instanceof PT?(Y(Vm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||LT(t,r.key)):ee(19791,{wu:r})}function Q4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Vm,"New document in limbo: "+n),t.Eu.add(r),Mm(t))}function Mm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new F4(n)),t.du=t.du.insert(n,r),ST(t.remoteStore,new Ur(Mn(qc(n.path)),r,"TargetPurposeLimboResolution",$c.ce))}}async function sl(t,e,n){const r=re(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Cm.As(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,c){const h=re(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(c,p=>j.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>j.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!co(f))throw f;Y(xm,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),S=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,A)}}}(r.localStore,s))}async function J4(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Y(Vm,"User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(u=>{u.reject(new q(M.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sl(n,r.Ls)}}function Z4(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let i=he();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function VT(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.Pu.H_=V4.bind(null,e.eventManager),e.Pu.yu=M4.bind(null,e.eventManager),e}function eO(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}class mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return i4(this.persistence,new t4,e.initialUser,this.serializer)}Cu(e){return new vT(Sm.mi,this.serializer)}Du(e){return new h4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mc.provider={build:()=>new mc};class tO extends mc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof fc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new vT(r=>fc.mi(r,n),this.serializer)}}class Hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=J4.bind(null,this.syncEngine),await D4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L4}()}createDatastore(e){const n=Jc(e.databaseInfo.databaseId),r=function(s){return new g4(s)}(e.databaseInfo);return function(s,o,a,u){return new w4(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new T4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>w_(this.syncEngine,n,0),function(){return p_.v()?new p_:new d4}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const f=new z4(i,s,o,a,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);Y(Ji,"RemoteStore shutting down."),s.Ea.add(5),await il(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class nO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Y(ui,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(ui,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(ui,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _T(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function T_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rO(t);Y(ui,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>g_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>g_(e.remoteStore,i)),t._onlineComponents=e}async function rO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(ui,"Using user provided OfflineComponentProvider");try{await gd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xs("Error using user provided cache. Falling back to memory cache: "+n),await gd(t,new mc)}}else Y(ui,"Using default OfflineComponentProvider"),await gd(t,new tO(void 0));return t._offlineComponents}async function MT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(ui,"Using user provided OnlineComponentProvider"),await T_(t,t._uninitializedComponentsProvider._online)):(Y(ui,"Using default OnlineComponentProvider"),await T_(t,new Hf))),t._onlineComponents}function iO(t){return MT(t).then(e=>e.syncEngine)}async function gc(t){const e=await MT(t),n=e.eventManager;return n.onListen=B4.bind(null,e.syncEngine),n.onUnlisten=W4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=q4.bind(null,e.syncEngine),n}function sO(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new jm({next:p=>{h.Nu(),o.enqueueAndForget(()=>Dm(s,f));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?c.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Lm(qc(a.path),h,{includeMetadataChanges:!0,qa:!0});return Nm(s,f)}(await gc(t),t.asyncQueue,e,n,r)),r.promise}function oO(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new jm({next:p=>{h.Nu(),o.enqueueAndForget(()=>Dm(s,f)),p.fromCache&&u.source==="server"?c.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Lm(a,h,{includeMetadataChanges:!0,qa:!0});return Nm(s,f)}(await gc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firestore.googleapis.com",C_=!0;class x_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=C_}else this.host=e.host,this.ssl=e.ssl??C_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jD)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dN;switch(r.type){case"firstParty":return new gN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=S_.get(n);r&&(Y("ComponentProvider","Removing Datastore"),S_.delete(n),r.terminate())}(this),Promise.resolve()}}function aO(t,e,n,r={}){var c;t=Ut(t,th);const i=mi(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Jp(`https://${a}`),Zp("Firestore",!0)),s.host!==UT&&s.host!==a&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:a,ssl:i,emulatorOptions:r};if(!Ki(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Et.MOCK_USER;else{h=ME(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(p)}t._authCredentials=new fN(new R1(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,Ue._jsonSchema))return new Ue(e,r||null,new J(Ee.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Ye("string",Ue._jsonSchemaVersion),referencePath:Ye("string")};class Jr extends vi{constructor(e,n,r){super(e,n,qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new J(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function po(t,e,...n){if(t=We(t),k1("collection","path",e),t instanceof th){const r=Ee.fromString(e,...n);return jv(r),new Jr(t,null,r)}{if(!(t instanceof Ue||t instanceof Jr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return jv(r),new Jr(t.firestore,null,r)}}function Sn(t,e,...n){if(t=We(t),arguments.length===1&&(e=hm.newId()),k1("doc","path",e),t instanceof th){const r=Ee.fromString(e,...n);return Mv(r),new Ue(t,null,new J(r))}{if(!(t instanceof Ue||t instanceof Jr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return Mv(r),new Ue(t.firestore,t instanceof Jr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="AsyncQueue";class A_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ET(this,"async_queue_retry"),this._c=()=>{const r=md();r&&Y(I_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!co(e))throw e;Y(I_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,dr("INTERNAL UNHANDLED ERROR: ",R_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Pm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ee(47125,{Pc:R_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function R_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class pr extends th{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new A_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A_(e),this._firestoreClient=void 0,await e}}}function lO(t,e){const n=typeof t=="object"?t:nm(),r=typeof t=="string"?t:lc,i=Mc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=OE("firestore");s&&aO(i,...s)}return i}function nh(t){if(t._terminated)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uO(t),t._firestoreClient}function uO(t){var r,i,s;const e=t._freezeSettings(),n=function(a,u,c,h){return new DN(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new nO(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tn(mt.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new tn(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,tn._jsonSchema))return tn.fromBase64String(e.bytes)}}tn._jsonSchemaVersion="firestore/bytes/1.0",tn._jsonSchema={type:Ye("string",tn._jsonSchemaVersion),bytes:Ye("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(e){if(tl(e,Un._jsonSchema))return new Un(e.latitude,e.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:Ye("string",Un._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fn(e.vectorValues);throw new q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:Ye("string",Fn._jsonSchemaVersion),vectorValues:Ye("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=/^__.*__$/;class hO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class FT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:t})}}class Um{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zT(this.Ac)&&cO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jc(e)}Cc(e,n,r,i=!1){return new Um({Ac:e,methodName:n,Dc:r,path:ht.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sh(t){const e=t._freezeSettings(),n=Jc(t._databaseId);return new dO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BT(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);zm("Data must be an object, but it was:",o,r);const a=$T(r,o);let u,c;if(s.merge)u=new Wt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Wf(e,f,n);if(!o.contains(p))throw new q(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);WT(h,p)||h.push(p)}u=new Wt(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new hO(new Ot(a),u,c)}class oh extends ih{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}class Fm extends ih{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new za(e.serializer,eT(e.serializer,this.Fc));return new iD(e.path,n)}isEqual(e){return e instanceof Fm&&this.Fc===e.Fc}}function fO(t,e,n,r){const i=t.Cc(1,e,n);zm("Data must be an object, but it was:",i,r);const s=[],o=Ot.empty();gi(r,(u,c)=>{const h=Bm(e,u,n);c=We(c);const f=i.yc(h);if(c instanceof oh)s.push(h);else{const p=ol(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Wt(s);return new FT(o,a,i.fieldTransforms)}function pO(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Wf(e,r,n)],u=[i];if(s.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Wf(e,s[p])),u.push(s[p+1]);const c=[],h=Ot.empty();for(let p=a.length-1;p>=0;--p)if(!WT(c,a[p])){const y=a[p];let S=u[p];S=We(S);const A=o.yc(y);if(S instanceof oh)c.push(y);else{const I=ol(S,A);I!=null&&(c.push(y),h.set(y,I))}}const f=new Wt(c);return new FT(h,f,o.fieldTransforms)}function mO(t,e,n,r=!1){return ol(n,t.Cc(r?4:3,e))}function ol(t,e){if(HT(t=We(t)))return zm("Unsupported field value:",e,t),$T(t,e);if(t instanceof ih)return function(r,i){if(!zT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ol(a,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ie.fromDate(r);return{timestampValue:dc(i.serializer,s)}}if(r instanceof Ie){const s=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dc(i.serializer,s)}}if(r instanceof Un)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tn)return{bytesValue:cT(i.serializer,r._byteString)};if(r instanceof Ue){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Em(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fn)return function(o,a){return{mapValue:{fields:{[j1]:{stringValue:U1},[uc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return ym(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Bc(r)}`)}(t,e)}function $T(t,e){const n={};return N1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{const s=ol(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Un||t instanceof tn||t instanceof Ue||t instanceof ih||t instanceof Fn)}function zm(t,e,n){if(!HT(n)||!P1(n)){const r=Bc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Wf(t,e,n){if((e=We(e))instanceof rh)return e._internalPath;if(typeof e=="string")return Bm(t,e);throw yc("Field path arguments must be of type string or ",t,!1,void 0,n)}const gO=new RegExp("[~\\*/\\[\\]]");function Bm(t,e,n){if(e.search(gO)>=0)throw yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rh(...e.split("."))._internalPath}catch{throw yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new q(M.INVALID_ARGUMENT,a+t+u)}function WT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ah("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yO extends qT{data(){return super.data()}}function ah(t,e){return typeof e=="string"?Bm(t,e):e instanceof rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $m{}class KT extends $m{}function lh(t,e,...n){let r=[];e instanceof $m&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Hm).length,a=s.filter(u=>u instanceof uh).length;if(o>1||o>0&&a>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uh extends KT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uh(e,n,r)}_apply(e){const n=this._parse(e);return YT(e._query,n),new vi(e.firestore,e.converter,Of(e._query,n))}_parse(e){const n=sh(e.firestore);return function(s,o,a,u,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){b_(f,h);const S=[];for(const A of f)S.push(P_(u,s,A));p={arrayValue:{values:S}}}else p=P_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||b_(f,h),p=mO(a,o,f,h==="in"||h==="not-in");return Ke.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ch(t,e,n){const r=e,i=ah("where",t);return uh._create(i,r,n)}class Hm extends $m{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)YT(o,u),o=Of(o,u)}(e._query,n),new vi(e.firestore,e.converter,Of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wm extends KT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(s,o)}(e._query,this._field,this._direction);return new vi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ho(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qm(t,e="asc"){const n=e,r=ah("orderBy",t);return Wm._create(r,n)}function P_(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G1(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!J.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qv(t,new J(r))}if(n instanceof Ue)return qv(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function b_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vO{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[uc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>$e(o.doubleValue));return new Fn(n)}convertGeoPoint(e){return new Un($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const n=si(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ge(gT(r),9688,{name:e});const i=new Va(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||dr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ui extends qT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ah("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ui._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ui._jsonSchema={type:Ye("string",Ui._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class xu extends Ui{data(e={}){return super.data(e)}}class Fi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xu(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_O(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _O(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){t=Ut(t,Ue);const e=Ut(t.firestore,pr);return sO(nh(e),t._key).then(n=>eS(e,t,n))}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:Ye("string",Fi._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class Gm extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function Km(t){t=Ut(t,vi);const e=Ut(t.firestore,pr),n=nh(e),r=new Gm(e);return GT(t._query),oO(n,t._query).then(i=>new Fi(e,r,t,i))}function wO(t,e,n){t=Ut(t,Ue);const r=Ut(t.firestore,pr),i=XT(t.converter,e,n);return hh(r,[BT(sh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function al(t,e,n,...r){t=Ut(t,Ue);const i=Ut(t.firestore,pr),s=sh(i);let o;return o=typeof(e=We(e))=="string"||e instanceof rh?pO(s,"updateDoc",t._key,e,n,r):fO(s,"updateDoc",t._key,e),hh(i,[o.toMutation(t._key,on.exists(!0))])}function JT(t){return hh(Ut(t.firestore,pr),[new vm(t._key,on.none())])}function ZT(t,e){const n=Ut(t.firestore,pr),r=Sn(t),i=XT(t.converter,e);return hh(n,[BT(sh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function EO(t,...e){var u,c,h;t=We(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||k_(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(k_(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(c=f.error)==null?void 0:c.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,a;if(t instanceof Ue)o=Ut(t.firestore,pr),a=qc(t._key.path),s={next:f=>{e[r]&&e[r](eS(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Ut(t,vi);o=Ut(f.firestore,pr),a=f._query;const p=new Gm(o);s={next:y=>{e[r]&&e[r](new Fi(o,p,f,y))},error:e[r+1],complete:e[r+2]},GT(t._query)}return function(p,y,S,A){const I=new jm(A),_=new Lm(y,I,S);return p.asyncQueue.enqueueAndForget(async()=>Nm(await gc(p),_)),()=>{I.Nu(),p.asyncQueue.enqueueAndForget(async()=>Dm(await gc(p),_))}}(nh(o),a,i,s)}function hh(t,e){return function(r,i){const s=new rr;return r.asyncQueue.enqueueAndForget(async()=>G4(await iO(r),i,s)),s.promise}(nh(t),e)}function eS(t,e,n){const r=n.docs.get(e._key),i=new Gm(t);return new Ui(t,i,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}function TO(t){return new Fm("increment",t)}(function(e,n=!0){(function(i){lo=i})(rs),Yi(new ni("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new pr(new pN(r.getProvider("auth-internal")),new yN(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(c.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),On(Dv,Ov,e),On(Dv,Ov,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firebasestorage.googleapis.com",nS="storageBucket",SO=2*60*1e3,CO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze extends Hn{constructor(e,n,r=0){super(yd(e),`Firebase Storage: ${n} (${yd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fe||(Fe={}));function yd(t){return"storage/"+t}function Ym(){const t="An unknown error occurred, please check the error payload for server response.";return new ze(Fe.UNKNOWN,t)}function xO(t){return new ze(Fe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function IO(t){return new ze(Fe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ze(Fe.UNAUTHENTICATED,t)}function RO(){return new ze(Fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kO(t){return new ze(Fe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function PO(){return new ze(Fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bO(){return new ze(Fe.CANCELED,"User canceled the upload/download.")}function NO(t){return new ze(Fe.INVALID_URL,"Invalid URL '"+t+"'.")}function DO(t){return new ze(Fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OO(){return new ze(Fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nS+"' property when initializing the app?")}function LO(){return new ze(Fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VO(){return new ze(Fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MO(t){return new ze(Fe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function qf(t){return new ze(Fe.INVALID_ARGUMENT,t)}function rS(){return new ze(Fe.APP_DELETED,"The Firebase app was deleted.")}function jO(t){return new ze(Fe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fa(t,e){return new ze(Fe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fo(t){throw new ze(Fe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qt.makeFromUrl(e,n)}catch{return new qt(e,"")}if(r.path==="")return r;throw DO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),S={bucket:1,path:3},A=n===tS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",_=new RegExp(`^https?://${A}/${i}/${I}`,"i"),T=[{regex:a,indices:u,postModify:s},{regex:y,indices:S,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<T.length;D++){const V=T[D],U=V.regex.exec(e);if(U){const C=U[V.indices.bucket];let E=U[V.indices.path];E||(E=""),r=new qt(C,E),V.postModify(r);break}}if(r==null)throw NO(e);return r}}class UO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...I){c||(c=!0,e.apply(null,I))}function f(I){i=setTimeout(()=>{i=null,t(y,u())},I)}function p(){s&&clearTimeout(s)}function y(I,..._){if(c){p();return}if(I){p(),h.call(null,I,..._);return}if(u()||o){p(),h.call(null,I,..._);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,f(T)}let S=!1;function A(I){S||(S=!0,p(),!c&&(i!==null?(I||(a=2),clearTimeout(i),f(0)):I||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function zO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){return t!==void 0}function $O(t){return typeof t=="object"&&!Array.isArray(t)}function Xm(t){return typeof t=="string"||t instanceof String}function N_(t){return Qm()&&t instanceof Blob}function Qm(){return typeof Blob<"u"}function D_(t,e,n,r){if(r<e)throw qf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw qf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function iS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var zi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zi||(zi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,r,i,s,o,a,u,c,h,f,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,A)=>{this.resolve_=S,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Xl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zi.NO_ERROR,u=s.getStatus();if(!a||HO(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===zi.ABORT;r(!1,new Xl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Xl(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());BO(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Ym();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?rS():bO();o(u)}else{const u=PO();o(u)}};this.canceled_?n(!1,new Xl(!1,null,!0)):this.backoffId_=FO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function qO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function XO(t,e,n,r,i,s,o=!0,a=!1){const u=iS(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return KO(h,e),qO(h,n),GO(h,s),YO(h,r),new WO(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JO(...t){const e=QO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qm())return new Blob(t);throw new ze(Fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ZO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){if(typeof atob>"u")throw MO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vd{constructor(e,n){this.data=e,this.contentType=n||null}}function tL(t,e){switch(t){case bn.RAW:return new vd(sS(e));case bn.BASE64:case bn.BASE64URL:return new vd(oS(t,e));case bn.DATA_URL:return new vd(rL(e),iL(e))}throw Ym()}function sS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function nL(t){let e;try{e=decodeURIComponent(t)}catch{throw fa(bn.DATA_URL,"Malformed data URL.")}return sS(e)}function oS(t,e){switch(t){case bn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=eL(e)}catch(i){throw i.message.includes("polyfill")?i:fa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class aS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw fa(bn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=sL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function rL(t){const e=new aS(t);return e.base64?oS(bn.BASE64,e.rest):nL(e.rest)}function iL(t){return new aS(t).contentType}function sL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){let r=0,i="";N_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(N_(this.data_)){const r=this.data_,i=ZO(r,e,n);return i===null?null:new Vr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vr(r,!0)}}static getBlob(...e){if(Qm()){const n=e.map(r=>r instanceof Vr?r.data_:r);return new Vr(JO.apply(null,n))}else{const n=e.map(o=>Xm(o)?tL(bn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Vr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t){let e;try{e=JSON.parse(t)}catch{return null}return $O(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t,e){return e}class At{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||lL}}let Ql=null;function uL(t){return!Xm(t)||t.length<2?t:uS(t)}function cS(){if(Ql)return Ql;const t=[];t.push(new At("bucket")),t.push(new At("generation")),t.push(new At("metageneration")),t.push(new At("name","fullPath",!0));function e(s,o){return uL(o)}const n=new At("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new At("size");return i.xform=r,t.push(i),t.push(new At("timeCreated")),t.push(new At("updated")),t.push(new At("md5Hash",null,!0)),t.push(new At("cacheControl",null,!0)),t.push(new At("contentDisposition",null,!0)),t.push(new At("contentEncoding",null,!0)),t.push(new At("contentLanguage",null,!0)),t.push(new At("contentType",null,!0)),t.push(new At("metadata","customMetadata",!0)),Ql=t,Ql}function cL(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new qt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function hL(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return cL(r,t),r}function hS(t,e,n){const r=lS(e);return r===null?null:hL(t,r,n)}function dL(t,e,n,r){const i=lS(e);if(i===null||!Xm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),y=Jm(p,n,r),S=iS({alt:"media",token:c});return y+S})[0]}function fL(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class dS{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){if(!t)throw Ym()}function pL(t,e){function n(r,i){const s=hS(t,i,e);return fS(s!==null),s}return n}function mL(t,e){function n(r,i){const s=hS(t,i,e);return fS(s!==null),dL(s,i,t.host,t._protocol)}return n}function pS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=RO():i=AO():n.getStatus()===402?i=IO(t.bucket):n.getStatus()===403?i=kO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function gL(t){const e=pS(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=xO(t.path)),s.serverResponse=i.serverResponse,s}return n}function yL(t,e,n){const r=e.fullServerUrl(),i=Jm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new dS(i,s,mL(t,n),o);return a.errorHandler=gL(e),a}function vL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _L(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=vL(null,e)),r}function wL(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let D=0;D<2;D++)T=T+Math.random().toString().slice(2);return T}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=_L(e,r,i),h=fL(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",y=Vr.getBlob(f,r,p);if(y===null)throw LO();const S={name:c.fullPath},A=Jm(s,t.host,t._protocol),I="POST",_=t.maxUploadRetryTime,v=new dS(A,I,pL(t,n),_);return v.urlParams=S,v.headers=o,v.body=y.uploadData(),v.errorHandler=pS(e),v}class EL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Fo("cannot .send() more than once");if(mi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TL extends EL{initXhr(){this.xhr_.responseType="text"}}function mS(){return new TL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this._service=e,n instanceof qt?this._location=n:this._location=qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zi(e,n)}get root(){const e=new qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uS(this._location.path)}get storage(){return this._service}get parent(){const e=oL(this._location.path);if(e===null)return null;const n=new qt(this._location.bucket,e);return new Zi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jO(e)}}function SL(t,e,n){t._throwIfRoot("uploadBytes");const r=wL(t.storage,t._location,cS(),new Vr(e,!0),n);return t.storage.makeRequestWithTokens(r,mS).then(i=>({metadata:i,ref:t}))}function CL(t){t._throwIfRoot("getDownloadURL");const e=yL(t.storage,t._location,cS());return t.storage.makeRequestWithTokens(e,mS).then(n=>{if(n===null)throw VO();return n})}function xL(t,e){const n=aL(t._location.path,e),r=new qt(t._location.bucket,n);return new Zi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){return/^[A-Za-z]+:\/\//.test(t)}function AL(t,e){return new Zi(t,e)}function gS(t,e){if(t instanceof Zm){const n=t;if(n._bucket==null)throw OO();const r=new Zi(n,n._bucket);return e!=null?gS(r,e):r}else return e!==void 0?xL(t,e):t}function RL(t,e){if(e&&IL(e)){if(t instanceof Zm)return AL(t,e);throw qf("To use ref(service, url), the first argument must be a Storage instance.")}else return gS(t,e)}function O_(t,e){const n=e==null?void 0:e[nS];return n==null?null:qt.makeFromBucketSpec(n,t)}function kL(t,e,n,r={}){t.host=`${e}:${n}`;const i=mi(e);i&&(Jp(`https://${t.host}/b`),Zp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ME(s,t.app.options.projectId))}class Zm{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=tS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SO,this._maxUploadRetryTime=CO,this._requests=new Set,i!=null?this._bucket=qt.makeFromBucketSpec(i,this._host):this._bucket=O_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qt.makeFromBucketSpec(this._url,e):this._bucket=O_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new UO(rS());{const o=XO(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const L_="@firebase/storage",V_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="storage";function PL(t,e,n){return t=We(t),SL(t,e,n)}function bL(t){return t=We(t),CL(t)}function NL(t,e){return t=We(t),RL(t,e)}function DL(t=nm(),e){t=We(t);const r=Mc(t,yS).getImmediate({identifier:e}),i=OE("storage");return i&&OL(r,...i),r}function OL(t,e,n,r={}){kL(t,e,n,r)}function LL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Zm(n,r,i,e,rs)}function VL(){Yi(new ni(yS,LL,"PUBLIC").setMultipleInstances(!0)),On(L_,V_,""),On(L_,V_,"esm2020")}VL();const ML={apiKey:"AIzaSyCFQEN6wjLDKcUrP4UxVneMA1cNKtvRGY8",authDomain:"econotas-app.firebaseapp.com",projectId:"econotas-app",storageBucket:"econotas-app.firebasestorage.app",messagingSenderId:"237857251178",appId:"1:237857251178:web:bd4b78051ddf501d714f13"},eg=FE(ML),Bt=cN(eg),ft=lO(eg),vS=DL(eg),_S=async()=>{try{return(await Gb(Bt)).user}catch(t){throw console.error("Error signing in anonymously:",t),t}},wS=async(t,e)=>{try{const n=NL(vS,`audio/${e}.webm`),r=await PL(n,t);return await bL(r.ref)}catch(n){throw console.error("Error uploading audio:",n),n}},ES=async t=>{try{return(await ZT(po(ft,"sessions"),t)).id}catch(e){throw console.error("Error saving session:",e),e}},TS=async t=>{try{const e=Sn(ft,"sessions",t),n=await QT(e);return n.exists()?{id:n.id,...n.data()}:(console.log("No such session!"),null)}catch(e){throw console.error("Error getting session:",e),e}},SS=async t=>{try{const e=lh(po(ft,"sessions"),ch("userId","==",t),qm("createdAt","desc")),n=await Km(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r}catch(e){throw console.error("Error getting user sessions:",e),e}},CS=async t=>{try{const e=Sn(ft,"sessions",t);return await JT(e),!0}catch(e){throw console.error("Error deleting session:",e),e}},xS=async(t,e)=>{try{const n=Sn(ft,"sessions",t);return await al(n,e),!0}catch(n){throw console.error("Error updating session:",n),n}},IS=async t=>{try{return(await ZT(po(ft,"comments"),{...t,createdAt:new Date,updatedAt:new Date})).id}catch(e){throw console.error("Error adding comment:",e),e}},jL=async t=>{try{const e=lh(po(ft,"comments"),ch("sessionId","==",t),qm("timestamp","asc")),n=await Km(e),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r}catch(e){throw console.error("Error getting comments:",e),e}},AS=async(t,e)=>{try{const n=Sn(ft,"comments",t);return await al(n,{text:e,updatedAt:new Date}),!0}catch(n){throw console.error("Error updating comment:",n),n}},RS=async t=>{try{const e=Sn(ft,"comments",t);return await JT(e),!0}catch(e){throw console.error("Error deleting comment:",e),e}},kS=(t,e)=>{try{const n=lh(po(ft,"comments"),ch("sessionId","==",t),qm("timestamp","asc"));return EO(n,r=>{const i=[];r.forEach(s=>{i.push({id:s.id,...s.data()})}),e(i)},r=>{console.error("Error in comment subscription:",r)})}catch(n){throw console.error("Error setting up comment subscription:",n),n}},PS=async t=>{try{const e=Sn(ft,"sessions",t);return await al(e,{viewCount:TO(1)}),!0}catch(e){return console.error("Error incrementing view count:",e),!1}},bS=async(t,e,n,r="")=>{try{const i=`${t}_${e}`,s=Sn(ft,"ratings",i);await wO(s,{sessionId:t,userId:e,rating:n,comment:r,updatedAt:new Date},{merge:!0});const o=lh(po(ft,"ratings"),ch("sessionId","==",t)),a=await Km(o);let u=0,c=0;const h={1:0,2:0,3:0,4:0,5:0};a.forEach(y=>{const S=y.data().rating;u+=S,c++,h[S]!==void 0&&h[S]++});const f=c>0?u/c:0,p=Sn(ft,"sessions",t);return await al(p,{ratingAverage:f,ratingCount:c,ratingBreakdown:h}),{average:f,count:c}}catch(i){throw console.error("Error adding rating:",i),i}},NS=async(t,e)=>{try{const n=`${t}_${e}`,r=Sn(ft,"ratings",n),i=await QT(r);return i.exists()?i.data():null}catch(n){return console.error("Error getting user rating:",n),null}},DS=async(t,e)=>{try{const n=Sn(ft,"sessions",t);await al(n,{transcription:{segments:e.segments||[],fullText:e.fullText||"",language:e.language||"es-ES",generatedAt:new Date}}),console.log(" Transcription saved successfully")}catch(n){throw console.error("Error saving transcription:",n),n}},UL=Object.freeze(Object.defineProperty({__proto__:null,addComment:IS,addRating:bS,auth:Bt,db:ft,deleteComment:RS,deleteSession:CS,getSession:TS,getSessionComments:jL,getUserRating:NS,getUserSessions:SS,incrementViewCount:PS,saveSession:ES,saveTranscription:DS,signInUser:_S,storage:vS,subscribeToComments:kS,updateComment:AS,updateSession:xS,uploadAudio:wS},Symbol.toStringTag,{value:"Module"})),FL=({segments:t=[],currentTime:e=0,onSeekToTime:n,onExport:r,isRecording:i=!1})=>{const[s,o]=P.useState(""),[a,u]=P.useState([]),c=P.useRef(null),h=t.findIndex(S=>e>=S.startTime&&e<=S.endTime);P.useEffect(()=>{c.current&&h>=0&&c.current.scrollIntoView({behavior:"smooth",block:"center"})},[h]),P.useEffect(()=>{if(!s.trim()){u([]);return}const S=s.toLowerCase(),A=t.map((I,_)=>({...I,index:_,matches:I.text.toLowerCase().includes(S)})).filter(I=>I.matches);u(A)},[s,t]);const f=S=>{const A=Math.floor(S/1e3),I=Math.floor(A/60),_=A%60;return`${I}:${_.toString().padStart(2,"0")}`},p=(S,A)=>A?S.split(new RegExp(`(${A})`,"gi")).map((_,v)=>_.toLowerCase()===A.toLowerCase()?g.jsx("mark",{className:"bg-yellow-400 text-slate-900 px-0.5 rounded",children:_},v):_):S,y=s?a:t;return g.jsxs("div",{className:"h-full flex flex-col bg-slate-800 border-l border-slate-700",children:[g.jsxs("div",{className:"p-4 border-b border-slate-700",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Qu,{className:"w-5 h-5 text-indigo-400"}),g.jsx("h3",{className:"font-semibold text-white",children:"Transcripcin"})]}),t.length>0&&g.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar transcripcin",children:g.jsx(Qp,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(IE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),g.jsx("input",{type:"text",placeholder:"Buscar en transcripcin...",value:s,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-8 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 text-sm"}),s&&g.jsx("button",{onClick:()=>o(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 hover:text-white",children:g.jsx(pi,{className:"w-4 h-4"})})]}),s&&g.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[a.length," resultado",a.length!==1?"s":""," encontrado",a.length!==1?"s":""]})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:y.length===0?g.jsx("div",{className:"text-center py-12 text-slate-400",children:i?g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-red-500/20 flex items-center justify-center",children:g.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})}),g.jsx("p",{className:"text-sm",children:"Escuchando..."}),g.jsx("p",{className:"text-xs",children:"Habla claramente para transcribir"})]}):s?g.jsx("p",{className:"text-sm",children:"No se encontraron resultados"}):g.jsxs("div",{className:"space-y-2",children:[g.jsx(Qu,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),g.jsx("p",{className:"text-sm",children:"No hay transcripcin disponible"}),g.jsx("p",{className:"text-xs",children:"Inicia una grabacin para transcribir"})]})}):y.map((S,A)=>{const I=A===h,_=s?S.index:A;return g.jsx("div",{ref:I?c:null,onClick:()=>n&&n(S.startTime),className:`p-3 rounded-lg cursor-pointer transition-all ${I?"bg-indigo-500/20 border border-indigo-500/50 shadow-lg":"bg-slate-700/50 border border-transparent hover:bg-slate-700 hover:border-slate-600"}`,children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("span",{className:`text-xs font-mono px-2 py-0.5 rounded ${I?"bg-indigo-500 text-white":"bg-slate-600 text-slate-300"}`,children:f(S.startTime)})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:`text-sm leading-relaxed ${I?"text-white font-medium":"text-slate-200"}`,children:s?p(S.text,s):S.text}),S.confidence&&S.confidence<.7&&g.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:" Baja confianza"})]}),I&&g.jsx(kR,{className:"w-4 h-4 text-indigo-400 flex-shrink-0 animate-pulse"})]})},_)})}),t.length>0&&g.jsx("div",{className:"p-3 border-t border-slate-700 bg-slate-800/50",children:g.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[g.jsxs("span",{children:[t.length," segmento",t.length!==1?"s":""]}),g.jsxs("span",{children:[t.reduce((S,A)=>S+A.text.split(" ").length,0)," palabras"]})]})})]})},Pn=({onClick:t,disabled:e=!1,variant:n="primary",children:r,label:i,className:s=""})=>{const o="flex items-center justify-center p-2 rounded-xl transition-transform duration-200 ease-out font-medium",a={primary:"bg-gradient-to-r from-[var(--accent)] to-[#a78bfa] text-white shadow-lg shadow-indigo-500/20",secondary:"bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] hover:bg-[var(--bg)]",danger:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/20",warning:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-black shadow-lg shadow-yellow-500/20",success:"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/20",info:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/20",ghost:"text-[var(--text)] hover:bg-[var(--bg-card)]"}[n]||"",u=e?"opacity-50 cursor-not-allowed":"hover:scale-105 active:scale-95";return g.jsx("button",{onClick:t,disabled:e,"aria-label":i,className:`${o} ${a} ${u} ${s}`,children:r})},OS=({isOpen:t,onClose:e,type:n="info",title:r,message:i,confirmText:s="OK"})=>{if(P.useEffect(()=>{const p=y=>{y.key==="Escape"&&t&&e()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t,e]),P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const o={info:{icon:BR,bgColor:"bg-blue-500",textColor:"text-blue-400",borderColor:"border-blue-500/30",buttonVariant:"info"},success:{icon:DR,bgColor:"bg-green-500",textColor:"text-green-400",borderColor:"border-green-500/30",buttonVariant:"success"},warning:{icon:kE,bgColor:"bg-yellow-500",textColor:"text-yellow-400",borderColor:"border-yellow-500/30",buttonVariant:"warning"},error:{icon:bR,bgColor:"bg-red-500",textColor:"text-red-400",borderColor:"border-red-500/30",buttonVariant:"danger"}},{icon:a,bgColor:u,textColor:c,borderColor:h,buttonVariant:f}=o[n];return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e,children:g.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl max-w-md w-full border border-[var(--border)] overflow-hidden animate-scale-in",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:`flex items-center gap-3 p-6 border-b ${h}`,children:[g.jsx("div",{className:`w-12 h-12 rounded-full ${u}/10 flex items-center justify-center`,children:g.jsx(a,{className:`w-6 h-6 ${c}`})}),g.jsx("div",{className:"flex-1",children:g.jsx("h3",{className:"text-xl font-bold text-[var(--text)]",children:r})}),g.jsx(Pn,{onClick:e,variant:"ghost",className:"p-1 rounded-lg",label:"Cerrar",children:g.jsx(pi,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"p-6",children:g.jsx("p",{className:"text-[var(--text)] opacity-80 leading-relaxed",children:i})}),g.jsx("div",{className:"p-6 pt-0 flex justify-end",children:g.jsx(Pn,{onClick:e,variant:f,className:"px-6 py-2 rounded-lg font-semibold shadow-lg",children:s})})]})})},LS=({isOpen:t,onConfirm:e,onCancel:n,onClose:r,title:i,message:s,confirmText:o="Confirmar",cancelText:a="Cancelar",variant:u="default"})=>{const c=()=>{n&&n(),r&&r()},h=()=>{e&&e(),r&&r()};if(P.useEffect(()=>{const p=y=>{y.key==="Escape"&&t&&c()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t]),P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const f=u==="destructive";return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:c,children:g.jsxs("div",{className:"bg-[var(--bg-card)] rounded-2xl shadow-2xl max-w-md w-full border border-[var(--border)] overflow-hidden animate-scale-in",onClick:p=>p.stopPropagation(),children:[g.jsxs("div",{className:`flex items-center gap-3 p-6 border-b ${f?"border-red-500/30":"border-[var(--border)]"}`,children:[f&&g.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center",children:g.jsx(kE,{className:"w-6 h-6 text-red-400"})}),g.jsx("div",{className:"flex-1",children:g.jsx("h3",{className:"text-xl font-bold text-[var(--text)]",children:i})}),g.jsx(Pn,{onClick:c,variant:"ghost",className:"p-1 rounded-lg",label:"Cerrar",children:g.jsx(pi,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"p-6",children:g.jsx("p",{className:"text-[var(--text)] opacity-80 leading-relaxed",children:s})}),g.jsxs("div",{className:"p-6 pt-0 flex justify-end gap-3",children:[g.jsx(Pn,{onClick:c,variant:"secondary",className:"px-6 py-2 rounded-lg font-semibold",children:a}),g.jsx(Pn,{onClick:h,variant:f?"danger":"primary",className:"px-6 py-2 rounded-lg font-semibold shadow-lg",autoFocus:!0,children:o})]})]})})};var rn=function(t,e){return Number(t.toFixed(e))},zL=function(t,e){return e},ke=function(t,e,n){n&&typeof n=="function"&&n(t,e)},BL=function(t){return-Math.cos(t*Math.PI)/2+.5},$L=function(t){return t},HL=function(t){return t*t},WL=function(t){return t*(2-t)},qL=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},GL=function(t){return t*t*t},KL=function(t){return--t*t*t+1},YL=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},XL=function(t){return t*t*t*t},QL=function(t){return 1- --t*t*t*t},JL=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},ZL=function(t){return t*t*t*t*t},eV=function(t){return 1+--t*t*t*t*t},tV=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},VS={easeOut:BL,linear:$L,easeInQuad:HL,easeOutQuad:WL,easeInOutQuad:qL,easeInCubic:GL,easeOutCubic:KL,easeInOutCubic:YL,easeInQuart:XL,easeOutQuart:QL,easeInOutQuart:JL,easeInQuint:ZL,easeOutQuint:eV,easeInOutQuint:tV},MS=function(t){typeof t=="number"&&cancelAnimationFrame(t)},gn=function(t){t.mounted&&(MS(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function jS(t,e,n,r){if(t.mounted){var i=new Date().getTime(),s=1;gn(t),t.animation=function(){if(!t.mounted)return MS(t.animation);var o=new Date().getTime()-i,a=o/n,u=VS[e],c=u(a);o>=n?(r(s),t.animation=null):t.animation&&(r(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function nV(t){var e=t.scale,n=t.positionX,r=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(r))}function _i(t,e,n,r){var i=nV(e);if(!(!t.mounted||!i)){var s=t.setTransformState,o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY,h=e.scale-a,f=e.positionX-u,p=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):jS(t,r,n,function(y){var S=a+h*y,A=u+f*y,I=c+p*y;s(S,A,I)})}}function rV(t,e,n){var r=t.offsetWidth,i=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,u=o*n,c=r-a,h=i-u;return{wrapperWidth:r,wrapperHeight:i,newContentWidth:a,newDiffWidth:c,newContentHeight:u,newDiffHeight:h}}var iV=function(t,e,n,r,i,s,o){var a=t>e?n*(o?1:.5):0,u=r>i?s*(o?1:.5):0,c=t-e-a,h=a,f=r-i-u,p=u;return{minPositionX:c,maxPositionX:h,minPositionY:f,maxPositionY:p}},tg=function(t,e){var n=t.wrapperComponent,r=t.contentComponent,i=t.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var s=rV(n,r,e),o=s.wrapperWidth,a=s.wrapperHeight,u=s.newContentWidth,c=s.newDiffWidth,h=s.newContentHeight,f=s.newDiffHeight,p=iV(o,u,c,a,h,f,!!i);return p},Gf=function(t,e,n,r){return r?t<e?rn(e,2):t>n?rn(n,2):rn(t,2):rn(t,2)},Bi=function(t,e){var n=tg(t,e);return t.bounds=n,n};function ll(t,e,n,r,i,s,o){var a=n.minPositionX,u=n.minPositionY,c=n.maxPositionX,h=n.maxPositionY,f=0,p=0;o&&(f=i,p=s);var y=Gf(t,a-f,c+f,r),S=Gf(e,u-p,h+p,r);return{x:y,y:S}}function dh(t,e,n,r,i,s){var o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY,h=r-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:c};var f=u-e*h,p=c-n*h,y=ll(f,p,i,s,0,0,null);return y}function ul(t,e,n,r,i){var s=i?r:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var M_=function(t,e){var n=t.setup.panning.excluded,r=t.isInitialized,i=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(h){return h instanceof Element?i==null?void 0:i.contains(h):!1}):i==null?void 0:i.contains(s),u=r&&s&&a;if(!u)return!1;var c=fh(s,n);return!c},j_=function(t){var e=t.isInitialized,n=t.isPanning,r=t.setup,i=r.panning.disabled,s=e&&n&&!i;return!!s},sV=function(t,e){var n=t.transformState,r=n.positionX,i=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-r,y:o-i}},oV=function(t,e){var n=e.touches,r=t.transformState,i=r.positionX,s=r.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,u=n[0].clientY;t.startCoords={x:a-i,y:u-s}}};function aV(t){var e=t.transformState,n=e.positionX,r=e.positionY,i=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,u=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var h=t.bounds,f=h.maxPositionX,p=h.minPositionX,y=h.maxPositionY,S=h.minPositionY,A=n>f||n<p,I=r>y||r<S,_=n>f?c.offsetWidth:t.setup.minPositionX||0,v=r>y?c.offsetHeight:t.setup.minPositionY||0,T=dh(t,_,v,i,t.bounds,a||u),D=T.x,V=T.y;return{scale:i,positionX:A?D:n,positionY:I?V:r}}}function US(t,e,n,r,i){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,u=t.transformState,c=u.scale,h=u.positionX,f=u.positionY;if(!(o===null||a===null||e===h&&n===f)){var p=ll(e,n,a,s,r,i,o),y=p.x,S=p.y;t.setTransformState(c,y,S)}}var lV=function(t,e,n){var r=t.startCoords,i=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,u=i.positionX,c=i.positionY;if(!r)return{x:u,y:c};var h=e-r.x,f=n-r.y,p=o?u:h,y=a?c:f;return{x:p,y}},ci=function(t,e){var n=t.setup,r=t.transformState,i=r.scale,s=n.minScale,o=n.disablePadding;return e>0&&i>=s&&!o?e:0},uV=function(t){var e=t.mounted,n=t.setup,r=n.disabled,i=n.velocityAnimation,s=t.transformState.scale,o=i.disabled,a=!o||s>1||!r||e;return!!a},cV=function(t){var e=t.mounted,n=t.velocity,r=t.bounds,i=t.setup,s=i.disabled,o=i.velocityAnimation,a=t.transformState.scale,u=o.disabled,c=!u||a>1||!s||e;return!(!c||!n||!r)};function hV(t,e){var n=t.setup.velocityAnimation,r=n.equalToMove,i=n.animationTime,s=n.sensitivity;return r?i*e*s:i}function U_(t,e,n,r,i,s,o,a,u,c){if(i){if(e>o&&n>o){var h=o+(t-o)*c;return h>u?u:h<o?o:h}if(e<s&&n<s){var h=s+(t-s)*c;return h<a?a:h>s?s:h}}return r?e:Gf(t,s,o,i)}function dV(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function fV(t,e){var n=uV(t);if(n){var r=t.lastMousePosition,i=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,u=Date.now();if(r&&i&&o){var c=dV(o,a),h=e.x-r.x,f=e.y-r.y,p=h/c,y=f/c,S=u-i,A=h*h+f*f,I=Math.sqrt(A)/S;t.velocity={velocityX:p,velocityY:y,total:I}}t.lastMousePosition=e,t.velocityTime=u}}function pV(t){var e=t.velocity,n=t.bounds,r=t.setup,i=t.wrapperComponent,s=cV(t);if(!(!s||!e||!n||!i)){var o=e.velocityX,a=e.velocityY,u=e.total,c=n.maxPositionX,h=n.minPositionX,f=n.maxPositionY,p=n.minPositionY,y=r.limitToBounds,S=r.alignmentAnimation,A=r.zoomAnimation,I=r.panning,_=I.lockAxisY,v=I.lockAxisX,T=A.animationType,D=S.sizeX,V=S.sizeY,U=S.velocityAlignmentTime,C=U,E=hV(t,u),x=Math.max(E,C),R=ci(t,D),b=ci(t,V),N=R*i.offsetWidth/100,k=b*i.offsetHeight/100,ye=c+N,B=h-N,H=f+k,Z=p-k,z=t.transformState,Q=new Date().getTime();jS(t,T,x,function(G){var ie=t.transformState,me=ie.scale,at=ie.positionX,Se=ie.positionY,gt=new Date().getTime()-Q,yt=gt/C,It=VS[S.animationType],gr=1-It(Math.min(1,yt)),cn=1-G,os=at+o*cn,yr=Se+a*cn,as=U_(os,z.positionX,at,v,y,h,c,B,ye,gr),Ft=U_(yr,z.positionY,Se,_,y,p,f,Z,H,gr);(at!==os||Se!==yr)&&t.setTransformState(me,as,Ft)})}}function F_(t,e){var n=t.transformState.scale;gn(t),Bi(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?oV(t,e):sV(t,e)}function ng(t,e){var n=t.transformState.scale,r=t.setup,i=r.minScale,s=r.alignmentAnimation,o=s.disabled,a=s.sizeX,u=s.sizeY,c=s.animationTime,h=s.animationType,f=o||n<i||!a&&!u;if(!f){var p=aV(t);p&&_i(t,p,e??c,h)}}function z_(t,e,n){var r=t.startCoords,i=t.setup,s=i.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(r){var u=lV(t,e,n),c=u.x,h=u.y,f=ci(t,o),p=ci(t,a);fV(t,{x:c,y:h}),US(t,c,h,f,p)}}function mV(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,r=t.wrapperComponent,i=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=r==null?void 0:r.getBoundingClientRect(),o=i==null?void 0:i.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,u=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,h=(o==null?void 0:o.height)||0,f=a<c||u<h,p=!e&&n&&(n==null?void 0:n.total)>.1&&f;p?pV(t):ng(t)}}function rg(t,e,n,r){var i=t.setup,s=i.minScale,o=i.maxScale,a=i.limitToBounds,u=ul(rn(e,2),s,o,0,!1),c=Bi(t,u),h=dh(t,n,r,u,c,a),f=h.x,p=h.y;return{scale:u,positionX:f,positionY:p}}function FS(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,u=s.zoomAnimation,c=u.disabled,h=u.animationTime,f=u.animationType,p=c||r>=o;if((r>=1||a)&&ng(t),!(p||!i||!t.mounted)){var y=e||i.offsetWidth/2,S=n||i.offsetHeight/2,A=rg(t,o,y,S);A&&_i(t,A,h,f)}}var Zr=function(){return Zr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zr.apply(this,arguments)};function B_(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Jl={scale:1,positionX:0,positionY:0},zo={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Kf={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},zS=function(t){var e,n,r,i;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:Jl.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:Jl.scale,positionX:(r=t.initialPositionX)!==null&&r!==void 0?r:Jl.positionX,positionY:(i=t.initialPositionY)!==null&&i!==void 0?i:Jl.positionY}},$_=function(t){var e=Zr({},zo);return Object.keys(t).forEach(function(n){var r=typeof t[n]<"u",i=typeof zo[n]<"u";if(i&&r){var s=Object.prototype.toString.call(zo[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Zr(Zr({},zo[n]),t[n]):a?e[n]=B_(B_([],zo[n],!0),t[n]):e[n]=t[n]}}),e},BS=function(t,e,n){var r=t.transformState.scale,i=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,u=s.zoomAnimation,c=s.smooth,h=u.size;if(!i)throw new Error("Wrapper is not mounted");var f=c?r*Math.exp(e*n):r+e*n,p=ul(rn(f,3),a,o,h,!1);return p};function $S(t,e,n,r,i){var s=t.wrapperComponent,o=t.transformState,a=o.scale,u=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var h=s.offsetWidth,f=s.offsetHeight,p=(h/2-u)/a,y=(f/2-c)/a,S=BS(t,e,n),A=rg(t,S,p,y);if(!A)return console.error("Error during zoom event. New transformation state was not calculated.");_i(t,A,r,i)}function HS(t,e,n,r){var i=t.setup,s=t.wrapperComponent,o=i.limitToBounds,a=zS(t.props),u=t.transformState,c=u.scale,h=u.positionX,f=u.positionY;if(s){var p=tg(t,a.scale),y=ll(a.positionX,a.positionY,p,o,0,0,s),S={scale:a.scale,positionX:y.x,positionY:y.y};c===a.scale&&h===a.positionX&&f===a.positionY||(r==null||r(),_i(t,S,e,n))}}function gV(t,e,n,r){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*r.scale,u=s.y*r.scale;return{x:(i.x-o.x+a)/r.scale,y:(i.y-o.y+u)/r.scale}}function yV(t,e,n){var r=t.wrapperComponent,i=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,u=o.minScale,c=o.maxScale;if(!r||!i)return s;var h=r.getBoundingClientRect(),f=e.getBoundingClientRect(),p=gV(e,r,i,s),y=p.x,S=p.y,A=f.width/s.scale,I=f.height/s.scale,_=r.offsetWidth/A,v=r.offsetHeight/I,T=ul(n||Math.min(_,v),u,c,0,!1),D=(h.width-A*T)/2,V=(h.height-I*T)/2,U=(h.left-y)*T+D,C=(h.top-S)*T+V,E=tg(t,T),x=ll(U,C,E,a,0,0,r),R=x.x,b=x.y;return{positionX:R,positionY:b,scale:T}}var vV=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),$S(t,1,e,n,r)}},_V=function(t){return function(e,n,r){e===void 0&&(e=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),$S(t,-1,e,n,r)}},wV=function(t){return function(e,n,r,i,s){i===void 0&&(i=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,u=o.positionY,c=o.scale,h=t.wrapperComponent,f=t.contentComponent,p=t.setup.disabled;if(!(p||!h||!f)){var y={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?u:n,scale:Number.isNaN(r)?c:r};_i(t,y,i,s)}}},EV=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),HS(t,e,n)}},TV=function(t){return function(e,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var i=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=WS(e||i.scale,s,o);_i(t,a,n,r)}}},SV=function(t){return function(e,n,r,i){r===void 0&&(r=600),i===void 0&&(i="easeOut"),gn(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=yV(t,o,n);_i(t,a,r,i)}}},Yf=function(t){return{instance:t,zoomIn:vV(t),zoomOut:_V(t),setTransform:wV(t),resetTransform:EV(t),centerView:TV(t),zoomToElement:SV(t)}},CV=function(t){return{instance:t,state:t.transformState}},we=function(t){var e={};return Object.assign(e,CV(t)),Object.assign(e,Yf(t)),e},_d=!1;function wd(){try{var t={get passive(){return _d=!0,!1}};return t}catch{return _d=!1,_d}}var Zl=".".concat(Kf.wrapperClass),fh=function(t,e){return e.some(function(n){return t.matches("".concat(Zl," ").concat(n,", ").concat(Zl," .").concat(n,", ").concat(Zl," ").concat(n," *, ").concat(Zl," .").concat(n," *"))})},Xf=function(t){t&&clearTimeout(t)},xV=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},WS=function(t,e,n){var r=n.offsetWidth*t,i=n.offsetHeight*t,s=(e.offsetWidth-r)/2,o=(e.offsetHeight-i)/2;return{scale:t,positionX:s,positionY:o}};function IV(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var AV=function(t,e){var n=t.setup.wheel,r=n.disabled,i=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,u=t.isPanning,c=e.target,h=a&&!u&&!r&&c;if(!h||i&&!e.ctrlKey||s&&e.ctrlKey)return!1;var f=fh(c,o);return!f},RV=function(t){return t?t.deltaY<0?1:-1:0};function kV(t,e){var n=RV(t),r=zL(e,n);return r}function qS(t,e,n){var r=e.getBoundingClientRect(),i=0,s=0;if("clientX"in t)i=(t.clientX-r.left)/n,s=(t.clientY-r.top)/n;else{var o=t.touches[0];i=(o.clientX-r.left)/n,s=(o.clientY-r.top)/n}return(Number.isNaN(i)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:i,y:s}}var PV=function(t,e,n,r,i){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,u=a.maxScale,c=a.minScale,h=a.zoomAnimation,f=a.disablePadding,p=h.size,y=h.disabled;if(!o)throw new Error("Wrapper is not mounted");var S=s+e*n,A=r?!1:!y,I=ul(rn(S,3),c,u,p,A&&!f);return I},bV=function(t,e){var n=t.previousWheelEvent,r=t.transformState.scale,i=t.setup,s=i.maxScale,o=i.minScale;return n?r<s||r>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},NV=function(t,e){var n=t.setup.pinch,r=n.disabled,i=n.excluded,s=t.isInitialized,o=e.target,a=s&&!r&&o;if(!a)return!1;var u=fh(o,i);return!u},DV=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,r=t.pinchStartDistance,i=n&&!e&&r;return!!i},OV=function(t,e,n){var r=n.getBoundingClientRect(),i=t.touches,s=rn(i[0].clientX-r.left,5),o=rn(i[0].clientY-r.top,5),a=rn(i[1].clientX-r.left,5),u=rn(i[1].clientY-r.top,5);return{x:(s+a)/2/e,y:(o+u)/2/e}},GS=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},LV=function(t,e){var n=t.pinchStartScale,r=t.pinchStartDistance,i=t.setup,s=i.maxScale,o=i.minScale,a=i.zoomAnimation,u=i.disablePadding,c=a.size,h=a.disabled;if(!n||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var f=e/r,p=f*n;return ul(rn(p,2),o,s,c,!h&&!u)},VV=160,MV=100,jV=function(t,e){var n=t.props,r=n.onWheelStart,i=n.onZoomStart;t.wheelStopEventTimer||(gn(t),ke(we(t),e,r),ke(we(t),e,i))},UV=function(t,e){var n=t.props,r=n.onWheel,i=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,u=a.scale,c=o.limitToBounds,h=o.centerZoomedOut,f=o.zoomAnimation,p=o.wheel,y=o.disablePadding,S=o.smooth,A=f.size,I=f.disabled,_=p.step,v=p.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var T=kV(e,null),D=S?v*Math.abs(e.deltaY):_,V=PV(t,T,D,!e.ctrlKey);if(u!==V){var U=Bi(t,V),C=qS(e,s,u),E=I||A===0||h||y,x=c&&E,R=dh(t,C.x,C.y,V,U,x),b=R.x,N=R.y;t.previousWheelEvent=e,t.setTransformState(V,b,N),ke(we(t),e,r),ke(we(t),e,i)}},FV=function(t,e){var n=t.props,r=n.onWheelStop,i=n.onZoomStop;Xf(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(FS(t,e.x,e.y),t.wheelAnimationTimer=null)},MV);var s=bV(t,e);s&&(Xf(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,ke(we(t),e,r),ke(we(t),e,i))},VV))},KS=function(t){for(var e=0,n=0,r=0;r<2;r+=1)e+=t.touches[r].clientX,n+=t.touches[r].clientY;var i=e/2,s=n/2;return{x:i,y:s}},zV=function(t,e){var n=GS(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var r=KS(e);t.pinchLastCenterX=r.x,t.pinchLastCenterY=r.y,gn(t)},BV=function(t,e){var n=t.contentComponent,r=t.pinchStartDistance,i=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,u=o.centerZoomedOut,c=o.zoomAnimation,h=o.alignmentAnimation,f=c.disabled,p=c.size;if(!(r===null||!n)){var y=OV(e,s,n);if(!(!Number.isFinite(y.x)||!Number.isFinite(y.y))){var S=GS(e),A=LV(t,S),I=KS(e),_=I.x-(t.pinchLastCenterX||0),v=I.y-(t.pinchLastCenterY||0);if(!(A===s&&_===0&&v===0)){t.pinchLastCenterX=I.x,t.pinchLastCenterY=I.y;var T=Bi(t,A),D=f||p===0||u,V=a&&D,U=dh(t,y.x,y.y,A,T,V),C=U.x,E=U.y;t.pinchMidpoint=y,t.lastDistance=S;var x=h.sizeX,R=h.sizeY,b=ci(t,x),N=ci(t,R),k=C+_,ye=E+v,B=ll(k,ye,T,a,b,N,i),H=B.x,Z=B.y;t.setTransformState(A,H,Z)}}}},$V=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,FS(t,e==null?void 0:e.x,e==null?void 0:e.y)},YS=function(t,e){var n=t.props.onZoomStop,r=t.setup.doubleClick.animationTime;Xf(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,ke(we(t),e,n)},r)},HV=function(t,e){var n=t.props,r=n.onZoomStart,i=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;ke(we(t),e,r),HS(t,o,a,function(){return ke(we(t),e,i)}),YS(t,e)};function WV(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function qV(t,e){var n=t.setup,r=t.doubleClickStopEventTimer,i=t.transformState,s=t.contentComponent,o=i.scale,a=t.props,u=a.onZoomStart,c=a.onZoom,h=n.doubleClick,f=h.disabled,p=h.mode,y=h.step,S=h.animationTime,A=h.animationType;if(!f&&!r){if(p==="reset")return HV(t,e);if(!s)return console.error("No ContentComponent found");var I=WV(p,t.transformState.scale),_=BS(t,I,y);if(o!==_){ke(we(t),e,u);var v=qS(e,s,o),T=rg(t,_,v.x,v.y);if(!T)return console.error("Error during zoom event. New transformation state was not calculated.");ke(we(t),e,c),_i(t,T,S,A),YS(t,e)}}}var GV=function(t,e){var n=t.isInitialized,r=t.setup,i=t.wrapperComponent,s=r.doubleClick,o=s.disabled,a=s.excluded,u=e.target,c=i==null?void 0:i.contains(u),h=n&&u&&c&&!o;if(!h)return!1;var f=fh(u,a);return!f},KV=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,Bi(n,n.transformState.scale),n.setup=$_(r)},this.initializeWindowEvents=function(){var r,i,s=wd(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;(i=n.wrapperComponent)===null||i===void 0||i.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var r,i,s=wd(),o=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),gn(n),(i=n.observer)===null||i===void 0||i.disconnect()},this.handleInitializeWrapperEvents=function(r){var i=wd();r.addEventListener("wheel",n.onWheelZoom,i),r.addEventListener("dblclick",n.onDoubleClick,i),r.addEventListener("touchstart",n.onTouchPanningStart,i),r.addEventListener("touchmove",n.onTouchPanning,i),r.addEventListener("touchend",n.onTouchPanningStop,i)},this.handleInitialize=function(r,i){var s=!1,o=n.setup.centerOnInit,a=function(u,c){for(var h=0,f=u;h<f.length;h++){var p=f[h];if(p.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(u){u(we(n))}),n.observer=new ResizeObserver(function(u){if(a(u,r)||a(u,i))if(o&&!s){var c=i.offsetWidth,h=i.offsetHeight;(c>0||h>0)&&(s=!0,n.setCenter())}else gn(n),Bi(n,n.transformState.scale),ng(n,0)}),n.observer.observe(r),n.observer.observe(i)},this.onWheelZoom=function(r){var i=n.setup.disabled;if(!i){var s=AV(n,r);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(jV(n,r),UV(n,r),FV(n,r))}}},this.onWheelPanning=function(r){var i=n.setup,s=i.disabled,o=i.wheel,a=i.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var u=n.transformState,c=u.positionX,h=u.positionY,f=c-r.deltaX,p=h-r.deltaY,y=a.lockAxisX?c:f,S=a.lockAxisY?h:p,A=n.setup.alignmentAnimation,I=A.sizeX,_=A.sizeY,v=ci(n,I),T=ci(n,_);y===c&&S===h||US(n,y,S,v,T)}},this.onPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=M_(n,r);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),gn(n),F_(n,r),ke(we(n),r,s)))}}},this.onPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(!i){var o=j_(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(r.preventDefault(),r.stopPropagation(),z_(n,r.clientX,r.clientY),ke(we(n),r,s))}}},this.onPanningStop=function(r){var i=n.props.onPanningStop;n.isPanning&&(mV(n),ke(we(n),r,i))},this.onPinchStart=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!i){var u=NV(n,r);u&&(zV(n,r),gn(n),ke(we(n),r,o),ke(we(n),r,a))}},this.onPinch=function(r){var i=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!i){var u=DV(n);u&&(r.preventDefault(),r.stopPropagation(),BV(n,r),ke(we(n),r,o),ke(we(n),r,a))}},this.onPinchStop=function(r){var i=n.props,s=i.onPinchingStop,o=i.onZoomStop;n.pinchStartScale&&($V(n),ke(we(n),r,s),ke(we(n),r,o))},this.onTouchPanningStart=function(r){var i=n.setup.disabled,s=n.props.onPanningStart;if(!i){var o=M_(n,r);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!a){n.lastTouch=+new Date,gn(n);var u=r.touches,c=u.length===1,h=u.length===2;c&&(gn(n),F_(n,r),ke(we(n),r,s)),h&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var i=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(i)return;var o=j_(n);if(!o)return;r.preventDefault(),r.stopPropagation();var a=r.touches[0];z_(n,a.clientX,a.clientY),ke(we(n),r,s)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var i=n.setup.disabled;if(!i){var s=GV(n,r);s&&qV(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(i){return n.pressedKeys[i]}):!0},this.setTransformState=function(r,i,s){var o=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(i)&&!Number.isNaN(s)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=i,n.transformState.positionY=s,n.applyTransformation();var a=we(n);n.onChangeCallbacks.forEach(function(u){return u(a)}),ke(a,{scale:r,positionX:i,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=WS(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,i,s){return n.props.customTransform?n.props.customTransform(r,i,s):xV(r,i,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,i=r.scale,s=r.positionX,o=r.positionY,a=n.handleTransformStyles(s,o,i);n.contentComponent.style.transform=a}},this.getContext=function(){return we(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,i){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=i,Bi(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,i),n.initializeWindowEvents(),n.isInitialized=!0;var s=we(n);ke(s,void 0,n.props.onInit)},this.props=e,this.setup=$_(this.props),this.transformState=zS(this.props)}return t}(),ig=an.createContext(null),YV=function(t,e){return typeof t=="function"?t(e):t},XV=an.forwardRef(function(t,e){var n=P.useRef(new KV(t)).current,r=YV(t.children,Yf(n));return P.useImperativeHandle(e,function(){return Yf(n)},[n]),P.useEffect(function(){n.update(t)},[n,t]),an.createElement(ig.Provider,{value:n},r)});an.forwardRef(function(t,e){var n=P.useRef(null),r=P.useContext(ig);return P.useEffect(function(){return r.onChange(function(i){if(n.current){var s=0,o=0;n.current.style.transform=r.handleTransformStyles(s,o,1/i.instance.transformState.scale)}})},[r]),an.createElement("div",Zr({},t,{ref:IV([n,e])}))});function QV(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var JV=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,H_={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};QV(JV);var ZV=function(t){var e=t.children,n=t.wrapperClass,r=n===void 0?"":n,i=t.contentClass,s=i===void 0?"":i,o=t.wrapperStyle,a=t.contentStyle,u=t.wrapperProps,c=u===void 0?{}:u,h=t.contentProps,f=h===void 0?{}:h,p=P.useContext(ig),y=p.init,S=p.cleanupWindowEvents,A=P.useRef(null),I=P.useRef(null);return P.useEffect(function(){var _=A.current,v=I.current;return _!==null&&v!==null&&y&&(y==null||y(_,v)),function(){S==null||S()}},[]),an.createElement("div",Zr({},c,{ref:A,className:"".concat(Kf.wrapperClass," ").concat(H_.wrapper," ").concat(r),style:o}),an.createElement("div",Zr({},f,{ref:I,className:"".concat(Kf.contentClass," ").concat(H_.content," ").concat(s),style:a}),e))};const eM=({canvasRef:t,strokes:e,onPointerDown:n,onPointerMove:r,onPointerUp:i,mode:s,readOnly:o})=>{const a=an.useRef(null),u=h=>{typeof window<"u"&&sessionStorage.setItem("econotas-viewport",JSON.stringify({zoom:h.scale,positionX:h.positionX,positionY:h.positionY}))},c=()=>{if(typeof window<"u"){const h=sessionStorage.getItem("econotas-viewport");if(h)try{return JSON.parse(h)}catch{return null}}return null};return an.useEffect(()=>{const h=c();h&&a.current&&a.current.setTransform(h.positionX,h.positionY,h.zoom,0)},[]),g.jsx(XV,{ref:a,minScale:.5,maxScale:5,initialScale:1,centerOnInit:!0,wheel:{step:.1},panning:{disabled:s==="RECORDING",velocityDisabled:!1},doubleClick:{disabled:!0},onTransformed:h=>{u(h.state)},children:({zoomIn:h,zoomOut:f,resetTransform:p})=>g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[g.jsx("button",{onClick:()=>h(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Zoom in",disabled:o,children:g.jsx(Ik,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>f(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Zoom out",disabled:o,children:g.jsx(Rk,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>p(),className:"p-2 bg-slate-800/90 hover:bg-slate-700 rounded-lg text-white backdrop-blur-sm transition-colors border border-slate-700 shadow-lg",title:"Reset zoom",disabled:o,children:g.jsx(KR,{className:"w-5 h-5"})})]}),g.jsx(ZV,{wrapperStyle:{width:"100%",height:"100%",cursor:s==="RECORDING"?"crosshair":"grab"},contentStyle:{width:"100%",height:"100%"},children:g.jsx("canvas",{ref:t,onPointerDown:n,onPointerMove:r,onPointerUp:i,onPointerLeave:i,className:"touch-none",style:{touchAction:"none",cursor:s==="RECORDING"?"crosshair":"default"}})})]})})},tM=[{name:"Rojo",value:"#ef4444",hex:"#ef4444"},{name:"Azul",value:"#3b82f6",hex:"#3b82f6"},{name:"Verde",value:"#10b981",hex:"#10b981"},{name:"Amarillo",value:"#eab308",hex:"#eab308"},{name:"Negro",value:"#000000",hex:"#000000"},{name:"Blanco",value:"#ffffff",hex:"#ffffff"},{name:"Naranja",value:"#f97316",hex:"#f97316"},{name:"Morado",value:"#a855f7",hex:"#a855f7"}],nM=1,rM=20,iM=4,sM="#e2e8f0",eu=50,XS=120*60*1e3,oM=XS*.9,aM=({selectedColor:t,onColorChange:e,disabled:n=!1})=>g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("label",{className:"text-xs font-medium text-[var(--text)] opacity-70",children:"Color"}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:tM.map(r=>g.jsx("button",{onClick:()=>!n&&e(r.value),disabled:n,className:`
              w-10 h-10 rounded-lg border-2 transition-all
              ${t===r.value?"border-[var(--accent)] scale-110 shadow-lg":"border-[var(--border)] hover:border-[var(--text)] hover:scale-105"}
              ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}
            `,style:{backgroundColor:r.value},title:r.name,"aria-label":`Select ${r.name} color`,children:t===r.value&&g.jsx("div",{className:"flex items-center justify-center",children:g.jsx("span",{className:`text-2xl ${r.value==="#ffffff"||r.value==="#eab308"?"text-slate-900":"text-white"}`,children:""})})},r.value))})]}),lM=({currentTool:t,onToolChange:e,penColor:n,onColorChange:r,penThickness:i,onThicknessChange:s,canUndo:o,canRedo:a,onUndo:u,onRedo:c,disabled:h=!1})=>{const[f,p]=an.useState(!1);return g.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-3",children:[g.jsx("div",{className:"bg-[var(--bg-card)]/90 backdrop-blur-md rounded-2xl p-3 border border-[var(--border)] shadow-xl transition-all duration-300",children:g.jsxs("div",{className:"flex flex-col gap-3",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Pn,{onClick:()=>e("pen"),variant:t==="pen"?"primary":"secondary",disabled:h,label:"Lpiz",children:g.jsx(TE,{className:"w-5 h-5"})}),g.jsx(Pn,{onClick:()=>e("eraser"),variant:t==="eraser"?"primary":"secondary",disabled:h,label:"Borrador",children:g.jsx(MR,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Pn,{onClick:u,disabled:!o||h,variant:"secondary",label:"Deshacer",children:g.jsx(xE,{className:"w-5 h-5"})}),g.jsx(Pn,{onClick:c,disabled:!a||h,variant:"secondary",label:"Rehacer",children:g.jsx(uk,{className:"w-5 h-5"})})]}),t==="pen"&&g.jsx(Pn,{onClick:()=>p(!f),variant:"secondary",disabled:h,label:"Selector de color",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6 rounded-full border border-[var(--border)] shadow-sm",style:{backgroundColor:n}}),g.jsx("span",{className:"text-xs font-medium",children:"Color"})]})}),t==="pen"&&g.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-[var(--border)]",children:[g.jsxs("label",{className:"text-xs font-medium text-[var(--text)] opacity-70",children:["Grosor: ",i,"px"]}),g.jsx("input",{type:"range",min:nM,max:rM,value:i,onChange:y=>s(Number(y.target.value)),disabled:h,className:"w-full h-2 bg-[var(--bg)] rounded-lg appearance-none cursor-pointer accent-[var(--accent)]"}),g.jsx("div",{className:"flex justify-center py-1",children:g.jsx("div",{className:"rounded-full transition-all duration-200",style:{width:`${i}px`,height:`${i}px`,backgroundColor:n,minWidth:"4px",minHeight:"4px"}})})]})]})}),f&&t==="pen"&&g.jsx("div",{className:"bg-[var(--bg-card)]/95 backdrop-blur-md rounded-2xl p-3 border border-[var(--border)] shadow-xl animate-in fade-in zoom-in-95 duration-200",children:g.jsx(aM,{selectedColor:n,onColorChange:y=>{r(y),p(!1)},disabled:h})})]})};function uM(t){return t?`User ${t.slice(-4).toUpperCase()}`:"User"}function cM(t){if(!t)return"#6366f1";const e=["#6366f1","#ec4899","#14b8a6","#f59e0b","#8b5cf6","#10b981","#f97316","#06b6d4","#ef4444","#3b82f6"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]}function QS(t){if(!t)return"U";const e=t.split(" ");return e.length>=2?e[0][0]+e[1][0]:t.slice(0,2).toUpperCase()}function sg(t){const e=Math.floor(t/1e3),n=Math.floor(e/60),r=e%60;return`${n}:${r.toString().padStart(2,"0")}`}function hM(t){const n=new Date-t,r=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:t.toLocaleDateString()}const dM=({comment:t,currentUserId:e,isActive:n,onSeek:r,onEdit:i,onDelete:s})=>{var A;const[o,a]=P.useState(!1),[u,c]=P.useState(t.text),h=t.userId===e,f=()=>{u.trim()&&u!==t.text&&i(t.id,u.trim()),a(!1)},p=()=>{c(t.text),a(!1)},y=()=>{window.confirm("Eliminar este comentario?")&&s(t.id)},S=(A=t.createdAt)!=null&&A.toDate?t.createdAt.toDate():new Date(t.createdAt);return g.jsx("div",{className:`p-4 rounded-lg transition-all cursor-pointer hover:bg-slate-700/50 ${n?"bg-indigo-500/20 border-l-4 border-indigo-500":"bg-slate-700/30 border-l-4 border-transparent"}`,onClick:()=>!o&&r(t.timestamp),children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",style:{backgroundColor:t.userColor},children:QS(t.userName)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[g.jsx("span",{className:"font-semibold text-slate-200",children:t.userName}),g.jsx("span",{className:"text-slate-500",children:""}),g.jsx("span",{className:"text-indigo-400 font-mono text-xs",children:sg(t.timestamp)})]}),h&&!o&&g.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[g.jsx("button",{onClick:I=>{I.stopPropagation(),a(!0)},className:"p-1.5 text-slate-400 hover:text-white hover:bg-slate-600 rounded transition-colors",title:"Editar",children:g.jsx(SE,{className:"w-3.5 h-3.5"})}),g.jsx("button",{onClick:I=>{I.stopPropagation(),y()},className:"p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Eliminar",children:g.jsx(RE,{className:"w-3.5 h-3.5"})})]})]}),o?g.jsxs("div",{className:"mt-2",onClick:I=>I.stopPropagation(),children:[g.jsx("textarea",{value:u,onChange:I=>c(I.target.value),maxLength:500,className:"w-full bg-slate-800 border border-indigo-500 rounded px-3 py-2 text-white text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none",rows:3,autoFocus:!0,onKeyDown:I=>{I.key==="Enter"&&I.ctrlKey&&f(),I.key==="Escape"&&p()}}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("span",{className:"text-xs text-slate-500",children:[u.length,"/500"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:p,className:"px-3 py-1.5 text-sm bg-slate-600 hover:bg-slate-500 rounded text-white transition-colors flex items-center gap-1",children:[g.jsx(pi,{className:"w-3.5 h-3.5"}),"Cancelar"]}),g.jsxs("button",{onClick:f,disabled:!u.trim(),className:"px-3 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-700 rounded text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[g.jsx(Xp,{className:"w-3.5 h-3.5"}),"Guardar"]})]})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mt-1",children:t.text}),g.jsx("p",{className:"text-xs text-slate-500 mt-1",children:hM(S)})]})]})]})})},fM=({currentTime:t,onSubmit:e,userName:n,userColor:r,disabled:i=!1})=>{const[s,o]=P.useState(""),[a,u]=P.useState(!1),c=()=>{s.trim()&&(e(s.trim()),o(""),u(!1))},h=f=>{f.key==="Enter"&&f.ctrlKey&&c(),f.key==="Escape"&&(o(""),u(!1))};return i?null:g.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-800/50",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0",style:{backgroundColor:r},children:QS(n)}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("span",{className:"text-xs text-slate-400",children:"Comentar en"}),g.jsx("span",{className:"text-sm text-indigo-400 font-mono font-semibold",children:sg(t)})]}),g.jsx("textarea",{value:s,onChange:f=>o(f.target.value),onFocus:()=>u(!0),onKeyDown:h,maxLength:500,placeholder:"Agrega un comentario...",className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white placeholder-slate-500 text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 resize-none transition-all",rows:a?3:1}),a&&g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("span",{className:"text-xs text-slate-500",children:[s.length,"/500  Ctrl+Enter para publicar"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{o(""),u(!1)},className:"px-3 py-1.5 text-sm text-slate-400 hover:text-white transition-colors",children:"Cancelar"}),g.jsxs("button",{onClick:c,disabled:!s.trim(),className:"px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 font-medium",children:[g.jsx(CE,{className:"w-4 h-4"}),"Comentar"]})]})]})]})]})})},pM=({isOpen:t,onClose:e,sessionId:n,comments:r,currentTime:i,onSeekToTime:s,userId:o,userName:a,userColor:u,canEdit:c=!0,onAddComment:h,onEditComment:f,onDeleteComment:p})=>{const y=P.useRef(null),S=P.useRef(null),A=r.find(I=>Math.abs(I.timestamp-i)<2e3);return P.useEffect(()=>{A&&S.current&&t&&S.current.scrollIntoView({behavior:"smooth",block:"center"})},[A==null?void 0:A.id,t]),P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity",onClick:e}),g.jsxs("div",{ref:y,className:"fixed top-0 right-0 h-full w-full sm:w-96 bg-slate-800 shadow-2xl z-50 flex flex-col transform transition-transform duration-300 ease-out",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ju,{className:"w-5 h-5 text-indigo-400"}),g.jsx("h2",{className:"text-lg font-bold text-white",children:"Comentarios"}),g.jsx("span",{className:"px-2 py-0.5 text-xs bg-indigo-500/20 text-indigo-300 rounded-full font-semibold",children:r.length})]}),g.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors","aria-label":"Cerrar",children:g.jsx(pi,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r.length===0?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[g.jsx("div",{className:"w-16 h-16 bg-slate-700/50 rounded-full flex items-center justify-center mb-4",children:g.jsx(Ju,{className:"w-8 h-8 text-slate-500"})}),g.jsx("h3",{className:"text-lg font-semibold text-slate-300 mb-2",children:"Sin comentarios"}),g.jsx("p",{className:"text-sm text-slate-500 max-w-xs",children:c?"Agrega el primer comentario a esta sesin":"An no hay comentarios en esta sesin"})]}):g.jsx("div",{className:"space-y-3 group",children:r.map(I=>g.jsx("div",{ref:(A==null?void 0:A.id)===I.id?S:null,children:g.jsx(dM,{comment:I,currentUserId:o,isActive:(A==null?void 0:A.id)===I.id,onSeek:s,onEdit:f,onDelete:p})},I.id))})}),c&&g.jsx(fM,{currentTime:i,onSubmit:h,userName:a,userColor:u})]})]}):null},mM=({comment:t,duration:e,onSeek:n})=>{const r=e>0?t.timestamp/e*100:0,i=s=>{s.stopPropagation(),n(t.timestamp)};return g.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 group cursor-pointer z-10",style:{left:`${r}%`},onClick:i,children:[g.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-white shadow-lg transition-transform duration-200 ease-out group-hover:scale-150",style:{backgroundColor:t.userColor}}),g.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:g.jsxs("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl border border-slate-700 whitespace-nowrap max-w-xs",children:[g.jsx("div",{className:"font-semibold text-indigo-300 mb-1",children:t.userName}),g.jsx("div",{className:"text-slate-400 mb-1 font-mono",children:sg(t.timestamp)}),g.jsx("div",{className:"text-slate-200 truncate",children:t.text}),g.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-px",children:g.jsx("div",{className:"w-2 h-2 bg-slate-900 border-r border-b border-slate-700 transform rotate-45"})})]})})]})},JS=({rating:t,max:e=5,size:n=16,interactive:r=!1,onRate:i,className:s=""})=>{const[o,a]=an.useState(0),u=f=>{r&&a(f)},c=()=>{r&&a(0)},h=f=>{r&&i&&i(f)};return g.jsx("div",{className:`flex items-center gap-1 ${s}`,onMouseLeave:c,children:[...Array(e)].map((f,p)=>{const y=p+1,S=r?y<=(o||t):y<=t;return g.jsx("button",{type:"button",onClick:()=>h(y),onMouseEnter:()=>u(y),className:`${r?"cursor-pointer hover:scale-110 transition-transform":"cursor-default"} focus:outline-none`,disabled:!r,children:g.jsx(AE,{size:n,className:`${S?"fill-yellow-400 text-yellow-400":"fill-transparent text-slate-600"} transition-colors duration-200`})},y)})})},gM=({isOpen:t,onClose:e,onRate:n,initialRating:r=0,sessionName:i})=>{const[s,o]=P.useState(r),[a,u]=P.useState(""),[c,h]=P.useState(!1);if(!t)return null;const f=async p=>{if(p.preventDefault(),s!==0){h(!0);try{await n(s,a),e()}catch(y){console.error("Error submitting rating:",y)}finally{h(!1)}}};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:g.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl w-full max-w-md p-6 shadow-2xl scale-100 animate-in zoom-in-95 duration-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-xl font-bold text-white",children:"Calificar Sesin"}),g.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:g.jsx(pi,{size:24})})]}),g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("p",{className:"text-slate-300 mb-4",children:["Qu te pareci ",g.jsxs("span",{className:"font-semibold text-indigo-400",children:['"',i,'"']}),"?"]}),g.jsx("div",{className:"flex justify-center mb-2",children:g.jsx(JS,{rating:s,interactive:!0,size:40,onRate:o})}),g.jsxs("p",{className:"text-sm text-slate-400 h-5",children:[s===1&&"Necesita mejorar",s===2&&"Regular",s===3&&"Buena",s===4&&"Muy buena",s===5&&"Excelente!"]})]}),g.jsxs("form",{onSubmit:f,children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"Comentario (opcional)"}),g.jsx("textarea",{value:a,onChange:p=>u(p.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none h-24",placeholder:"Qu fue lo que ms te gust?"})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancelar"}),g.jsx("button",{type:"submit",disabled:s===0||c,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${s>0&&!c?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-900/20":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:c?"Enviando...":"Enviar Calificacin"})]})]})]})})},Ed={slate:{name:"Dark Slate",colors:{"--color-bg-primary":"#0f172a","--color-bg-secondary":"#1e293b","--color-bg-tertiary":"#334155","--color-text-primary":"#f1f5f9","--color-text-secondary":"#94a3b8","--color-accent-primary":"#6366f1","--color-accent-hover":"#4f46e5","--color-accent-light":"rgba(99, 102, 241, 0.1)","--color-border":"#334155"}},ocean:{name:"Ocean Blue",colors:{"--color-bg-primary":"#082f49","--color-bg-secondary":"#0c4a6e","--color-bg-tertiary":"#075985","--color-text-primary":"#f0f9ff","--color-text-secondary":"#bae6fd","--color-accent-primary":"#06b6d4","--color-accent-hover":"#0891b2","--color-accent-light":"rgba(6, 182, 212, 0.1)","--color-border":"#075985"}},forest:{name:"Forest Green",colors:{"--color-bg-primary":"#052e16","--color-bg-secondary":"#064e3b","--color-bg-tertiary":"#065f46","--color-text-primary":"#ecfdf5","--color-text-secondary":"#a7f3d0","--color-accent-primary":"#10b981","--color-accent-hover":"#059669","--color-accent-light":"rgba(16, 185, 129, 0.1)","--color-border":"#065f46"}},sunset:{name:"Sunset Orange",colors:{"--color-bg-primary":"#18181b","--color-bg-secondary":"#27272a","--color-bg-tertiary":"#3f3f46","--color-text-primary":"#fafafa","--color-text-secondary":"#a1a1aa","--color-accent-primary":"#f97316","--color-accent-hover":"#ea580c","--color-accent-light":"rgba(249, 115, 22, 0.1)","--color-border":"#3f3f46"}},light:{name:"Light Clean",colors:{"--color-bg-primary":"#ffffff","--color-bg-secondary":"#f8fafc","--color-bg-tertiary":"#f1f5f9","--color-text-primary":"#0f172a","--color-text-secondary":"#475569","--color-accent-primary":"#6366f1","--color-accent-hover":"#4f46e5","--color-accent-light":"rgba(99, 102, 241, 0.1)","--color-border":"#e2e8f0"}}},ZS=P.createContext(),yM=()=>{const t=P.useContext(ZS);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},vM=({children:t})=>{const[e,n]=P.useState(()=>localStorage.getItem("econotas-mode")||"dark"),[r,i]=P.useState(()=>{const u=localStorage.getItem("econotas-theme");return u&&Ed[u]?u:"slate"}),s=()=>e==="light"?"light":r==="light"?"slate":r;P.useEffect(()=>{const u=s(),c=Ed[u],h=document.documentElement;Object.entries(c.colors).forEach(([f,p])=>{h.style.setProperty(f,p)}),localStorage.setItem("econotas-mode",e),localStorage.setItem("econotas-theme",r)},[r,e]);const o=()=>{n(u=>u==="dark"?"light":"dark")},a={mode:e,currentTheme:r,activeTheme:s(),setTheme:i,toggleMode:o,themes:Ed};return g.jsx(ZS.Provider,{value:a,children:t})},_M=()=>{const{mode:t,currentTheme:e,activeTheme:n,setTheme:r,toggleMode:i,themes:s}=yM(),[o,a]=P.useState(!1),u=Object.entries(s).filter(([c])=>t==="light"?c==="light":c!=="light");return g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>a(!o),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Cambiar tema",children:g.jsx(TE,{className:"w-5 h-5"})}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),g.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 p-2 animate-in fade-in zoom-in-95 duration-200",children:[g.jsxs("div",{className:"px-2 py-2 mb-2 border-b border-slate-700",children:[g.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"MODO"}),g.jsxs("div",{className:"flex gap-1 bg-slate-900 rounded-lg p-1",children:[g.jsxs("button",{onClick:i,className:`flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="dark"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,children:[g.jsx(JR,{className:"w-3.5 h-3.5"}),"Oscuro"]}),g.jsxs("button",{onClick:i,className:`flex-1 flex items-center justify-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="light"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,children:[g.jsx(Ek,{className:"w-3.5 h-3.5"}),"Claro"]})]})]}),t==="dark"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-xs font-semibold text-slate-400 px-2 py-1 mb-1",children:"PALETA"}),u.map(([c,h])=>g.jsxs("button",{onClick:()=>{r(c),a(!1)},className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${e===c?"bg-indigo-500/10 text-indigo-400":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.colors["--color-accent-primary"]}}),h.name]}),e===c&&g.jsx(Xp,{className:"w-3 h-3"})]},c))]})]})]})]})},wM=(t=[])=>{const[e,n]=P.useState(t),[r,i]=P.useState({past:[],future:[]}),s=r.past.length>0,o=r.future.length>0,a=P.useCallback(y=>{n(S=>{const A=[...S,y];return i(I=>({past:[...I.past,S].slice(-eu),future:[]})),A})},[]),u=P.useCallback(y=>{n(y),i({past:[],future:[]})},[]),c=P.useCallback(()=>{s&&i(y=>{const S=y.past[y.past.length-1],A=y.past.slice(0,-1);return n(S),{past:A,future:[e,...y.future].slice(0,eu)}})},[s,e]),h=P.useCallback(()=>{o&&i(y=>{const S=y.future[0],A=y.future.slice(1);return n(S),{past:[...y.past,e].slice(-eu),future:A}})},[o,e]),f=P.useCallback(()=>{i({past:[],future:[]})},[]),p=P.useCallback(y=>{n(S=>{const A=S.filter((I,_)=>_!==y);return i(I=>({past:[...I.past,S].slice(-eu),future:[]})),A})},[]);return{strokes:e,setStrokes:u,undo:c,redo:h,canUndo:s,canRedo:o,addStroke:a,deleteStroke:p,clearHistory:f}},EM=(t="es-ES")=>{const[e,n]=P.useState([]),[r,i]=P.useState(!1),[s,o]=P.useState(null),a=P.useRef(null),u=P.useRef(0),c=P.useRef(""),h=P.useCallback(()=>"webkitSpeechRecognition"in window||"SpeechRecognition"in window,[]),f=P.useCallback(()=>{if(!h())return o("Tu navegador no soporta transcripcin automtica. Usa Chrome o Edge."),null;const I=window.SpeechRecognition||window.webkitSpeechRecognition,_=new I;return _.continuous=!0,_.interimResults=!0,_.lang=t,_.maxAlternatives=1,_},[t,h]),p=P.useCallback(I=>{if(!h()){o("Transcripcin no soportada en este navegador");return}try{const _=f();if(!_)return;u.current=I||Date.now(),c.current="",n([]),o(null),_.onstart=()=>{console.log(" Transcripcin iniciada"),i(!0)},_.onresult=v=>{let T="",D="";for(let V=v.resultIndex;V<v.results.length;V++){const U=v.results[V][0].transcript,C=v.results[V][0].confidence;if(v.results[V].isFinal){D+=U+" ";const E=Date.now(),x=E-u.current-U.split(" ").length*200,R=E-u.current,b={text:U.trim(),startTime:Math.max(0,x),endTime:R,confidence:C||.9,timestamp:new Date().toISOString()};n(N=>[...N,b]),c.current=""}else T+=U,c.current=T}},_.onerror=v=>{console.error(" Error de transcripcin:",v.error),v.error==="no-speech"?console.log(" No se detect voz, continuando..."):v.error==="network"?o("Error de red. Verifica tu conexin a internet."):o(`Error de transcripcin: ${v.error}`)},_.onend=()=>{if(console.log(" Transcripcin detenida"),i(!1),a.current&&r)try{_.start()}catch{console.log("No se pudo reiniciar transcripcin")}},_.start(),a.current=_}catch(_){console.error("Error iniciando transcripcin:",_),o("No se pudo iniciar la transcripcin"),i(!1)}},[f,h]),y=P.useCallback(()=>{if(a.current)try{a.current.stop(),a.current=null,i(!1),console.log(" Transcripcin finalizada")}catch(I){console.error("Error deteniendo transcripcin:",I)}},[]),S=P.useCallback(()=>e.map(I=>I.text).join(" "),[e]),A=P.useCallback(I=>{if(!I.trim())return[];const _=I.toLowerCase();return e.map((v,T)=>({...v,index:T,matches:v.text.toLowerCase().includes(_)})).filter(v=>v.matches)},[e]);return P.useEffect(()=>()=>{a.current&&a.current.stop()},[]),{segments:e,isTranscribing:r,error:s,isSupported:h(),startTranscription:p,stopTranscription:y,getFullText:S,searchInTranscript:A,currentSegment:c.current}},Td=({readOnly:t=!1})=>{var ds;const{sessionId:e}=_A(),n=dE(),[r,i]=P.useState("IDLE"),[s,o]=P.useState(0),[a,u]=P.useState(0),[c,h]=P.useState(null),[f,p]=P.useState(null),[y,S]=P.useState("pen"),[A,I]=P.useState(sM),[_,v]=P.useState(iM),{strokes:T,setStrokes:D,undo:V,redo:U,canUndo:C,canRedo:E,addStroke:x,clearHistory:R}=wM([]),[b,N]=P.useState(""),[k,ye]=P.useState(null),[B,H]=P.useState(!1),[Z,z]=P.useState(!!e),[Q,G]=P.useState({isOpen:!1,type:"info",title:"",message:""}),[ie,me]=P.useState({isOpen:!1,title:"",message:"",onConfirm:null}),[at,Se]=P.useState(!1),[gt,yt]=P.useState(!1),[It,gr]=P.useState(!0),[cn,os]=P.useState([]),[yr,as]=P.useState(!1),{segments:Ft,isSupported:cl,startTranscription:ph,stopTranscription:mo,getFullText:go}=EM("es-ES"),[yo,et]=P.useState(""),[tt,ls]=P.useState("#6366f1"),[mh,us]=P.useState(!1),[wi,vr]=P.useState(0),[vo,hl]=P.useState(!1),lt=P.useRef(null),Wn=P.useRef(null),_o=P.useRef([]),Be=P.useRef(null),_r=P.useRef(0),qn=P.useRef(null),hn=P.useRef(null),Ei=P.useRef(null);P.useEffect(()=>{(async()=>{const K=Bt.currentUser;if(K){const se=uM(K.uid),de=cM(K.uid);et(se),ls(de)}})()},[]),P.useEffect(()=>{if(e){const $=kS(e,K=>{os(K)});return Ei.current=$,()=>{Ei.current&&Ei.current()}}},[e]),P.useEffect(()=>{e&&(async()=>{try{const K=await TS(e);K&&(N(K.sessionName),ye(K.createdAt?K.createdAt.toDate?K.createdAt.toDate():new Date(K.createdAt):new Date),p(K.audioUrl),D(JSON.parse(K.strokes)),o(K.durationMs/1e3),setTimeout(()=>Qt(0,!0),100))}catch(K){console.error("Error loading session:",K),G({isOpen:!0,type:"error",title:"Error",message:"Error al cargar la sesin. Por favor intenta nuevamente."})}finally{z(!1)}})()},[e]),P.useEffect(()=>{e&&!vo&&(async()=>{if(await PS(e),hl(!0),Bt.currentUser){const K=await NS(e,Bt.currentUser.uid);K&&vr(K.rating)}})()},[e,vo]),P.useEffect(()=>{const $=lt.current;if(!$)return;const K=$.getContext("2d"),se=()=>{const de=$.parentElement;de&&($.width=de.clientWidth,$.height=de.clientHeight),K.lineCap="round",K.lineJoin="round",Qt(0,!0)};return window.addEventListener("resize",se),se(),()=>window.removeEventListener("resize",se)},[T,Z]),P.useEffect(()=>{let $;return r==="RECORDING"&&($=setInterval(()=>{const K=Date.now()-_r.current;o(K/1e3),u(K),!at&&K>=oM&&(Se(!0),G({isOpen:!0,type:"warning",title:"Lmite de tiempo",message:"Te quedan aproximadamente 12 minutos de grabacin. La sesin se detendr automticamente al alcanzar 120 minutos."})),K>=XS&&(wo(),G({isOpen:!0,type:"info",title:"Grabacin completada",message:"Se alcanz el lmite mximo de 120 minutos. La grabacin se detuvo automticamente."}))},100)),()=>clearInterval($)},[r,at]);const Gn=async()=>{if(!t)try{console.log(" Solicitando micrfono");const $=await navigator.mediaDevices.getUserMedia({audio:!0});console.log(" Acceso concedido");const K=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":MediaRecorder.isTypeSupported("audio/mp4")?"audio/mp4":"";console.log(` MIME: ${K||"default"}`);const se=K?{mimetype:K}:void 0;Wn.current=new MediaRecorder($,se),_o.current=[],Wn.current.ondataavailable=Re=>{Re.data.size>0&&_o.current.push(Re.data)},Wn.current.onstop=()=>{console.log(" Detenido");const Re=new Blob(_o.current,{type:K||"audio/webm"});if(Re.size===0){G({isOpen:!0,type:"error",title:"Error de grabacin",message:"No se grab audio. Por favor verifica el acceso al micrfono e intenta nuevamente."});return}const be=URL.createObjectURL(Re);h(Re),p(be),console.log(" Audio listo")},Wn.current.start(),console.log(" Grabando"),_r.current=Date.now(),_r.current=Date.now(),D([]),R(),Se(!1),o(0),i("RECORDING"),cl&&ph(Date.now()),lt.current.getContext("2d").clearRect(0,0,lt.current.width,lt.current.height)}catch($){console.error(" Error:",$),G({isOpen:!0,type:"error",title:"Error de micrfono",message:`No se pudo acceder al micrfono: ${$.message}`})}},wo=()=>{Wn.current&&r==="RECORDING"&&(Wn.current.stop(),Wn.current.stream.getTracks().forEach($=>$.stop()),i("IDLE"),mo())},Ti=$=>{const K=lt.current,se=K.getBoundingClientRect(),de=K.width/se.width,Re=K.height/se.height;return{offsetX:($.clientX-se.left)*de,offsetY:($.clientY-se.top)*Re,pressure:$.pressure}},dl=$=>{if(r!=="RECORDING"||t)return;const{offsetX:K,offsetY:se,pressure:de}=Ti($),Re=Date.now()-_r.current;hn.current={tool:y,color:A,thickness:_,startTime:Re,points:[{x:K,y:se,p:de||.5,t:Re}]};const be=lt.current.getContext("2d");be.globalCompositeOperation=y==="eraser"?"destination-out":"source-over",be.beginPath(),be.moveTo(K,se),be.lineWidth=(de||.5)*_,be.strokeStyle=A,be.lineCap="round",be.lineJoin="round"},Si=$=>{if(r!=="RECORDING"||!hn.current||t)return;$.preventDefault();const{offsetX:K,offsetY:se,pressure:de}=Ti($),Re=Date.now()-_r.current;hn.current.points.push({x:K,y:se,p:de||.5,t:Re});const be=lt.current.getContext("2d");be.lineWidth=(de||.5)*hn.current.thickness,be.lineTo(K,se),be.stroke(),be.beginPath(),be.moveTo(K,se)},fl=()=>{if(r!=="RECORDING"||!hn.current||t)return;const $=hn.current;x($),hn.current=null},nt=async()=>{if(!(!f||!Be.current))if(r==="PLAYING")Be.current.pause(),i("PAUSED"),cancelAnimationFrame(qn.current);else try{await Be.current.play(),i("PLAYING"),cs()}catch($){console.error(" Error:",$)}},cs=()=>{if(!Be.current||Be.current.paused||Be.current.ended){Be.current&&Be.current.ended&&i("IDLE");return}const $=Be.current.currentTime*1e3;u($),Qt($,!1),qn.current=requestAnimationFrame(cs)},Qt=($,K=!1)=>{const se=lt.current;if(!se)return;const de=se.getContext("2d");de.clearRect(0,0,se.width,se.height),T.forEach(Re=>{if(!Re||!K&&Re.startTime>$)return;de.globalCompositeOperation=Re.tool==="eraser"?"destination-out":"source-over",de.beginPath(),de.strokeStyle=Re.color,de.lineCap="round",de.lineJoin="round";let be=!1;for(let xi=0;xi<Re.points.length;xi++){const Kn=Re.points[xi];if(!K&&Kn.t>$)break;const _h=Re.thickness||4;de.lineWidth=Kn.p*_h,be?de.lineTo(Kn.x,Kn.y):(de.moveTo(Kn.x,Kn.y),be=!0)}be&&de.stroke()}),de.globalCompositeOperation="source-over"},Ci=$=>{if(!Be.current)return;const K=Number($.target.value);Be.current.currentTime=K,u(K*1e3),Qt(K*1e3,!1)},gh=$=>{const K=Math.floor($/1e3),se=Math.floor(K/60),de=K%60;return`${se}:${de.toString().padStart(2,"0")}`},yh=async $=>{if(!(!e||!Bt.currentUser))try{await IS({sessionId:e,userId:Bt.currentUser.uid,userName:yo,userColor:tt,timestamp:a,text:$})}catch(K){console.error("Error adding comment:",K),G({isOpen:!0,type:"error",title:"Error",message:"No se pudo agregar el comentario. Intenta nuevamente."})}},wr=async($,K)=>{try{await AS($,K)}catch(se){console.error("Error updating comment:",se),G({isOpen:!0,type:"error",title:"Error",message:"No se pudo actualizar el comentario."})}},vh=async $=>{try{await RS($)}catch(K){console.error("Error deleting comment:",K),G({isOpen:!0,type:"error",title:"Error",message:"No se pudo eliminar el comentario."})}},pl=$=>{Be.current&&(Be.current.currentTime=$/1e3,u($),Qt($,!1))},hs=async($,K)=>{if(!(!e||!Bt.currentUser))try{await bS(e,Bt.currentUser.uid,$,K),vr($),G({isOpen:!0,type:"success",title:"Gracias!",message:"Tu calificacin ha sido guardada."})}catch(se){console.error("Error saving rating:",se),G({isOpen:!0,type:"error",title:"Error",message:"No se pudo guardar la calificacin."})}},ml=async()=>{try{const{exportSessionToJson:$}=await _f(async()=>{const{exportSessionToJson:de}=await import("./exportUtils-Dar7xkeZ.js");return{exportSessionToJson:de}},[]),K={id:e,sessionName:b,createdAt:k||new Date,durationMs:s*1e3,audioUrl:f,strokes:T};$(K,cn)&&G({isOpen:!0,type:"success",title:"Exportacin exitosa",message:"La sesin se ha descargado correctamente."})}catch($){console.error("Export error:",$),G({isOpen:!0,type:"error",title:"Error de exportacin",message:"No se pudo exportar la sesin."})}},gl=async()=>{if(!(!c||!Bt.currentUser)){if(!b.trim()){G({isOpen:!0,type:"warning",title:"Nombre requerido",message:"Por favor ingresa un nombre para la sesin antes de guardar."});return}H(!0);try{const $=Date.now().toString(),K=await wS(c,$),se={userId:Bt.currentUser.uid,sessionName:b,createdAt:new Date,audioUrl:K,durationMs:s*1e3,strokes:JSON.stringify(T)},de=await ES(se);Ft.length>0&&await DS(de,{segments:Ft,fullText:go(),language:"es-ES"}),G({isOpen:!0,type:"success",title:"xito!",message:"Sesin guardada exitosamente. Redirigiendo al panel..."}),setTimeout(()=>n("/"),1500)}catch($){console.error("Error saving session:",$),G({isOpen:!0,type:"error",title:"Error al guardar",message:`No se pudo guardar la sesin: ${$.message}`})}finally{H(!1)}}};return Z?g.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):g.jsxs("div",{className:"flex flex-col h-screen bg-slate-900 text-slate-100 font-sans overflow-y-auto pb-4 pb-[env(safe-area-inset-bottom)]",children:[g.jsxs("div",{className:"h-16 border-b border-slate-700 bg-slate-800 flex items-center justify-between px-6 shadow-lg z-10",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{onClick:()=>n("/"),className:"p-2 hover:bg-slate-700 rounded-full transition-colors",children:g.jsx(TR,{className:"w-5 h-5 text-slate-400"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center transform rotate-12",children:g.jsx(rk,{className:"w-5 h-5 text-white"})}),g.jsxs("h1",{className:"text-xl font-bold tracking-tight hidden sm:block",children:["EcoNotas",g.jsx("span",{className:"text-indigo-400",children:"Notes"})]})]})]}),g.jsxs("div",{className:"flex items-center gap-4 bg-slate-900 py-1 px-4 rounded-full border border-slate-700",children:[g.jsx(EE,{className:`w-4 h-4 ${r==="RECORDING"?"text-red-500 animate-pulse":"text-slate-400"}`}),g.jsx("span",{className:"font-mono text-lg",children:gh(r==="RECORDING"||r==="IDLE"&&!f?s*1e3:a)})]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("button",{onClick:()=>gr(!It),className:`p-2 rounded-lg transition-colors ${It?"text-indigo-400 bg-indigo-500/10":"text-slate-400 hover:text-white hover:bg-slate-700"}`,title:It?"Ocultar herramientas":"Mostrar herramientas",children:g.jsx(gk,{className:"w-5 h-5"})}),e&&g.jsx("button",{onClick:()=>us(!0),className:"p-2 text-slate-400 hover:text-yellow-400 transition-colors",title:wi>0?`Tu calificacin: ${wi} estrellas`:"Calificar sesin",children:g.jsx(AE,{className:`w-5 h-5 ${wi>0?"fill-yellow-400 text-yellow-400":""}`})}),e&&g.jsxs("button",{onClick:()=>yt(!gt),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-semibold transition-all ${gt?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:[g.jsx(Ju,{className:"w-4 h-4"}),cn.length>0&&g.jsx("span",{className:"text-sm",children:cn.length})]}),(e||Ft.length>0)&&g.jsxs("button",{onClick:()=>as(!yr),className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-semibold transition-all ${yr?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,title:"Transcripcin",children:[g.jsx(Qu,{className:"w-4 h-4"}),Ft.length>0&&g.jsx("span",{className:"text-sm",children:Ft.length})]}),t&&g.jsx("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 text-xs font-bold rounded-full border border-indigo-500/30",children:"SOLO LECTURA"}),e&&g.jsx("button",{onClick:ml,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar a JSON",children:g.jsx(Qp,{className:"w-5 h-5"})}),g.jsx(_M,{})]})]}),g.jsxs("div",{className:"flex-1 relative bg-slate-900 cursor-crosshair touch-none",children:[g.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(#6366f1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),g.jsx(eM,{canvasRef:lt,strokes:T,onPointerDown:dl,onPointerMove:Si,onPointerUp:fl,mode:r,readOnly:t}),It&&g.jsx(lM,{currentTool:y,onToolChange:S,penColor:A,onColorChange:I,penThickness:_,onThicknessChange:v,canUndo:C&&r!=="RECORDING",canRedo:E&&r!=="RECORDING",onUndo:V,onRedo:U,disabled:r==="PLAYING"||t}),r==="IDLE"&&T.length===0&&!t&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:g.jsxs("div",{className:"text-center text-slate-500",children:[g.jsx(rv,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),g.jsx("p",{className:"text-lg",children:"Presiona Grabar para comenzar"}),g.jsx("p",{className:"text-sm opacity-60",children:"Usa tu stylus o mouse"})]})})]}),g.jsxs("div",{className:"bg-slate-800 border-t border-slate-700 p-4 flex flex-col justify-center",children:[f&&g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-3",children:[!t&&!e&&g.jsx("input",{type:"text",placeholder:"Nombre de la sesin...",value:b,onChange:$=>N($.target.value),className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}),t&&g.jsx("p",{className:"text-lg font-semibold text-indigo-300",children:b})]}),g.jsx("audio",{ref:Be,src:f,className:"hidden",onPlay:()=>{console.log(" Play"),i("PLAYING"),cs()},onPause:()=>{console.log(" Pause"),i("PAUSED"),cancelAnimationFrame(qn.current)},onEnded:()=>{console.log(" Ended"),i("IDLE"),e&&wi===0&&us(!0)}})]}),f&&Be.current&&g.jsxs("div",{className:"relative mb-4",children:[g.jsx("input",{type:"range",min:"0",max:Be.current.duration||s,value:a/1e3,onChange:Ci,className:"w-full h-1 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-indigo-500"}),cn.map($=>g.jsx(mM,{comment:$,duration:s*1e3,onSeek:pl},$.id))]}),g.jsx("div",{className:"flex items-center justify-center gap-6",children:r==="IDLE"||r==="PAUSED"?f?g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-8 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold transition-all shadow-lg shadow-indigo-900/20",children:[g.jsx(mu,{className:"w-5 h-5 fill-current"})," REPRODUCIR"]}),!t&&!e&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{onClick:gl,disabled:B,className:"flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-bold transition-all shadow-lg shadow-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[B?g.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):g.jsx(hk,{className:"w-5 h-5"}),B?"GUARDANDO...":"GUARDAR"]}),g.jsx("button",{onClick:()=>{me({isOpen:!0,title:"Reiniciar grabacin?",message:"Ests seguro? Se perder la grabacin actual y no podrs recuperarla.",variant:"destructive",onConfirm:()=>{p(null),h(null),D([]),R(),o(0),N(""),Se(!1),lt.current&&lt.current.getContext("2d").clearRect(0,0,lt.current.width,lt.current.height)}})},className:"p-2 bg-slate-700 hover:bg-slate-600 rounded-full text-slate-300",title:"Reiniciar",children:g.jsx(xE,{className:"w-5 h-5"})})]})]}):!t&&g.jsxs("button",{onClick:Gn,className:"flex items-center gap-2 px-8 py-2 bg-red-600 hover:bg-red-700 text-white rounded-full font-bold transition-all shadow-lg shadow-red-900/20 active:scale-95",children:[g.jsx(rv,{className:"w-5 h-5"})," GRABAR"]}):r==="RECORDING"?g.jsxs("button",{onClick:wo,className:"flex items-center gap-2 px-8 py-2 bg-slate-200 text-slate-900 hover:bg-white rounded-full font-bold transition-all animate-pulse",children:[g.jsx(vk,{className:"w-5 h-5 fill-current"})," DETENER"]}):g.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-8 py-2 bg-yellow-500 text-black hover:bg-yellow-400 rounded-full font-bold transition-all",children:[g.jsx(tk,{className:"w-5 h-5 fill-current"})," PAUSA"]})})]}),g.jsx(OS,{isOpen:Q.isOpen,onClose:()=>G({...Q,isOpen:!1}),type:Q.type,title:Q.title,message:Q.message}),g.jsx(LS,{isOpen:ie.isOpen,onClose:()=>me({...ie,isOpen:!1}),onConfirm:ie.onConfirm,onCancel:()=>me({...ie,isOpen:!1}),title:ie.title,message:ie.message,variant:ie.variant}),e&&g.jsx(pM,{isOpen:gt,onClose:()=>yt(!1),sessionId:e,comments:cn,currentTime:a,onSeekToTime:pl,userId:(ds=Bt.currentUser)==null?void 0:ds.uid,userName:yo,userColor:tt,canEdit:!t,onAddComment:yh,onEditComment:wr,onDeleteComment:vh}),g.jsx(gM,{isOpen:mh,onClose:()=>us(!1),onRate:hs,initialRating:wi,sessionName:b}),yr&&g.jsx("div",{className:"fixed right-0 top-16 bottom-0 w-96 z-40 shadow-2xl",children:g.jsx(FL,{segments:Ft,currentTime:a,onSeekToTime:$=>{Be.current&&(Be.current.currentTime=$/1e3,u($),Qt($,!1))},onExport:()=>{const{exportAsText:$}=require("./utils/transcriptionExport");$(Ft,b),G({isOpen:!0,type:"success",title:"Exportacin exitosa",message:"La transcripcin se ha descargado correctamente."})},isRecording:r==="RECORDING"})})]})},TM=({view:t,onViewChange:e})=>g.jsxs("div",{className:"flex gap-1 bg-slate-800 rounded-lg p-1",children:[g.jsxs("button",{onClick:()=>e("grid"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="grid"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,title:"Vista en cuadrcula",children:[g.jsx(HR,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),g.jsxs("button",{onClick:()=>e("list"),className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${t==="list"?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-300"}`,title:"Vista en lista",children:[g.jsx(qR,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"Lista"})]})]}),SM=({value:t,onChange:e,placeholder:n="Buscar sesiones..."})=>g.jsxs("div",{className:"relative flex-1 max-w-md",children:[g.jsx(IE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),g.jsx("input",{type:"text",placeholder:n,value:t,onChange:r=>e(r.target.value),className:"w-full pl-10 pr-10 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}),t&&g.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-0.5 text-slate-400 hover:text-white transition-colors",children:g.jsx(pi,{className:"w-4 h-4"})})]}),CM=({filters:t,onFiltersChange:e})=>{const[n,r]=P.useState(!1),i=(a,u)=>{e({...t,[a]:u})},s=()=>{e({dateRange:"all",duration:"all",minRating:0,hasTranscription:!1,hasComments:!1})},o=Object.values(t).filter(a=>a!=="all"&&a!==0&&a!==!1).length;return g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-300 hover:bg-slate-700 hover:text-white transition-colors",children:[g.jsx(FR,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"Filtros"}),o>0&&g.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-500 text-white text-xs font-bold rounded-full",children:o}),g.jsx(AR,{className:`w-4 h-4 transition-transform ${n?"rotate-180":""}`})]}),n&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),g.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-slate-800 border border-slate-700 rounded-xl shadow-xl z-50 p-4 space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-sm font-semibold text-white",children:"Filtros"}),o>0&&g.jsx("button",{onClick:s,className:"text-xs text-indigo-400 hover:text-indigo-300",children:"Limpiar todo"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Fecha"}),g.jsxs("select",{value:t.dateRange,onChange:a=>i("dateRange",a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"all",children:"Todas"}),g.jsx("option",{value:"today",children:"Hoy"}),g.jsx("option",{value:"week",children:"ltima semana"}),g.jsx("option",{value:"month",children:"ltimo mes"}),g.jsx("option",{value:"year",children:"ltimo ao"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Duracin"}),g.jsxs("select",{value:t.duration,onChange:a=>i("duration",a.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"all",children:"Todas"}),g.jsx("option",{value:"short",children:"Corta (< 15 min)"}),g.jsx("option",{value:"medium",children:"Media (15-60 min)"}),g.jsx("option",{value:"long",children:"Larga (> 60 min)"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Calificacin mnima"}),g.jsxs("select",{value:t.minRating,onChange:a=>i("minRating",Number(a.target.value)),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"0",children:"Cualquiera"}),g.jsx("option",{value:"1",children:" 1+"}),g.jsx("option",{value:"2",children:" 2+"}),g.jsx("option",{value:"3",children:" 3+"}),g.jsx("option",{value:"4",children:" 4+"}),g.jsx("option",{value:"5",children:" 5"})]})]}),g.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-700",children:[g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:t.hasTranscription,onChange:a=>i("hasTranscription",a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-slate-800"}),g.jsx("span",{className:"text-sm text-slate-300",children:"Con transcripcin"})]}),g.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:t.hasComments,onChange:a=>i("hasComments",a.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-slate-800"}),g.jsx("span",{className:"text-sm text-slate-300",children:"Con comentarios"})]})]})]})]})]})},xM=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(!0),[i,s]=P.useState(null),[o,a]=P.useState(null),[u,c]=P.useState(""),[h,f]=P.useState(()=>localStorage.getItem("dashboard-view")||"grid"),[p,y]=P.useState(""),[S,A]=P.useState("newest"),[I,_]=P.useState({dateRange:"all",duration:"all",minRating:0,hasTranscription:!1,hasComments:!1}),[v,T]=P.useState({isOpen:!1,type:"info",title:"",message:""}),[D,V]=P.useState({isOpen:!1,title:"",message:"",onConfirm:null});P.useEffect(()=>{const B=Zb(Bt,async H=>{if(H)s(H),U(H.uid);else try{const Z=await _S();s(Z),r(!1)}catch(Z){console.error("Auth error:",Z),r(!1)}});return()=>B()},[]);const U=async B=>{try{const H=await SS(B);e(H)}catch(H){console.error("Error loading sessions:",H),H.message.includes("index")&&alert("Falta un ndice en Firestore. Revisa la consola para ver el enlace de creacin.")}finally{r(!1)}},C=B=>{const H=Math.floor(B/1e3),Z=Math.floor(H/60),z=H%60;return`${Z}:${z.toString().padStart(2,"0")}`},E=B=>{if(!B)return"";const H=B.toDate?B.toDate():new Date(B);return H.toLocaleDateString()+" "+H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},x=(B,H)=>{B.preventDefault(),B.stopPropagation();const Z=`${window.location.origin}/econotas/share/${H}`;navigator.clipboard.writeText(Z),T({isOpen:!0,type:"success",title:"Enlace copiado",message:`El enlace se copi al portapapeles: ${Z}`})},R=(B,H)=>{B.preventDefault(),B.stopPropagation(),V({isOpen:!0,title:"Eliminar sesin?",message:`Ests seguro de que deseas eliminar "${H.sessionName}"? Esta accin no se puede deshacer.`,variant:"destructive",onConfirm:async()=>{try{await CS(H.id),e(Z=>Z.filter(z=>z.id!==H.id)),T({isOpen:!0,type:"success",title:"Sesin eliminada",message:"La sesin se elimin correctamente."})}catch(Z){console.error("Error deleting session:",Z),T({isOpen:!0,type:"error",title:"Error",message:`No se pudo eliminar la sesin: ${Z.message}`})}}})},b=(B,H)=>{B.preventDefault(),B.stopPropagation(),a(H.id),c(H.sessionName)},N=async(B,H)=>{if(B.preventDefault(),B.stopPropagation(),!u.trim()){T({isOpen:!0,type:"warning",title:"Nombre requerido",message:"El nombre de la sesin no puede estar vaco."});return}try{await xS(H,{sessionName:u}),e(Z=>Z.map(z=>z.id===H?{...z,sessionName:u}:z)),a(null),c("")}catch(Z){console.error("Error updating session:",Z),T({isOpen:!0,type:"error",title:"Error",message:`No se pudo actualizar la sesin: ${Z.message}`})}},k=B=>{B.preventDefault(),B.stopPropagation(),a(null),c("")};P.useEffect(()=>{localStorage.setItem("dashboard-view",h)},[h]);const ye=P.useMemo(()=>{let B=[...t];if(p.trim()){const H=p.toLowerCase();B=B.filter(Z=>Z.sessionName.toLowerCase().includes(H))}if(I.dateRange!=="all"){const H=new Date,z={today:24*60*60*1e3,week:7*24*60*60*1e3,month:30*24*60*60*1e3,year:365*24*60*60*1e3}[I.dateRange];z&&(B=B.filter(Q=>{var ie;const G=(ie=Q.createdAt)!=null&&ie.toDate?Q.createdAt.toDate():new Date(Q.createdAt);return H-G<=z}))}return I.duration!=="all"&&(B=B.filter(H=>{const Z=H.durationMs/6e4;return I.duration==="short"?Z<15:I.duration==="medium"?Z>=15&&Z<=60:I.duration==="long"?Z>60:!0})),I.minRating>0&&(B=B.filter(H=>(H.ratingAverage||0)>=I.minRating)),I.hasTranscription&&(B=B.filter(H=>H.transcription)),I.hasComments&&(B=B.filter(H=>(H.commentCount||0)>0)),B.sort((H,Z)=>{var z,Q,G,ie,me,at,Se,gt;switch(S){case"newest":return(((Q=(z=Z.createdAt)==null?void 0:z.toDate)==null?void 0:Q.call(z))||new Date(Z.createdAt))-(((ie=(G=H.createdAt)==null?void 0:G.toDate)==null?void 0:ie.call(G))||new Date(H.createdAt));case"oldest":return(((at=(me=H.createdAt)==null?void 0:me.toDate)==null?void 0:at.call(me))||new Date(H.createdAt))-(((gt=(Se=Z.createdAt)==null?void 0:Se.toDate)==null?void 0:gt.call(Se))||new Date(Z.createdAt));case"mostViewed":return(Z.viewCount||0)-(H.viewCount||0);case"topRated":return(Z.ratingAverage||0)-(H.ratingAverage||0);case"alphabetical":return H.sessionName.localeCompare(Z.sessionName);default:return 0}}),B},[t,p,I,S]);return n?g.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):g.jsxs("div",{className:"min-h-screen bg-slate-900 text-slate-100 font-sans p-6",children:[g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("header",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-1",children:"Mis Sesiones"}),g.jsx("p",{className:"text-slate-400",children:"Gestiona tus grabaciones y notas"})]}),g.jsxs(oa,{to:"/new",className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold transition-all shadow-lg shadow-indigo-900/20",children:[g.jsx(CE,{className:"w-5 h-5"})," Nueva Sesin"]})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6 bg-slate-800 border border-slate-700 rounded-xl p-4",children:[g.jsx(SM,{value:p,onChange:y}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(TM,{view:h,onViewChange:f}),g.jsx(CM,{filters:I,onFiltersChange:_}),g.jsxs("select",{value:S,onChange:B=>A(B.target.value),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:border-indigo-500",children:[g.jsx("option",{value:"newest",children:"Ms reciente"}),g.jsx("option",{value:"oldest",children:"Ms antiguo"}),g.jsx("option",{value:"mostViewed",children:"Ms visto"}),g.jsx("option",{value:"topRated",children:"Mejor calificado"}),g.jsx("option",{value:"alphabetical",children:"Alfabtico"})]})]})]}),(p||Object.values(I).some(B=>B!=="all"&&B!==0&&B!==!1))&&g.jsxs("div",{className:"mb-4 text-sm text-slate-400",children:[ye.length," sesin",ye.length!==1?"es":""," encontrada",ye.length!==1?"s":""]}),t.length===0?g.jsxs("div",{className:"text-center py-20 bg-slate-800 rounded-2xl border border-slate-700",children:[g.jsx("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(mu,{className:"w-8 h-8 text-slate-500 ml-1"})}),g.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No hay sesiones guardadas"}),g.jsx("p",{className:"text-slate-400 mb-6",children:"Comienza a grabar tu primera sesin de tutora."}),g.jsx(oa,{to:"/new",className:"text-indigo-400 hover:text-indigo-300 font-medium",children:"Crear una nueva sesin "})]}):ye.length===0?g.jsxs("div",{className:"text-center py-20 bg-slate-800 rounded-2xl border border-slate-700",children:[g.jsx("div",{className:"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4",children:g.jsx(Search,{className:"w-8 h-8 text-slate-500"})}),g.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No se encontraron sesiones"}),g.jsx("p",{className:"text-slate-400",children:"Intenta ajustar los filtros o la bsqueda."})]}):g.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"grid gap-4",children:ye.map(B=>g.jsxs(oa,{to:`/session/${B.id}`,className:`block bg-slate-800 hover:bg-slate-750 border border-slate-700 rounded-xl transition-all hover:border-indigo-500/50 hover:shadow-lg group ${h==="grid"?"p-0 overflow-hidden flex flex-col":"p-4"}`,children:[g.jsx("div",{className:`${h==="grid"?"h-32 bg-slate-900/50 flex items-center justify-center border-b border-slate-700":"hidden"}`,children:g.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-lg flex items-center justify-center text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition-colors",children:g.jsx(mu,{className:"w-6 h-6 ml-1"})})}),g.jsxs("div",{className:h==="grid"?"p-4 flex-1 flex flex-col":"flex items-center justify-between",children:[g.jsxs("div",{className:`flex items-center gap-4 ${h==="grid"?"mb-4":"flex-1"}`,children:[h==="list"&&g.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-lg flex items-center justify-center text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition-colors",children:g.jsx(mu,{className:"w-6 h-6 ml-1"})}),g.jsx("div",{className:"flex-1 min-w-0",children:o===B.id?g.jsxs("div",{className:"flex items-center gap-2",onClick:H=>H.preventDefault(),children:[g.jsx("input",{type:"text",value:u,onChange:H=>c(H.target.value),className:"flex-1 bg-slate-700 border border-indigo-500 rounded px-3 py-1 text-white focus:outline-none focus:ring-1 focus:ring-indigo-500",autoFocus:!0,onKeyDown:H=>{H.key==="Enter"&&N(H,B.id),H.key==="Escape"&&k(H)},onClick:H=>H.stopPropagation()}),g.jsx("button",{onClick:H=>N(H,B.id),className:"p-1.5 bg-green-600 hover:bg-green-700 rounded text-white transition-colors",children:g.jsx(Xp,{className:"w-4 h-4"})}),g.jsx("button",{onClick:k,className:"p-1.5 bg-slate-600 hover:bg-slate-500 rounded text-white transition-colors",children:g.jsx(pi,{className:"w-4 h-4"})})]}):g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"font-semibold text-lg group-hover:text-indigo-300 transition-colors truncate",children:B.sessionName||"Sesin sin nombre"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-slate-400 mt-1",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(CR,{className:"w-3 h-3"}),E(B.createdAt).split(" ")[0]]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(EE,{className:"w-3 h-3"}),C(B.durationMs)]}),B.ratingAverage>0&&g.jsxs("span",{className:"flex items-center gap-1 text-yellow-500/80",children:[g.jsx(JS,{rating:B.ratingAverage,size:12}),g.jsxs("span",{className:"text-xs text-slate-400",children:["(",B.ratingCount,")"]})]})]})]})})]}),g.jsxs("div",{className:`flex items-center ${h==="grid"?"justify-between mt-auto pt-4 border-t border-slate-700/50":"gap-4"}`,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[B.transcription&&g.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded bg-indigo-500/10 text-indigo-400 text-xs font-medium",title:"Tiene transcripcin",children:[g.jsx(Qu,{className:"w-3 h-3"}),h==="grid"&&"Trans."]}),(B.commentCount||0)>0&&g.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded bg-indigo-500/10 text-indigo-400 text-xs font-medium",title:`${B.commentCount} comentarios`,children:[g.jsx(Ju,{className:"w-3 h-3"}),B.commentCount]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:async H=>{H.preventDefault(),H.stopPropagation();try{const{getSessionComments:Z}=await _f(async()=>{const{getSessionComments:G}=await Promise.resolve().then(()=>UL);return{getSessionComments:G}},void 0),z=await Z(B.id),{exportSessionToJson:Q}=await _f(async()=>{const{exportSessionToJson:G}=await import("./exportUtils-Dar7xkeZ.js");return{exportSessionToJson:G}},[]);Q(B,z)}catch(Z){console.error("Export error:",Z)}},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Exportar a JSON",children:g.jsx(Qp,{className:"w-4 h-4"})}),g.jsx("button",{onClick:H=>b(H,B),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Editar nombre",children:g.jsx(SE,{className:"w-4 h-4"})}),g.jsx("button",{onClick:H=>x(H,B.id),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Copiar enlace",children:g.jsx(pk,{className:"w-4 h-4"})}),g.jsx("button",{onClick:H=>R(H,B),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Eliminar sesin",children:g.jsx(RE,{className:"w-4 h-4"})})]})]})]})]},B.id))})]}),g.jsx(OS,{isOpen:v.isOpen,onClose:()=>T({...v,isOpen:!1}),type:v.type,title:v.title,message:v.message}),g.jsx(LS,{isOpen:D.isOpen,onClose:()=>V({...D,isOpen:!1}),onConfirm:D.onConfirm,onCancel:()=>V({...D,isOpen:!1}),title:D.title,message:D.message,variant:D.variant})]})};function IM(){return g.jsx(rR,{basename:"/econotas",children:g.jsxs("div",{className:"flex flex-col min-h-screen bg-[var(--bg)] text-[var(--text)]",children:[g.jsx("header",{className:"flex justify-end p-2",children:g.jsx(fR,{})}),g.jsxs(OA,{children:[g.jsx(qo,{path:"/",element:g.jsx(xM,{})}),g.jsx(qo,{path:"/new",element:g.jsx(Td,{})}),g.jsx(qo,{path:"/session/:sessionId",element:g.jsx(Td,{})}),g.jsx(qo,{path:"/share/:sessionId",element:g.jsx(Td,{readOnly:!0})})]})]})})}Sd.createRoot(document.getElementById("root")).render(g.jsx(an.StrictMode,{children:g.jsx(vM,{children:g.jsx(IM,{})})}));
